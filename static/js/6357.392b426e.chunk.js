"use strict";(self.webpackChunkproject_g5=self.webpackChunkproject_g5||[]).push([[6357],{9146:function(n,e,t){t.d(e,{Z:function(){return u}});var r,i=t(1413),o=(t(7313),t(168)),a=t(3115),d=t(1237),s=a.ZP.button(r||(r=(0,o.Z)(["\n  left: 0;\n  bottom: 0;\n  z-index: 1;\n  width: 100%;\n  color: #fff;\n  border: none;\n  display: flex;\n  padding: 10px;\n  position: fixed;\n  cursor: pointer;\n  font-size: 13px;\n  font-weight: 600;\n  padding: 10px 20px;\n  align-items: center;\n  text-transform: uppercase;\n  justify-content: space-around;\n  background-color: ",";\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n"])),d.Z.rgbaBlack),c=t(6417),p=function(n){var e=n.label;return(0,c.jsx)(s,(0,i.Z)((0,i.Z)({},n),{},{children:e}))};p.defaultProps={label:"N\xfat b\u1ea5m"};var u=p},6357:function(n,e,t){t.r(e),t.d(e,{default:function(){return hn}});var r,i=t(4165),o=t(5987),a=t(5861),d=t(2982),s=t(1413),c=t(885),p=t(7313),u=t(3222),x=t(5627),l=t(790),f=t(2669),g=t(6618),m=t(6879),h=t(1677),Z=t(2262),b=(t(1300),t(9673)),v=t(1839),j=t(168),y=t(3115),w=y.ZP.div(r||(r=(0,j.Z)(["\n  width: 100%;\n"]))),P=t(7123),S=t(6417),k=function(n){var e=n.isSelectOne,t=n.fieldName,r=n.errors,i=n.register,o=n.setValue,a=n.clearErrors;return(0,S.jsx)(w,{children:(0,S.jsx)(v.Z,{isSelectOne:e,searchGuide:"Nh\u1eadp m\xe3/t\xean \u0111\u1ec3 t\xecm ki\u1ebfm...",searchPlaceholder:"Nh\u1eadp m\xe3/t\xean \u0111\u1ec3 t\xecm ki\u1ebfm...",checkIsDisabledAttribute:"node.code",searchQueryStatement:P.i8,searchQueryPathName:"searchNormalProducts",resultItemAttributes:["node.code","node.name[0].showText","node.netUnitValue","node.unitString"],selectedItemAttributes:["node.code","node.name[0].showText","node.netUnitValue","node.unitString"],fieldName:t,register:i,setFieldValue:o,clearFormErrors:a,validations:{required:!0},isError:!!r[t]})})};k.defaultProps={isSelectOne:!1,fieldName:"fieldName",errors:{},register:function(){},setValue:function(){},clearErrors:function(){}};var C,N,I,E,O,D,_,z,V,Q,q,R,T,U,A,M,G,B,L,F,H,W,X,Y=t(9146),J=t(1237),K=y.ZP.div(C||(C=(0,j.Z)(["\n  font-size: 12px;\n  padding: 10px 0 120px;\n  background-color: ",";\n"])),J.Z.bgGray),$=y.ZP.div(N||(N=(0,j.Z)(["\n  margin: 20px 0;\n  background-color: #fff;\n  padding: 15px 10px 10px;\n  box-shadow: 0px 2px 1px -1px rgb(0 0 0 / 20%),\n    0px 1px 1px 0px rgb(0 0 0 / 14%), 0px 1px 3px 0px rgb(0 0 0 / 12%);\n"]))),nn=y.ZP.p(I||(I=(0,j.Z)(["\n  width: 120px;\n  font-size: 12px;\n  max-width: 200px;\n"]))),en=(y.ZP.input(E||(E=(0,j.Z)(["\n  width: 100%;\n"]))),y.ZP.div(O||(O=(0,j.Z)(["\n  display: flex;\n  margin: 15px auto;\n  width: fit-content;\n  justify-content: center;\n  border: solid 1px ",";\n"])),J.Z.primary),y.ZP.div(D||(D=(0,j.Z)(["\n  padding: 5px 10px;\n  cursor: pointer;\n  text-align: center;\n  color: ",";\n  border-left: 1px solid ",";\n  background-color: ",";\n"])),(function(n){return n.activeColor.textColor}),(function(n){return n.borderLeftColor}),(function(n){return n.activeColor.backgroundColor})),y.ZP.div(_||(_=(0,j.Z)(["\n  margin: 20px 10px;\n  position: relative;\n  background-color: #fff;\n  padding: 15px 10px 10px;\n  box-shadow: 0px 2px 1px -1px rgb(0 0 0 / 20%),\n    0px 1px 1px 0px rgb(0 0 0 / 14%), 0px 1px 3px 0px rgb(0 0 0 / 12%);\n"])))),tn=y.ZP.img(z||(z=(0,j.Z)(["\n  width: 50px;\n  height: 50px;\n  object-fit: cover;\n  margin: 0 10px 0 0;\n  border-radius: 5px;\n  box-shadow: 0px 2px 1px -1px rgb(0 0 0 / 20%),\n    0px 1px 1px 0px rgb(0 0 0 / 14%), 0px 1px 3px 0px rgb(0 0 0 / 12%);\n"]))),rn=y.ZP.div(V||(V=(0,j.Z)([""]))),on=(y.ZP.div(Q||(Q=(0,j.Z)(["\n  display: flex;\n  margin: 5px 0;\n  align-items: center;\n  justify-content: space-between;\n  border-bottom: 1px solid rgb(0 0 0 / 12%);\n"]))),y.ZP.div(q||(q=(0,j.Z)(["\n  display: flex;\n  margin: 5px 0;\n  align-items: center;\n  justify-content: space-between;\n"])))),an=y.ZP.div(R||(R=(0,j.Z)(["\n  display: flex;\n  margin: 5px 0;\n  align-items: center;\n"]))),dn=y.ZP.p(T||(T=(0,j.Z)(["\n  font-weight: 700;\n"]))),sn=(y.ZP.div(U||(U=(0,j.Z)(["\n  text-align: center;\n  width: ","%;\n"])),100/3),y.ZP.p(A||(A=(0,j.Z)(["\n  margin: 0 0 5px;\n"]))),y.ZP.span(M||(M=(0,j.Z)(["\n  color: #fff;\n  padding: 3px 5px;\n  font-size: 12px;\n  border-radius: 5px;\n  background-color: ",";\n"])),(function(n){return n.backgroundColor})),y.ZP.div(G||(G=(0,j.Z)(["\n  display: flex;\n  padding: 0 0 2px;\n  justify-content: space-between;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.1);\n"]))),y.ZP.p(B||(B=(0,j.Z)(["\n  margin: 5px 0;\n  padding: 0 5px;\n  font-size: 12px;\n  border-radius: 5px;\n  width: fit-content;\n  background-color: rgba(120, 120, 120, 0.5);\n"]))),y.ZP.div(L||(L=(0,j.Z)(["\n  top: 0;\n  right: 10px;\n  color: #777;\n  font-size: 20px;\n  cursor: pointer;\n  width: fit-content;\n  position: absolute;\n"])))),cn=y.ZP.div(F||(F=(0,j.Z)(["\n  top: 20px;\n  z-index: 7;\n  right: 10px;\n  cursor: pointer;\n  padding: 5px;\n  position: absolute;\n  border-radius: 5px;\n  background-color: #fff;\n  display: ",";\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n"])),(function(n){return n.display})),pn=y.ZP.p(H||(H=(0,j.Z)(["\n  padding: 5px;\n  font-size: 12px;\n  &:hover {\n    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n  }\n  &:nth-child(3): {\n    color: red;\n  }\n"]))),un=y.ZP.input(W||(W=(0,j.Z)(["\n  width: 70px;\n  border: none;\n  margin: 0 5px;\n  text-align: right;\n  border-bottom: 1px solid #000;\n  color: ",";\n  &:focus-visible {\n    outline: none;\n  }\n"])),(function(n){return n.textColor})),xn=(y.ZP.div(X||(X=(0,j.Z)(["\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  display: flex;\n  position: fixed;\n  padding: 10px 35%;\n  align-items: center;\n  justify-content: space-around;\n  background-color: ",";\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n"])),J.Z.rgbaBlack),t(3454)),ln=t(2153),fn=t(1359),gn=["__typename","_id"],mn=function(n){var e,t,r=n.register,i=n.errors,o=n.productItem,a=n.selectedProducts,d=n.setSelectedProducts,u=o||{},x=u.code,l=u.imgUri,m=u.name,v=u.netUnitValue,j=u.unitString,y=(0,p.useRef)(null),w=(0,p.useState)(!1),P=(0,c.Z)(w,2),k=P[0],C=P[1],N=(0,p.useState)(0),I=(0,c.Z)(N,2),E=I[0],O=I[1],D=E>=0?J.Z.primary:J.Z.lightRed,_=k?"block":"none",z=(0,S.jsx)(cn,{display:_,ref:y,children:(0,S.jsx)(pn,{onClick:function(){},children:"\ud83d\uddd1 Xo\xe1"})});return(0,p.useEffect)((function(){var n=function(n){y.current&&!y.current.contains(n.target)&&C(!1)};return document.addEventListener("mousedown",n),function(){document.removeEventListener("mousedown",n)}}),[y]),(0,S.jsxs)(en,{children:[(0,S.jsx)(sn,{onClick:function(){return C(!k)},children:(0,S.jsx)(g.Z,{})}),z,(0,S.jsxs)(rn,{children:[(0,S.jsxs)(on,{children:[(0,S.jsx)(tn,{src:l}),(0,S.jsxs)("div",{style:{width:"100%"},children:[(0,S.jsx)(on,{children:(0,S.jsxs)(f.Z,{fontSize:12,fontWeight:700,children:[x,m?" - ".concat(m[0].showText):""]})}),(0,S.jsx)(on,{children:(0,S.jsxs)(f.Z,{fontSize:12,fontStyle:"italic",children:[v,j]})})]})]}),(0,S.jsx)("hr",{}),(0,S.jsxs)(on,{children:[(0,S.jsx)(nn,{children:"S\u1ed1 l\u01b0\u1ee3ng nh\u1eadp:"}),(0,S.jsxs)("div",{children:[(0,S.jsx)(Z.Z,{label:"-",onClick:function(){var n=E-1;if(n>=0){O(n);var e=a.map((function(e){return e.code===x?(e.importedQuantity=n,e):e}));d(e)}}}),(0,S.jsx)(un,{min:0,type:"number",value:E,textColor:D,onChange:function(n){var e=parseInt(n.target.value,10),t=0===e||isNaN(e);if(e>0){O(e);var r=a.map((function(n){return n.code===x?(0,s.Z)((0,s.Z)({},n),{},{importedQuantity:e}):n}));d(r)}else if(t){O(0);var i=a.map((function(n){return n.code===x?(0,s.Z)((0,s.Z)({},n),{},{importedQuantity:0}):n}));d(i)}}}),(0,S.jsx)(h.Z,{label:"+",onClick:function(){var n=E+1;O(n);var e=a.map((function(e){return e.code===x?(0,s.Z)((0,s.Z)({},e),{},{importedQuantity:n}):e}));d(e)}})]})]}),(0,S.jsxs)(on,{children:[(0,S.jsx)(nn,{children:"H\u1ea1n s\u1eed d\u1ee5ng:"}),(0,S.jsx)(b.Z,{type:"date",name:"".concat(x,".expirationDate"),register:r,isError:!(null===(e=i[x])||void 0===e||!e.expirationDate),validations:{required:!0}})]}),(0,S.jsxs)(on,{children:[(0,S.jsx)(nn,{children:"Ng\xe0y s\u1ea3n xu\u1ea5t:"}),(0,S.jsx)(b.Z,{type:"date",name:"".concat(x,".dateOfManufacture"),register:r,isError:!(null===(t=i[x])||void 0===t||!t.dateOfManufacture),validations:{required:!0}})]})]})]})},hn=function(n){var e=(0,x.cI)({defaultValues:{}}),t=(e.watch,e.register),r=e.setValue,s=(e.clearErrors,e.handleSubmit),f=e.formState.errors,g=(0,u.I0)(),Z=(0,u.v9)((function(n){return n.authReducer})).viewerQuery,v=(0,p.useState)([]),j=(0,c.Z)(v,2),y=j[0],w=j[1],k=(0,p.useState)({node:Z}),C=(0,c.Z)(k,2),N=C[0],I=C[1];t("implementer",{required:!N});var E=(0,l.D)(xn.qe,{refetchQueries:[{query:P.ze},"GET_WAREHOUSE_INVENTORY",{query:P.BQ},"GET_IMPORTED_PRODUCTS"]}),O=(0,c.Z)(E,1)[0],D=N?(0,S.jsxs)(on,{children:[(0,S.jsxs)(dn,{children:[N.node.fullName," -"," ",N.node.phoneNumber]}),(0,S.jsx)(h.Z,{label:"\u0110\u1ed5i",onClick:function(){I(void 0),r("implementer",void 0)}})]}):(0,S.jsx)(fn.Z,{isSelectOne:!0,isError:!!f.implementer,onClickSelectResultItem:function(n){r("implementer",n),I(n)}}),_=(0,S.jsxs)($,{children:[(0,S.jsxs)(an,{children:[(0,S.jsx)(nn,{children:"Ng\u01b0\u1eddi nh\u1eadp:"}),D]}),(0,S.jsxs)(on,{children:[(0,S.jsx)(nn,{children:"Ng\xe0y nh\u1eadp:"}),(0,S.jsx)(b.Z,{type:"date",name:"importedDate",register:t,isError:!!f.importedDate,validations:{required:!0}})]})]}),z=function(){var n=(0,a.Z)((0,i.Z)().mark((function n(e){var t,r,a,d,s,c,p,u,x,l,f,m,h,Z,b;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:for(t=e.importedDate,r=[],a=0;a<y.length;a++)d=y[a],s=d.importedQuantity,c=d.orderNumber,p=d.code,u=d.netUnitValue,x=d.unitString,l=d.name,s&&(f=new Date(e[p].expirationDate).toISOString(),m=new Date(e[p].dateOfManufacture).toISOString(),h=l.map((function(n){n.__typename,n._id;return(0,o.Z)(n,gn)})),Z={quantity:s,orderNumber:c,productCode:p,netUnitValue:u,unitString:x,productName:h,expirationDate:f,dateOfManufacture:m},r.push(Z));return b={beImportedProducts:r,implementerAccountId:N.node._id,importedDate:new Date(t).toISOString()},n.next=6,O({variables:{data:b}});case 6:n.sent.data&&g((0,ln.mm)());case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return(0,S.jsxs)(K,{children:[_,y.map((function(n,e){return(0,S.jsx)(mn,{itemIndex:e,productItem:n,errors:f,register:t,selectedProducts:y,setSelectedProducts:w},e)})),(0,S.jsxs)(on,{style:{margin:10},children:[(0,S.jsx)(nn,{children:"Th\xeam s\u1ea3n ph\u1ea9m:"}),(0,S.jsx)(m.Z,{isSelectOne:!0,onClickSelectResultItem:function(n){-1===y.findIndex((function(e){return e.code===n.node.code}))&&w([].concat((0,d.Z)(y),[n.node]))}})]}),(0,S.jsx)(Y.Z,{label:"X\xe1c nh\u1eadn",onClick:s(z)})]})}}}]);