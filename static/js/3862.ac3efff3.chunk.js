"use strict";(self.webpackChunkproject_g5=self.webpackChunkproject_g5||[]).push([[3862],{2262:function(n,e,t){t.d(e,{Z:function(){return d}});var r,i=t(1413),o=(t(7313),t(168)),a=t(3115),s=t(1237),l=a.ZP.button(r||(r=(0,o.Z)(["\n  border: none;\n  font-size: 12px;\n  cursor: pointer;\n  border-radius: 5px;\n  height: fit-content;\n  color: ",";\n  margin: ",";\n  padding: ",";\n  font-weight: ",";\n  background-color: ",";\n"])),s.Z.black,(function(n){return n.margin}),(function(n){return n.padding}),(function(n){return n.fontWeight}),(function(n){return n.bgColor?n.bgColor:s.Z.secondary})),c=t(6417),u=function(n){var e=n.label;return(0,c.jsx)(l,(0,i.Z)((0,i.Z)({},n),{},{children:e}))};u.defaultProps={label:"N\xfat b\u1ea5m",onClick:function(){},margin:"5px",padding:"3px 7px"};var d=u},7062:function(n,e,t){t.r(e),t.d(e,{default:function(){return $}});var r,i,o,a,s,l,c,u=t(4165),d=t(1413),g=t(5861),h=t(6459),f=t(2982),x=t(885),p=t(7313),m=t(2790),v=t.n(m),Z=t(3222),j=t(5627),b=t(2668),k=t(790),C=t(6069),S=t(1359),w=t(4641),P=function(){var n=(0,p.useState)(!1),e=(0,x.Z)(n,2),t=e[0],r=e[1],i=(0,p.useState)([]),o=(0,x.Z)(i,2),a=o[0],s=o[1],l=function(n){var e,t,i=null===n||void 0===n||null===(e=n.coords)||void 0===e?void 0:e.latitude,o=null===n||void 0===n||null===(t=n.coords)||void 0===t?void 0:t.longitude,a="https://rsapi.goong.io/Geocode?latlng=".concat(i,",").concat(o,"&api_key=quhmmkZwSmXStActFm3t9poJjOR5EE5jXygR2pt7");fetch(a).then((function(n){return n.json()})).then((function(n){var e=n||{},t=e.status,i=e.results;"OK"===t&&(r(!1),s(i||[]))})).catch((function(n){return r(!1)}))};return{isLoading:t,reversedAddress:a,getCurrentLocation:function(){var n;null!==(n=navigator)&&void 0!==n&&n.geolocation&&(r(!0),navigator.geolocation.getCurrentPosition(l))}}},I=t(1677),y=t(2262),E=t(5222),T=t(6947),q=t(3070),F=t(7123),L=t(3454),M=t(5164),R=t(2153),A=t(168),z=t(3115),D=t(7648),_=t(1237),O=z.ZP.div(r||(r=(0,A.Z)(["\n  font-size: 12px;\n  padding: 0 5px 120px;\n"]))),K=z.ZP.div(i||(i=(0,A.Z)(["\n  display: flex;\n  align-items: ",";\n"])),(function(n){return n.alignItems||"center"})),N=z.ZP.p(o||(o=(0,A.Z)(["\n  width: ",";\n  margin: ",";\n"])),(function(n){return n.width}),(function(n){return n.margin})),X=z.ZP.p(a||(a=(0,A.Z)(["\n  font-weight: 600;\n  margin: ",";\n"])),(function(n){return n.margin})),G=z.ZP.textarea(s||(s=(0,A.Z)(["\n  width: 100%;\n  height: 50px;\n  padding: 5px;\n  margin: 10px 0 0;\n  border-radius: 5px;\n  border: 1px solid ",";\n  &:focus-visible {\n    outline: none;\n  }\n"])),_.Z.rgbaGray),V=(z.ZP.div(l||(l=(0,A.Z)(["\n  background-color: #000;\n  height: 300px;\n"]))),(0,z.ZP)(D.Z)(c||(c=(0,A.Z)(["\n  cursor: pointer;\n  color: ",";\n"])),_.Z.brightBlue)),B=t(6417),H=(0,p.lazy)((function(){return t.e(9146).then(t.bind(t,9146))})),J=(0,p.lazy)((function(){return Promise.all([t.e(4660),t.e(9203)]).then(t.bind(t,9436))})),U=function(n){var e=n.isDisplay,t=n.tookImages,r=n.setTookImages,i=n.setIsTakingPhotos,o=p.useRef(null),a=(0,p.useState)({facingMode:{exact:"environment"}}),s=(0,x.Z)(a,2),l=s[0],c=s[1],u=p.useCallback((function(){var n,e=null===o||void 0===o||null===(n=o.current)||void 0===n?void 0:n.getScreenshot();r([e].concat((0,f.Z)(t)))}),[o,null===t||void 0===t?void 0:t.length,r]);return e?(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(v(),{width:"100%",height:350,audio:!1,ref:o,screenshotFormat:"image/jpeg",videoConstraints:l}),(0,B.jsxs)(K,{children:[(0,B.jsx)(V,{fontSize:"small",onClick:function(){var n;null!==l&&void 0!==l&&null!==(n=l.facingMode)&&void 0!==n&&n.exact?c({facingMode:"user"}):c({facingMode:{exact:"environment"}})}}),(0,B.jsx)(I.Z,{label:"Ch\u1ee5p \u1ea3nh",margin:"0 25px",onClick:u}),(0,B.jsx)(y.Z,{label:"Xong",onClick:function(){return i(!1)}})]})]}):null},W=function(n){var e;(0,h.Z)(n);var t=(0,j.cI)({defaultValues:{}}),r=t.register,i=t.handleSubmit,o=t.formState.errors,a=(0,Z.I0)(),s="images",l="customer",c=p.useState([]),f=(0,x.Z)(c,2),m=f[0],v=f[1],y=(0,p.useState)(!1),A=(0,x.Z)(y,2),z=A[0],D=A[1],_=(0,p.useState)(null),V=(0,x.Z)(_,2),W=V[0],$=V[1],Q=P(),Y=Q.reversedAddress,nn=Q.getCurrentLocation,en=Q.isLoading,tn=(null===(e=Y[0])||void 0===e?void 0:e.formatted_address)||null,rn=(W||{}).fullName,on=(0,b.a)(F.bV).data,an=on&&on.global||{},sn=an.isRequiredTakePhoto,ln=an.isRequiredLocationCheck;r(l,{required:!W}),r(s,{required:!m.length&&sn}),r("location",{required:!tn&&ln});var cn=W?(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(N,{width:"70px",children:"Kh\xe1ch h\xe0ng"}),(0,B.jsxs)(X,{children:[": ",rn]}),(0,B.jsx)(I.Z,{label:"\u0110\u1ed5i",onClick:function(){return $(null)}})]}):(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(N,{width:"80px",children:"Kh\xe1ch h\xe0ng :"}),(0,B.jsx)(S.Z,{width:"90%",isSelectOne:!0,isError:!!o.customer,roles:[q.If.CUSTOMER,q.If.LEAD],onClickSelectResultItem:function(n){$(null===n||void 0===n?void 0:n.node)}})]}),un=tn?(0,B.jsxs)(B.Fragment,{children:[tn,(0,B.jsx)(I.Z,{label:"C\u1eadp nh\u1eadt",onClick:nn})]}):en?"\u0110ang l\u1ea5y v\u1ecb tr\xed...":(0,B.jsx)(w.Z,{margin:"0",label:"L\u1ea5y v\u1ecb tr\xed hi\u1ec7n t\u1ea1i",disabled:en,onClick:nn}),dn=!!o.images&&!tn,gn=(0,k.D)(L.E1),hn=(0,x.Z)(gn,1)[0],fn=function(){var n=(0,g.Z)((0,u.Z)().mark((function n(e){var t,r,i,o;return(0,u.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a((0,M.S$)()),t=e.content,r=(W||{})._id,i=m.map((function(n){return(0,C.tg)({imageSrc:n})})),o=(0,d.Z)((0,d.Z)({},t&&{content:t}),{},{images:i,customerAccountId:r,location:tn}),n.next=7,hn({variables:{data:o}});case 7:n.sent.data&&(a((0,R.AP)()),a((0,M.S4)()));case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return(0,B.jsxs)(O,{children:[(0,B.jsxs)(E.Z,{children:[(0,B.jsx)(K,{children:cn}),(0,B.jsxs)(K,{alignItems:"flex-start",children:[(0,B.jsx)(N,{width:"70px",children:"\u0110\u1ecba \u0111i\u1ec3m"}),(0,B.jsxs)("div",{style:{width:"85%"},children:[(0,B.jsxs)(N,{children:[": ",un]}),(0,B.jsx)(T.Z,{isError:dn,margin:"0 5px"})]})]}),(0,B.jsx)(G,(0,d.Z)((0,d.Z)({},r("content",{required:!sn&&!ln})),{},{placeholder:"Nh\u1eadp n\u1ed9i dung \u0111\xe3 trao \u0111\u1ed5i v\u1edbi kh\xe1ch h\xe0ng..."})),(0,B.jsx)(T.Z,{isError:!!o.content}),!z&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(I.Z,{label:"+ Th\xeam \u1ea3nh",onClick:function(){return D(!0)}}),(0,B.jsx)(T.Z,{isError:!!o.images})]}),(0,B.jsx)(U,{tookImages:m,isDisplay:z,setTookImages:v,setIsTakingPhotos:D}),(0,B.jsx)(p.Suspense,{fallback:null,children:(0,B.jsx)(J,{mediaData:m})})]}),(0,B.jsx)(H,{label:"TH\xcaM M\u1edaI",onClick:i(fn)})]})};W.defaultProps={};var $=W}}]);