"use strict";(self.webpackChunkproject_g5=self.webpackChunkproject_g5||[]).push([[5796],{1625:function(n,t,e){e.r(t),e.d(t,{default:function(){return rn}});var r,i,o,a,c,d,p,s,u,x,l,f,g,h,b,Z,m,v,j,y,w,P=e(4165),k=e(5861),S=e(2982),C=e(885),E=e(7313),I=e(3222),D=e(5627),N=e(790),_=e(2669),z=e(6618),O=e(6879),T=e(1677),V=e(2262),M=(e(1300),e(9673)),H=(e(6536),e(9146)),Q=e(168),Y=e(3115),q=e(1237),U=Y.ZP.div(r||(r=(0,Q.Z)(["\n  font-size: 12px;\n  padding: 10px 0 120px;\n  background-color: ",";\n"])),q.Z.bgGray),A=Y.ZP.div(i||(i=(0,Q.Z)(["\n  margin: 20px 0;\n  background-color: #fff;\n  padding: 15px 10px 10px;\n  box-shadow: 0px 2px 1px -1px rgb(0 0 0 / 20%),\n    0px 1px 1px 0px rgb(0 0 0 / 14%), 0px 1px 3px 0px rgb(0 0 0 / 12%);\n"]))),R=Y.ZP.p(o||(o=(0,Q.Z)(["\n  width: 120px;\n  font-size: 12px;\n  max-width: 200px;\n"]))),L=(Y.ZP.input(a||(a=(0,Q.Z)(["\n  width: 100%;\n"]))),Y.ZP.div(c||(c=(0,Q.Z)(["\n  display: flex;\n  margin: 15px auto;\n  width: fit-content;\n  justify-content: center;\n  border: solid 1px ",";\n"])),q.Z.primary),Y.ZP.div(d||(d=(0,Q.Z)(["\n  padding: 5px 10px;\n  cursor: pointer;\n  text-align: center;\n  color: ",";\n  border-left: 1px solid ",";\n  background-color: ",";\n"])),(function(n){return n.activeColor.textColor}),(function(n){return n.borderLeftColor}),(function(n){return n.activeColor.backgroundColor})),Y.ZP.div(p||(p=(0,Q.Z)(["\n  margin: 20px 10px;\n  position: relative;\n  background-color: #fff;\n  padding: 15px 10px 10px;\n  box-shadow: 0px 2px 1px -1px rgb(0 0 0 / 20%),\n    0px 1px 1px 0px rgb(0 0 0 / 14%), 0px 1px 3px 0px rgb(0 0 0 / 12%);\n"])))),X=Y.ZP.img(s||(s=(0,Q.Z)(["\n  width: 50px;\n  height: 50px;\n  object-fit: cover;\n  margin: 0 10px 0 0;\n  border-radius: 5px;\n  box-shadow: 0px 2px 1px -1px rgb(0 0 0 / 20%),\n    0px 1px 1px 0px rgb(0 0 0 / 14%), 0px 1px 3px 0px rgb(0 0 0 / 12%);\n"]))),G=Y.ZP.div(u||(u=(0,Q.Z)([""]))),W=(Y.ZP.div(x||(x=(0,Q.Z)(["\n  display: flex;\n  margin: 5px 0;\n  align-items: center;\n  justify-content: space-between;\n  border-bottom: 1px solid rgb(0 0 0 / 12%);\n"]))),Y.ZP.div(l||(l=(0,Q.Z)(["\n  display: flex;\n  margin: 5px 0;\n  align-items: center;\n  justify-content: space-between;\n"])))),B=(Y.ZP.div(f||(f=(0,Q.Z)(["\n  text-align: center;\n  width: ","%;\n"])),100/3),Y.ZP.p(g||(g=(0,Q.Z)(["\n  margin: 0 0 5px;\n"]))),Y.ZP.span(h||(h=(0,Q.Z)(["\n  color: #fff;\n  padding: 3px 5px;\n  font-size: 12px;\n  border-radius: 5px;\n  background-color: ",";\n"])),(function(n){return n.backgroundColor})),Y.ZP.div(b||(b=(0,Q.Z)(["\n  display: flex;\n  padding: 0 0 2px;\n  justify-content: space-between;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.1);\n"]))),Y.ZP.p(Z||(Z=(0,Q.Z)(["\n  margin: 5px 0;\n  padding: 0 5px;\n  font-size: 12px;\n  border-radius: 5px;\n  width: fit-content;\n  background-color: rgba(120, 120, 120, 0.5);\n"]))),Y.ZP.div(m||(m=(0,Q.Z)(["\n  top: 0;\n  right: 10px;\n  color: #777;\n  font-size: 20px;\n  cursor: pointer;\n  width: fit-content;\n  position: absolute;\n"])))),F=Y.ZP.div(v||(v=(0,Q.Z)(["\n  top: 20px;\n  z-index: 7;\n  right: 10px;\n  cursor: pointer;\n  padding: 5px;\n  position: absolute;\n  border-radius: 5px;\n  background-color: #fff;\n  display: ",";\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n"])),(function(n){return n.display})),K=Y.ZP.p(j||(j=(0,Q.Z)(["\n  padding: 5px;\n  font-size: 12px;\n  &:hover {\n    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n  }\n  &:nth-child(3): {\n    color: red;\n  }\n"]))),$=Y.ZP.input(y||(y=(0,Q.Z)(["\n  width: 70px;\n  border: none;\n  margin: 0 5px;\n  text-align: right;\n  border-bottom: 1px solid #000;\n  color: ",";\n  &:focus-visible {\n    outline: none;\n  }\n"])),(function(n){return n.textColor})),J=(Y.ZP.div(w||(w=(0,Q.Z)(["\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  display: flex;\n  position: fixed;\n  padding: 10px 35%;\n  align-items: center;\n  justify-content: space-around;\n  background-color: ",";\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n"])),q.Z.rgbaBlack),e(3454)),nn=e(2153),tn=e(6417),en=function(n){var t,e,r=n.register,i=n.errors,o=n.productItem,a=n.selectedProducts,c=n.setSelectedProducts,d=o||{},p=d.code,s=d.imgUri,u=d.name,x=d.netUnitValue,l=d.unitString,f=(0,E.useRef)(null),g=(0,E.useState)(!1),h=(0,C.Z)(g,2),b=h[0],Z=h[1],m=(0,E.useState)(0),v=(0,C.Z)(m,2),j=v[0],y=v[1],w=j>=0?q.Z.primary:q.Z.lightRed,P=b?"block":"none",k=(0,tn.jsx)(F,{display:P,ref:f,children:(0,tn.jsx)(K,{onClick:function(){},children:"\ud83d\uddd1 Xo\xe1"})});return(0,E.useEffect)((function(){var n=function(n){f.current&&!f.current.contains(n.target)&&Z(!1)};return document.addEventListener("mousedown",n),function(){document.removeEventListener("mousedown",n)}}),[f]),(0,tn.jsxs)(L,{children:[(0,tn.jsx)(B,{onClick:function(){return Z(!b)},children:(0,tn.jsx)(z.Z,{})}),k,(0,tn.jsxs)(G,{children:[(0,tn.jsxs)(W,{children:[(0,tn.jsx)(X,{src:s}),(0,tn.jsxs)("div",{style:{width:"100%"},children:[(0,tn.jsx)(W,{children:(0,tn.jsxs)(_.Z,{fontSize:12,fontWeight:700,children:[p,u?" - ".concat(u[0].showText):""]})}),(0,tn.jsx)(W,{children:(0,tn.jsxs)(_.Z,{fontSize:12,fontStyle:"italic",children:[x,l]})})]})]}),(0,tn.jsx)("hr",{}),(0,tn.jsxs)(W,{children:[(0,tn.jsx)(R,{children:"S\u1ed1 l\u01b0\u1ee3ng nh\u1eadp:"}),(0,tn.jsxs)("div",{children:[(0,tn.jsx)(V.Z,{label:"-",onClick:function(){var n=j-1;if(n>=0){y(n);var t=a.map((function(t){return t.code===p?(t.importedQuantity=n,t):t}));c(t)}}}),(0,tn.jsx)($,{min:0,type:"number",value:j,textColor:w,onChange:function(n){var t=parseInt(n.target.value,10),e=0===t||isNaN(t);if(t>0){y(t);var r=a.map((function(n){return n.code===p?(n.importedQuantity=t,n):n}));c(r)}else if(e){y(0);var i=a.map((function(n){return n.code===p?(n.importedQuantity=0,n):n}));c(i)}}}),(0,tn.jsx)(T.Z,{label:"+",onClick:function(){var n=j+1;y(n);var t=a.map((function(t){return t.code===p?(t.importedQuantity=n,t):t}));c(t)}})]})]}),(0,tn.jsxs)(W,{children:[(0,tn.jsx)(R,{children:"H\u1ea1n s\u1eed d\u1ee5ng:"}),(0,tn.jsx)(M.Z,{type:"date",name:"".concat(p,".expirationDate"),register:r,isError:!(null===(t=i[p])||void 0===t||!t.expirationDate),validations:{required:!0}})]}),(0,tn.jsxs)(W,{children:[(0,tn.jsx)(R,{children:"Ng\xe0y s\u1ea3n xu\u1ea5t:"}),(0,tn.jsx)(M.Z,{type:"date",name:"".concat(p,".dateOfManufacture"),register:r,isError:!(null===(e=i[p])||void 0===e||!e.dateOfManufacture),validations:{required:!0}})]})]})]})},rn=function(n){var t=(0,D.cI)({defaultValues:{}}),e=(t.watch,t.register),r=(t.setValue,t.clearErrors,t.handleSubmit),i=t.formState.errors,o=(0,I.I0)(),a=(0,E.useState)([]),c=(0,C.Z)(a,2),d=c[0],p=c[1],s=(0,N.D)(J.qe),u=(0,C.Z)(s,1)[0],x=(0,tn.jsx)(A,{children:(0,tn.jsxs)(W,{children:[(0,tn.jsx)(R,{children:"Ng\xe0y nh\u1eadp:"}),(0,tn.jsx)(M.Z,{type:"date",name:"importedDate",register:e,isError:!!i.importedDate,validations:{required:!0}})]})}),l=function(){var n=(0,k.Z)((0,P.Z)().mark((function n(t){var e,r,i,a,c,p,s,x,l,f,g,h,b,Z,m;return(0,P.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:for(e=t.importedDate,r=[],i=0;i<d.length;i++)a=d[i],c=a.importedQuantity,p=a.orderNumber,s=a.code,x=a.netUnitValue,l=a.unitString,f=a.name,c&&(g=new Date(t[s].expirationDate).toISOString(),h=new Date(t[s].dateOfManufacture).toISOString(),b=f.map((function(n){return delete n.__typename,delete n._id,n})),Z={quantity:c,orderNumber:p,productCode:s,netUnitValue:x,unitString:l,productName:b,expirationDate:g,dateOfManufacture:h},r.push(Z));return m={beImportedProducts:r,importedDate:new Date(e).toISOString()},n.next=6,u({variables:{data:m}});case 6:n.sent.data&&o((0,nn.mm)());case 8:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}();return(0,tn.jsxs)(U,{children:[x,d.map((function(n,t){return(0,tn.jsx)(en,{itemIndex:t,productItem:n,errors:i,register:e,selectedProducts:d,setSelectedProducts:p},t)})),(0,tn.jsxs)(W,{style:{margin:10},children:[(0,tn.jsx)(R,{children:"Th\xeam s\u1ea3n ph\u1ea9m:"}),(0,tn.jsx)(O.Z,{isSelectOne:!0,onClickSelectResultItem:function(n){-1===d.findIndex((function(t){return t.code===n.node.code}))&&p([].concat((0,S.Z)(d),[n.node]))}})]}),(0,tn.jsx)(H.Z,{label:"X\xe1c nh\u1eadn",onClick:r(l)})]})}},6069:function(n,t,e){e.d(t,{RX:function(){return a},dh:function(){return o},tO:function(){return i},zZ:function(){return c}});var r=e(3070),i=function(n,t){if(t){for(var e=(t=(t=t.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split("."),r=0,i=e.length;r<i;++r){var o=e[r];if(!(o in n))return;n=n[o]}return n}},o=function(n){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],e=new Date(n),r=e.getFullYear(),i=e.getMonth()+1,o=e.getDate(),a=e.getHours(),c=e.getMinutes();return o=o<10?"0"+o:o,i=i<10?"0"+i:i,a=a<10?"0"+a:a,c=c<10?"0"+c:c,t?"".concat(o,"/").concat(i,"/").concat(r," - ").concat(a,":").concat(c):"".concat(o,"/").concat(i,"/").concat(r)},a=function(n,t,e){switch(n){case r.rh.MONEY_ACHIEVE_TYPE:return{unit:"\u0111",type:"T\u1ed5ng ti\u1ec1n"};case r.rh.QUANTITY_ACHIEVE_TYPE:return{unit:"bao",type:"S\u1ed1 l\u01b0\u1ee3ng"};case r.rh.WEIGHT_ACHIEVE_TYPE:return{unit:"".concat(t).concat(e),type:"Kh\u1ed1i l\u01b0\u1ee3ng"}}},c=function(n,t){return isNaN(t)?n:"string"===typeof n?n.split(" ").slice(0,parseInt(t,10)).join(" "):n}}}]);