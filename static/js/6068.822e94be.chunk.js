"use strict";(self.webpackChunkproject_g5=self.webpackChunkproject_g5||[]).push([[6068],{9881:function(n,e,t){t.r(e),t.d(e,{default:function(){return E}});var o,r,i,c=t(1413),a=t(2982),d=t(885),u=t(7313),s=t(3222),l=t(3306),D=t(2668),f=t(6173),P=t(6069),m=t(9829),b=t(5310),p=t(2206),_=t(3867),y=t(168),O=t(3115),h=t(1237),C=O.ZP.div(o||(o=(0,y.Z)(["\n  font-size: 12px;\n  margin: 20px 0 120px;\n"]))),T=O.ZP.div(r||(r=(0,y.Z)(["\n  display: flex;\n  margin: 30px auto;\n  width: fit-content;\n  justify-content: center;\n  box-shadow: rgba(0, 0, 0, 0.16) 0px 1px 4px;\n"]))),S=O.ZP.div(i||(i=(0,y.Z)(["\n  padding: 5px;\n  cursor: pointer;\n  text-align: center;\n  color: ",";\n  border-left: 1px solid ",";\n  background-color: ",";\n"])),(function(n){return n.activeColor.textColor}),(function(n){return n.borderLeftColor}),(function(n){return n.activeColor.backgroundColor})),Z=t(7123),U=t(3163),A=t(6417),I=(0,u.lazy)((function(){return Promise.all([t.e(3162),t.e(2700)]).then(t.bind(t,9300))})),g=function(n){var e=n.initCustomerAccount,t=n.customerAccountId,o=n.startOfTimeRange,r=n.endOfTimeRange,i=n.selectedCustomer,y=n.setPrintSection,O=e&&e.node||{},g=O._id,E=O.fullName,v=[{code:"all",label:"T\u1ea5t c\u1ea3"},{code:"pay_immediately",label:"Tr\u1ea3 ngay"},{code:"paid",label:"\u0110\xe3 tr\u1ea3"},{code:"waiting_for_pay",label:"Ch\u01b0a tr\u1ea3"},{code:"reached",label:"\u0110\xe3 \u0111\u1ea1t"},{code:"reaching",label:"\u0110ang ch\u1ea1y"},{code:"unreached",label:"Kh\xf4ng \u0111\u1ea1t"}],x=((0,s.v9)((function(n){return n.authReducer})).viewerQuery||{})._id,R=(0,u.useState)(v[0]),B=(0,d.Z)(R,2),w=B[0],F=B[1],N=(0,u.useState)("2012/01/01"),M=(0,d.Z)(N,2),j=M[0],k=M[1],W=(0,u.useState)("2100/01/01"),L=(0,d.Z)(W,2),Y=L[0],V=L[1],z=(0,u.useState)(g),H=(0,d.Z)(z,2),K=H[0],Q=H[1],q=e?j:o,G=e?Y:r,J=e?K:t,X=w.code===v[2].code||w.code===v[3].code||w.code===v[4].code,$=(0,l.t)(Z.hM,{fetchPolicy:"cache-and-network"}),nn=(0,d.Z)($,2),en=nn[0],tn=nn[1],on=tn.data,rn=tn.subscribeToMore,cn=on&&on.discountPromotionDiaries.edges||[],an=[],dn=cn.filter((function(n){var e=n.node,t=e.discountPromotionCode,o=e.payWhenCreateOrder;if(o&&!an.includes(t))return an=[].concat((0,a.Z)(an),[t]),!0;return!o})),un=function(){switch(w.code){case v[1].code:return{payWhenCreateOrder:!0};case v[2].code:return{isPaid:!0};case v[3].code:return{unPayYet:!0};case v[4].code:return{isReached:!0};case v[5].code:return{availableOnly:!0};case v[6].code:return{unReachedOnly:!0};default:return{}}}(),sn=(0,c.Z)((0,c.Z)({startOfTimeRange:new Date(q),endOfTimeRange:new Date(G)},un),J&&{customerAccountId:J}),ln=(0,D.a)(Z.Kr,{variables:{filter:sn},skip:X}).data,Dn=ln&&ln.discountPromotions.edges||[],fn=function(n){return n.code===w.code?{backgroundColor:h.Z.primary,textColor:h.Z.white}:{backgroundColor:h.Z.white,textColor:""}},Pn=X?(0,A.jsx)(A.Fragment,{children:dn.map((function(n,e){var t=n.node,o=t.discountPromotionCode,r=t.reachedCount,i=t.discountPromotionInfo,c=t.totalBePaidMoneyValue,a={diaryCount:r,diaryInfo:n.node,totalBePaidMoneyValue:c};return o==="".concat(h.k,"DP_early_payment")?(0,A.jsx)(b.Z,{diaryItem:n.node},e):(0,A.jsx)(_.Z,{discountPromotionItem:i,customerDiaryInfo:a},e)}))}):(0,A.jsx)(A.Fragment,{children:Dn.map((function(n,e){return(0,A.jsx)(_.Z,{discountPromotionItem:n.node,customerDiaryInfo:n.node.customerDiaryInfo},e)}))});(0,u.useEffect)((function(){if(X){var n=(0,c.Z)({startOfTimeRange:new Date(q),endOfTimeRange:new Date(G)},sn);en({variables:{filter:n}})}}),[w.code]),(0,u.useEffect)((function(){var n=function(n){var e=n||{},t=e.customerAccountId,o=e.staffAccountId,r=e.managerAccountId,i=e.directorAccountId;return x===t||x===o||x===r||x===i},e=rn({document:U.VL,updateQuery:function(e,t){var o=t.subscriptionData;return(0,p.FM)("discountPromotionDiaries","addedNewDiscountPromotionDiary",o,e,n,!0)}});return function(){return e()}}),[rn]);var mn=X?cn:Dn,bn=e&&(null===e||void 0===e?void 0:e.node)||i||{},pn=!(0,P.SB)()&&(0,A.jsx)(u.Suspense,{fallback:(0,A.jsx)(f.default,{}),children:(0,A.jsx)(I,{customerButtonMargin:"5px 0",printDiscountPromotionTrackingData:{diariesData:mn||[],selectedCustomer:bn}})});return(0,u.useMemo)((function(){y(pn)}),[cn.length,Dn.length]),(0,A.jsxs)(C,{children:[!!e&&(0,A.jsx)(m.Z,{printSection:pn,inputStartTime:j,setInputStartTime:k,inputEndTime:Y,setInputEndTime:V,onClickSelectResultItem:function(n){var e=(n&&n.node||{})._id;Q(e),k("2012/01/01"),V("2100/01/01")},searchPlaceholder:E,showSelectAllButton:!1,canSearchCustomer:!0}),(0,A.jsx)(T,{children:v.map((function(n,e){return(0,A.jsx)(S,{activeColor:fn(n),onClick:function(){return F(n)},borderLeftColor:e>0?h.Z.primary:"transparent",children:n.label},e)}))}),Pn]})};g.defaultProps={setPrintSection:function(){}};var E=g},3163:function(n,e,t){t.d(e,{Fb:function(){return A},I4:function(){return C},PP:function(){return I},VL:function(){return U},hv:function(){return T},uB:function(){return S},uF:function(){return Z}});var o,r,i,c,a,d,u,s,l,D,f,P,m,b,p,_,y=t(168),O=t(9237),h=t(9384),C=(0,O.Ps)(o||(o=(0,y.Z)(["\n  subscription SUB_ADDED_NOTIFICATION {\n    addedNewNotification {\n      ...basicNotificationFields\n    }\n  }\n  ","\n"])),h.Y4),T=(0,O.Ps)(r||(r=(0,y.Z)(["\n  subscription SUB_ADDED_ORDER {\n    addedNewOrder {\n      ...basicOrderFields\n    }\n  }\n  ","\n"])),h.dL),S=(0,O.Ps)(i||(i=(0,y.Z)(["\n  subscription SUB_UPDATED_ORDER {\n    updatedAnOrder {\n      ...basicOrderFields\n    }\n  }\n  ","\n"])),h.dL),Z=(0,O.Ps)(c||(c=(0,y.Z)(["\n  subscription SUB_ADDED_DISCOUNT_PROMOTION {\n    addedNewDiscountPromotion {\n      ...basicDiscountPromotionFields\n      customerDiaryInfo {\n        diaryCount\n        diaryInfo {\n          ...basicDiscountPromotionDiaryFields\n        }\n        totalBePaidMoneyValue\n      }\n    }\n  }\n  ","\n  ","\n"])),h.MM,h.xC),U=((0,O.Ps)(a||(a=(0,y.Z)(["\n  subscription SUB_UPDATED_DISCOUNT_PROMOTION {\n    updatedDiscountPromotion {\n      ...basicDiscountPromotionFields\n    }\n  }\n  ","\n"])),h.MM),(0,O.Ps)(d||(d=(0,y.Z)(["\n  subscription SUB_ADDED_DISCOUNT_PROMOTION_DIARY {\n    addedNewDiscountPromotionDiary {\n      ...basicDiscountPromotionDiaryFields\n    }\n  }\n  ","\n"])),h.xC)),A=((0,O.Ps)(u||(u=(0,y.Z)(["\n  subscription SUB_UPDATED_DISCOUNT_PROMOTION_DIARY {\n    updatedDiscountPromotionDiary {\n      ...basicDiscountPromotionDiaryFields\n    }\n  }\n  ","\n"])),h.xC),(0,O.Ps)(s||(s=(0,y.Z)(["\n  subscription SUB_ADDED_DEBT {\n    addedNewDebt {\n      ...basicDebtFields\n    }\n  }\n  ","\n"])),h.l3)),I=((0,O.Ps)(l||(l=(0,y.Z)(["\n  subscription SUB_UPDATED_DEBT {\n    updatedDebt {\n      ...basicDebtFields\n    }\n  }\n  ","\n"])),h.l3),(0,O.Ps)(D||(D=(0,y.Z)(["\n  subscription SUB_ADDED_PRODUCT {\n    addedNewProduct {\n      ...basicProductFields\n    }\n  }\n  ","\n"])),h.UW));(0,O.Ps)(f||(f=(0,y.Z)(["\n  subscription SUB_UPDATED_PRODUCT {\n    updatedProduct {\n      ...basicProductFields\n    }\n  }\n  ","\n"])),h.UW),(0,O.Ps)(P||(P=(0,y.Z)(["\n  subscription SUB_IMPORTED_PRODUCTS {\n    importedProducts {\n      ...basicProductFields\n    }\n  }\n  ","\n"])),h.UW),(0,O.Ps)(m||(m=(0,y.Z)(["\n  subscription SUB_DESTROYED_PRODUCT {\n    destroyedProduct {\n      ...basicDestroyedProductFields\n    }\n  }\n  ","\n"])),h.zY),(0,O.Ps)(b||(b=(0,y.Z)(["\n  subscription SUB_UPDATED_DESTROYED_PRODUCT {\n    updatedDestroyedProduct {\n      ...basicDestroyedProductFields\n    }\n  }\n  ","\n"])),h.zY),(0,O.Ps)(p||(p=(0,y.Z)(["\n  subscription SUB_ADDED_WAREHOUSE_BALANCE {\n    addedWarehouseBalance {\n      ...basicWarehouseBalanceFields\n    }\n  }\n  ","\n"])),h.ms),(0,O.Ps)(_||(_=(0,y.Z)(["\n  subscription SUB_ADDED_WAREHOUSE_BALANCE_DIARY {\n    addedWarehouseBalanceDiary {\n      ...basicWarehouseBalanceDiaryFields\n    }\n  }\n  ","\n"])),h.lH)},6881:function(n,e,t){var o=t(8098);e.Z=function(n){if(Array.isArray(n)){var e,t=n||[],r=o.t.getState().commonReducer,i=r&&(null===(e=r.activeLanguage)||void 0===e?void 0:e.locale)||"vi";return(t.find((function(n){return n&&n.locale===i}))||{}).showText||""}return""}}}]);