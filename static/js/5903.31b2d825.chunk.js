"use strict";(self.webpackChunkproject_g5=self.webpackChunkproject_g5||[]).push([[5903],{5903:function(e,n,r){r.r(n),r.d(n,{default:function(){return re}});var i,t,o,a,d,s,l,c,u,p,h,x,m=r(4165),g=r(1413),f=r(5861),v=r(885),C=r(7313),Z=r(3222),j=r(2668),E=r(790),N=r(5627),O=r(1359),_=r(6881),b=r(1677),A=r(5222),w=r(9673),T=r(9146),y=r(3182),I=r(6947),P=r(7532),R=r(7930),S=r(7123),B=r(3454),D=r(3070),q=r(7119),k=r(2153),V=r(5164),z=r(168),G=r(3115),M=r(1237),W=G.ZP.div(i||(i=(0,z.Z)(["\n  font-size: 12px;\n  padding: 10px 5px 120px;\n"]))),L=G.ZP.div(t||(t=(0,z.Z)(["\n  width: 100%;\n  display: flex;\n  position: relative;\n  align-items: center;\n  margin: 10px 20px 15px 0;\n"]))),H=G.ZP.div(o||(o=(0,z.Z)(["\n  display: flex;\n  margin: 10px 0;\n  align-items: center;\n  justify-content: space-between;\n"]))),U=(G.ZP.span(a||(a=(0,z.Z)(["\n  font-weight: 700;\n"]))),G.ZP.p(d||(d=(0,z.Z)(["\n  width: ",";\n"])),(function(e){return e.width}))),F=G.ZP.p(s||(s=(0,z.Z)(["\n  font-weight: 700;\n"]))),Q=(G.ZP.p(l||(l=(0,z.Z)(["\n  margin: 0 0 20px;\n  font-style: italic;\n  color: ",";\n"])),M.Z.lightRed),G.ZP.div(c||(c=(0,z.Z)(["\n  width: 100%;\n  display: flex;\n  align-items: center;\n  margin: 10px 20px 15px 0;\n  @media (max-width: 991px) {\n    display: block;\n  }\n"])))),$=G.ZP.input(u||(u=(0,z.Z)(["\n  width: 49%;\n  border: none;\n  padding: 2px 5px;\n  margin: 5px 0 0 0;\n  line-height: 20px;\n  background-color: ",";\n  border-bottom: 1px solid ",";\n  &:hover {\n    box-shadow: none;\n  }\n  &:focus {\n    box-shadow: none;\n  }\n  &:focus-visible {\n    outline: none;\n    box-shadow: none;\n  }\n"])),M.Z.lightWhite,M.Z.secondary),X=G.ZP.p(p||(p=(0,z.Z)(["\n  font-size: 11px;\n  font-weight: 500;\n  color: ",";\n  margin: ",";\n"])),M.Z.lightBlack,(function(e){return e.margin||"35px 0 11px 10px"})),J=G.ZP.div(h||(h=(0,z.Z)(["\n  top: 31px;\n  position: absolute;\n"]))),K=G.ZP.div(x||(x=(0,z.Z)(["\n  width: 100%;\n  margin: 5px 10px 10px;\n  @media (max-width: 991px) {\n    margin: 5px 0 10px;\n  }\n"]))),Y=r(6417),ee=[q.gz.CAN_CREATE_ORDER_FOR_OWN_CUSTOMERS,q.gz.CAN_UPDATE_ORDER_BEFORE_BE_APPROVED,q.gz.CAN_CANCEL_ORDER_BEFORE_BE_APPROVED,q.gz.CAN_VIEW_OWN_CUSTOMERS_ORDERS,q.gz.CAN_VIEW_OWN_DISCOUNT_PROMOTIONS,q.gz.CAN_VIEW_OWN_DEBTS,q.gz.CAN_VIEW_OWN_REPORT],ne=function(e){var n,r=(0,N.cI)({defaultValues:{provinceCode:"",districtCode:"",communeCode:"",leadTypeCode:"",leadGroupCode:""}}),i=r.watch,t=r.register,o=r.setValue,a=(r.setError,r.clearErrors),d=r.handleSubmit,s=r.formState.errors;t("dateOfBirth",{required:!0}),t("staffAccount",{required:!0});var l=(0,Z.I0)(),c=(0,C.useRef)(null),u=i("provinceCode"),p=i("districtCode"),h=(0,C.useState)(void 0),x=(0,v.Z)(h,2),q=x[0],z=x[1],G=(0,C.useState)(""),M=(0,v.Z)(G,2),ne=M[0],re=M[1],ie=(0,C.useState)(void 0),te=(0,v.Z)(ie,2),oe=te[0],ae=te[1];t("avatarImage",{required:!q});var de=oe?(0,Y.jsxs)(H,{style:{width:"100%"},children:[(0,Y.jsxs)(F,{children:[oe.fullName," - ",oe.phoneNumber]}),(0,Y.jsx)(b.Z,{label:"\u0110\u1ed5i",onClick:function(){ae(void 0),o("staffAccount",void 0)}})]}):(0,Y.jsx)(O.Z,{isSelectOne:!0,notBeCustomer:!0,notEmptyManager:!0,isError:!!s.staffAccount,onClickSelectResultItem:function(e){a("staffAccount"),ae(e.node),o("staffAccount",e.node)}}),se=(0,j.a)(S.hz,{variables:{where:{provinceCode:u}},skip:!u}).data,le=(0,j.a)(S.j5,{variables:{where:{districtCode:p}},skip:!p}).data,ce=(null===le||void 0===le?void 0:le.vnCommunesByDistrict)||[],ue=(null===se||void 0===se||null===(n=se.vnProvinceByCode)||void 0===n?void 0:n.districts)||[],pe=(0,j.a)(S.hc).data,he=(null===pe||void 0===pe?void 0:pe.leadGroups)||[],xe=function(e){return null===e||void 0===e?void 0:e.code},me=function(e){return(0,_.Z)(null===e||void 0===e?void 0:e.label)},ge=(0,Y.jsx)(y.Z,{name:"provinceCode",register:t,margin:"5px 0 10px 0",placeholder:"T\u1ec9nh/Th\xe0nh",validations:{required:!0},isError:!!s.provinceCode,getOptionValue:xe,options:R.ZP.provinces}),fe=(0,Y.jsx)(K,{children:(0,Y.jsx)(y.Z,{margin:"0",name:"districtCode",register:t,options:ue,placeholder:"Qu\u1eadn/Huy\u1ec7n",validations:{required:!0},isError:!!s.districtCode,getOptionLabel:me,getOptionValue:xe,isDisabled:!u})}),ve=(0,Y.jsx)(y.Z,{name:"communeCode",options:ce,register:t,margin:"5px 0 10px 0",placeholder:"X\xe3/Ph\u01b0\u1eddng",isError:!!s.communeCode,validations:{required:!0},getOptionLabel:me,getOptionValue:xe,isDisabled:!p}),Ce=(0,Y.jsxs)(Q,{children:[ge,fe,ve]}),Ze=(0,E.D)(B.cG,{onError:function(){setTimeout((function(){l((0,V.S4)())}),500);var e={title:"L\u1ed7i",children:(0,Y.jsx)("p",{children:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i tr\xf9ng v\u1edbi m\u1ed9t lead c\xf3 trong danh s\xe1ch. Vui l\xf2ng li\xean h\u1ec7 qu\u1ea3n tr\u1ecb h\u1ec7 th\u1ed1ng!"})};l((0,k.om)(e))},refetchQueries:[{query:S.q6},"GET_ACCOUNTS"]}),je=(0,v.Z)(Ze,1)[0],Ee=function(){var e=(0,f.Z)((0,m.Z)().mark((function e(n){var r,i,t,o,a,d,s,c,u,p,h,x,f,v,C,Z,j;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l((0,V.S$)()),r=n.idCode,i=n.fullName,t=n.phoneNumber,o=n.dateOfBirth,a=n.provinceCode,d=n.districtCode,s=n.communeCode,c=n.addressNote,u=n.leadGroupCode,p=n.leadTypeCode,h=n.staffAccount,f=(x=h||{})._id,v=x.managerAccountId,C=x.directorAccountId,Z=(0,g.Z)((0,g.Z)({idCode:r,fullName:i,phoneNumber:t,dateOfBirth:o,provinceCode:a,districtCode:d,communeCode:s,addressNote:c,leadGroupCode:u,leadTypeCode:p,staffAccountId:f,avatarImage:q,roles:[D.If.LEAD],password:"".concat(Math.random()),permissions:ee},v&&{managerAccountId:v}),C&&{directorAccountId:C}),e.next=6,je({variables:{data:Z}});case 6:e.sent.data&&(setTimeout((function(){l((0,V.S4)())}),500),j={title:"Th\xeam lead",children:(0,Y.jsx)("p",{children:"Th\xeam lead th\xe0nh c\xf4ng!"})},l((0,k.om)(j)),l((0,k.Ay)()));case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,Y.jsxs)(W,{children:[(0,Y.jsx)(X,{margin:"35px 0 11px 10px",children:"TH\xd4NG TIN"}),(0,Y.jsxs)(A.Z,{children:[(0,Y.jsxs)(L,{children:[(0,Y.jsx)(w.Z,{name:"fullName",register:t,margin:"5px 10px 0 0",isError:!!s.fullName,validations:{required:!0},placeholder:"H\u1ecd t\xean"}),(0,Y.jsx)(w.Z,{name:"phoneNumber",register:t,isError:!!s.phoneNumber,validations:{required:!0,pattern:{value:/^[0-9]{10}$/}},margin:"5px 0 0 5px",placeholder:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i",errorMessage:"*Ch\u1ec9 g\u1ed3m 10 s\u1ed1"})]}),(0,Y.jsxs)(L,{children:[(0,Y.jsx)($,{name:"dateOfBirth",ref:c,placeholder:"Ng\xe0y sinh",value:ne,onBlur:function(){return!ne&&(c.current.type="text")},onFocus:function(){return c.current.type="date"},onChange:function(e){re(e.target.value),o("dateOfBirth",e.target.value)}}),(0,Y.jsx)(w.Z,{width:"50%",name:"idCode",register:t,margin:"6px 0 0 15px",placeholder:"M\xe3 lead",isError:!!s.idCode,validations:{required:!0}}),(0,Y.jsx)(J,{children:(0,Y.jsx)(I.Z,{isError:!!s.dateOfBirth})})]}),(0,Y.jsxs)(L,{children:[(0,Y.jsx)(U,{width:"70px",children:"Ph\u1ee5 tr\xe1ch"}),":\u2002",de]})]}),(0,Y.jsx)(X,{children:"\u0110\u1ecaA CH\u1ec8"}),(0,Y.jsxs)(A.Z,{children:[Ce,(0,Y.jsx)(L,{children:(0,Y.jsx)(w.Z,{margin:" 0",name:"addressNote",register:t,placeholder:"Ghi ch\xfa \u0111\u1ecba ch\u1ec9",isError:!!s.addressNote})})]}),(0,Y.jsx)(X,{children:"NH\xd3M/LO\u1ea0I"}),(0,Y.jsx)(A.Z,{children:(0,Y.jsxs)(L,{children:[(0,Y.jsx)(y.Z,{name:"leadGroupCode",register:t,margin:"5px 10px 0 0",placeholder:"Nh\xf3m Lead",options:he,validations:{required:!0},isError:!!s.leadGroupCode,getOptionValue:function(e){return null===e||void 0===e?void 0:e.groupCode}}),(0,Y.jsx)(y.Z,{name:"leadTypeCode",placeholder:"Lo\u1ea1i",register:t,margin:"5px 0 0 5px",options:[{label:"Trang tr\u1ea1i",value:"farm"},{label:"\u0110\u1ea1i l\xfd",value:"agency"}],validations:{required:!0},isError:!!s.leadTypeCode})]})}),(0,Y.jsx)(X,{children:"\u1ea2NH \u0110\u1ea0I DI\u1ec6N"}),(0,Y.jsxs)(A.Z,{children:[(0,Y.jsx)("p",{children:"\u1ea2nh \u0111\u1ea1i di\u1ec7n"}),(0,Y.jsx)(I.Z,{isError:!!s.avatarImage&&!q}),(0,Y.jsx)(L,{children:(0,Y.jsx)(P.Z,{setResizedImageUri:z})})]}),(0,Y.jsx)(T.default,{label:"TH\xcaM M\u1edaI",onClick:d(Ee)})]})};ne.defaultProps={};var re=ne}}]);