"use strict";(self.webpackChunkproject_g5=self.webpackChunkproject_g5||[]).push([[2447],{9146:function(n,e,r){r.d(e,{Z:function(){return l}});var t,i=r(1413),o=(r(7313),r(168)),a=r(3115),c=r(1237),s=a.ZP.button(t||(t=(0,o.Z)(["\n  left: 0;\n  bottom: 0;\n  z-index: 1;\n  width: 100%;\n  color: #fff;\n  border: none;\n  display: flex;\n  padding: 10px;\n  position: fixed;\n  cursor: pointer;\n  font-size: 13px;\n  font-weight: 600;\n  padding: 10px 20px;\n  align-items: center;\n  text-transform: uppercase;\n  justify-content: space-around;\n  background-color: ",";\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n"])),c.Z.rgbaBlack),d=r(6417),u=function(n){var e=n.label;return(0,d.jsx)(s,(0,i.Z)((0,i.Z)({},n),{},{children:e}))};u.defaultProps={label:"N\xfat b\u1ea5m"};var l=u},6524:function(n,e,r){r.r(e),r.d(e,{default:function(){return _}});var t,i,o,a,c,s=r(4165),d=r(5861),u=r(885),l=(r(7313),r(5627)),p=r(3222),x=r(790),f=(r(1677),r(5222)),h=(r(1300),r(9146)),g=r(9673),m=r(6233),Z=r(168),b=r(3115),v=r(1237),E=b.ZP.div(t||(t=(0,Z.Z)(["\n  font-size: 12px;\n  padding: 10px 10px 120px;\n"]))),j=b.ZP.div(i||(i=(0,Z.Z)(["\n  display: flex;\n  align-items: center;\n  margin: 10px 0 15px;\n"]))),P=b.ZP.div(o||(o=(0,Z.Z)(["\n  width: 40%;\n"]))),T=(b.ZP.input(a||(a=(0,Z.Z)(["\n  width: 60%;\n"]))),b.ZP.div(c||(c=(0,Z.Z)(["\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  display: flex;\n  position: fixed;\n  padding: 10px;\n  align-items: center;\n  justify-content: space-around;\n  background-color: ",";\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n"])),v.Z.rgbaBlack),r(3454)),I=r(2153),y=r(6417),_=function(n){var e=n.discountPromotionId,r=(0,l.cI)({defaultValues:{customer:[]}}),t=r.register,i=r.setValue,o=r.clearErrors,a=r.handleSubmit,c=r.formState.errors,Z=(0,p.I0)(),b=(0,x.D)(T.Xu),v=(0,u.Z)(b,1)[0],_=(0,x.D)(T.JS),N=(0,u.Z)(_,1)[0],C=function(){var n=(0,d.Z)((0,s.Z)().mark((function n(r){var t,i,o,a,c,d,u,l,p,x,f;return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=r.customer,i=r.paidAt,o=r.bePaidMoneyValue,a=t[0].node,c=a._id,d=a.staffAccountId,u=a.managerAccountId,l=a.directorAccountId,!e){n.next=11;break}return p={paidAt:new Date(i).toISOString(),customerAccountId:c,staffAccountId:d,managerAccountId:u,directorAccountId:l},x={discountPromotionId:e},n.next=7,N({variables:{data:p,where:x}});case 7:n.sent.data&&Z((0,I.mm)()),n.next=16;break;case 11:return f={paidAt:new Date(i).toISOString(),bePaidMoneyValue:Number(o),customerAccountId:c,staffAccountId:d,managerAccountId:u,directorAccountId:l},n.next=14,v({variables:{data:f}});case 14:n.sent.data&&Z((0,I.mm)());case 16:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return(0,y.jsxs)(E,{children:[(0,y.jsxs)(f.Z,{children:[(0,y.jsxs)(j,{children:[(0,y.jsx)(P,{children:"Kh\xe1ch h\xe0ng:"}),(0,y.jsx)(m.Z,{isSelectOne:!0,fieldName:"customer",errors:c,register:t,setValue:i,clearErrors:o})]}),(0,y.jsxs)(j,{children:[(0,y.jsx)(P,{children:"Ng\xe0y tr\u1ea3:"}),(0,y.jsx)(g.Z,{type:"datetime-local",name:"paidAt",register:t,validations:{required:!0},isError:!!c.paidAt})]}),!e&&(0,y.jsxs)(j,{children:[(0,y.jsx)(P,{children:"S\u1ed1 ti\u1ec1n:"}),(0,y.jsx)(g.Z,{type:"number",name:"bePaidMoneyValue",register:t,validations:{required:!0},isError:!!c.bePaidMoneyValue}),(0,y.jsx)("span",{style:{marginLeft:10},children:"\u0111"})]})]}),(0,y.jsx)(h.Z,{label:"X\xe1c nh\u1eadn",onClick:a(C)})]})}},2447:function(n,e,r){r.d(e,{Z:function(){return Q}});var t,i,o,a,c,s,d,u,l,p,x,f,h,g=r(885),m=r(7313),Z=r(3222),b=r(2669),v=r(6618),E=r(6881),j=r(6069),P=r(6524),T=r(6173),I=r(168),y=r(3115),_=r(1237),N=(y.ZP.div(t||(t=(0,I.Z)(["\n  padding: 0;\n  font-size: 12px;\n"]))),y.ZP.div(i||(i=(0,I.Z)(["\n  margin: 20px 0;\n  background-color: #fff;\n  padding: 15px 10px 10px;\n  box-shadow: 0px 2px 1px -1px rgb(0 0 0 / 20%),\n    0px 1px 1px 0px rgb(0 0 0 / 14%), 0px 1px 3px 0px rgb(0 0 0 / 12%);\n"]))),y.ZP.div(o||(o=(0,I.Z)([""]))),y.ZP.div(a||(a=(0,I.Z)(["\n  display: flex;\n  margin: 15px auto;\n  width: fit-content;\n  justify-content: center;\n  border: solid 1px ",";\n"])),_.Z.primary),y.ZP.div(c||(c=(0,I.Z)(["\n  padding: 5px 10px;\n  cursor: pointer;\n  text-align: center;\n  color: ",";\n  border-left: 1px solid ",";\n  background-color: ",";\n"])),(function(n){return n.activeColor.textColor}),(function(n){return n.borderLeftColor}),(function(n){return n.activeColor.backgroundColor})),y.ZP.div(s||(s=(0,I.Z)(["\n  position: relative;\n  background-color: #fff;\n  padding: 15px 10px 10px;\n  margin: ",";\n  cursor: ",";\n  box-shadow: 0px 2px 1px -1px rgb(0 0 0 / 20%),\n    0px 1px 1px 0px rgb(0 0 0 / 14%), 0px 1px 3px 0px rgb(0 0 0 / 12%);\n"])),(function(n){return n.customerMargin}),(function(n){return n.canApproveDiscountPromotion?"pointer":"auto"}))),C=y.ZP.div(d||(d=(0,I.Z)([""]))),A=(y.ZP.div(u||(u=(0,I.Z)(["\n  display: flex;\n  margin: 10px 0 5px;\n  align-items: center;\n  justify-content: space-between;\n"]))),y.ZP.span(l||(l=(0,I.Z)(["\n  font-size: 12px;\n  font-style: italic;\n  color: ",";\n"])),_.Z.secondary)),w=y.ZP.p(p||(p=(0,I.Z)(["\n  font-size: 12px;\n  width: fit-content;\n  font-style: italic;\n  color: ",";\n"])),_.Z.secondary),O=y.ZP.div(x||(x=(0,I.Z)(["\n  top: 0;\n  right: 10px;\n  color: #777;\n  font-size: 20px;\n  cursor: pointer;\n  width: fit-content;\n  position: absolute;\n"]))),k=y.ZP.div(f||(f=(0,I.Z)(["\n  top: 20px;\n  right: 10px;\n  padding: 5px 10px;\n  position: absolute;\n  border-radius: 5px;\n  background-color: #fff;\n  display: ",";\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n"])),(function(n){return n.display})),R=y.ZP.div(h||(h=(0,I.Z)(["\n  padding: 3px 5px;\n  font-size: 12px;\n  &:hover {\n    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n  }\n"]))),S=r(2153),M=r(3070),F=r(7119),V=r(6417),D=M.fH.MONEY_FIXED_VALUE,Y=M.fH.MONEY_PERCENT_OF_ORDER_VALUE,H=M.fH.MONEY_PERCENT_OF_DIFFERENCE_ORDER_VALUE,K=M.fH.MONEY_ORDER_QUANTITY,z=M.fH.MONEY_DIFFERENCE_ORDER_QUANTITY,L=M.fH.MONEY_ORDER_WEIGHT,U=M.fH.MONEY_DIFFERENCE_ORDER_WEIGHT,q=(0,m.lazy)((function(){return r.e(7471).then(r.bind(r,7471))})),G=function(n){var e,r=n.customerMargin,t=n.discountPromotionItem,i=(0,Z.I0)(),o=((0,Z.v9)((function(n){return n.authReducer})).viewerQuery||{}).permissions.includes(F.gz.CAN_APPROVE_DISCOUNT_PROMOTION),a=(0,m.useRef)(null),c=(0,m.useState)(!1),s=(0,g.Z)(c,2),d=s[0],u=s[1],l=d?"block":"none",p=t||{},x=p._id,f=(p.code,p.typeCode),h=p.startTime,I=p.endTime,y=p.title,_=p.conditions,G=p.detail,Q=p.payWhenCreateOrder,W=G.moneyMethodCode,X=G.products,B=G.value,J=G.giftDescription,$=G.paymentTypeCode,nn=f===M.t_.OTHER,en=(0,j.dh)(h),rn=(0,j.dh)(I),tn=y&&(null===(e=y[0])||void 0===e?void 0:e.showText),on=Q?"Tr\u1ea3 ngay khi \u0111\u1eb7t h\xe0ng":"Tr\u1ea3 sau",an=function(n,e){var r=1===n.length,t=function(){switch(e){case M.rh.MONEY_ACHIEVE_TYPE:return"\u0111";case M.rh.QUANTITY_ACHIEVE_TYPE:return"sp";case M.rh.WEIGHT_ACHIEVE_TYPE:return"".concat(n[0].netUnitValue).concat(n[0].unitString)}}(),i=function(n,e){var i=n.minRequireValue,o=(n.productInfo||{}).name;r||"".concat(e+1,". ");return(0,V.jsxs)("p",{children:[(0,V.jsx)(A,{children:"- Khi mua"})," ",(0,E.Z)(o)," - S\u1ed1 l\u01b0\u1ee3ng: \u2265 ",i," (",t,")"," "]})};return n.map((function(n,e){return(0,V.jsx)(m.Fragment,{children:i(n,e)},e)}))},cn=(0,V.jsx)(V.Fragment,{children:_.map((function(n,e){var r=n.products,t=n.productConditionType,i=n.minTotalRequireValue,o=(0,j.RX)(t,r[0].netUnitValue,r[0].unitString);return(0,V.jsxs)(m.Fragment,{children:[an(r,t),(0,V.jsxs)("p",{children:["T\u1ed5ng ",o.type," c\u1ea7n \u0111\u1ea1t: ",i," ",o.unit]}),(0,V.jsx)("hr",{})]},e)}))}),sn=(0,V.jsx)(V.Fragment,{children:function(){var n=[D,Y,H,K,z,L,U];switch($){case M.ad.MONEY_TYPE:var e=n.find((function(n){return n.value===W}));return"T\u1eb7ng/CKKM: ".concat(function(n){if(n.value===D.value)return"Ti\u1ec1n m\u1eb7t ".concat(B.toLocaleString()," \u0111");var e=n.value.includes("percent_of")?"%":"\u0111";return"Ti\u1ec1n = ".concat(B.toLocaleString()).concat(e)+n.label.slice(12)}(e));case M.ad.GIFT_TYPE:return"T\u1eb7ng/CKKM: ".concat(J," tr\u1ecb gi\xe1 ").concat(B.toLocaleString()," \u0111");case M.ad.TAX_OFFSET:return"C\u1ea5n tr\u1eeb: ".concat(J," ").concat(B.toLocaleString()," \u0111");case M.ad.PRODUCT_TYPE:return function(n){var e=1===n.length,r=function(n,r){var t,i=n.code,o=n.quantity,a=(n.productInfo||{}).name,c=e?"T\u1eb7ng/CKKM:":"".concat(r+1,". ");return(0,V.jsxs)("p",{children:[c,"T\u1eb7ng ",o," ",i," - ",a&&(null===(t=a[0])||void 0===t?void 0:t.showText)]})};return(0,V.jsxs)(V.Fragment,{children:[!e&&(0,V.jsx)("p",{children:"T\u1eb7ng/CKKM:"}),n.map((function(n,e){return(0,V.jsx)(m.Fragment,{children:r(n,e)},e)}))]})}(X);default:return null}}()}),dn=(0,V.jsx)(k,{display:l,ref:a,children:(0,V.jsx)(R,{onClick:function(){var n={title:"Tr\u1ea3 CK/KM cho ch\u01b0\u01a1ng tr\xecnh d\u1ea1ng kh\xe1c",children:(0,V.jsx)(m.Suspense,{fallback:(0,V.jsx)(T.default,{}),children:(0,V.jsx)(P.default,{discountPromotionId:x})})};i((0,S.dn)(n))},children:"Tr\u1ea3 CK/KM"})}),un=(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(O,{onClick:function(){return u(!d)},children:(0,V.jsx)(v.Z,{})}),dn]});return(0,m.useEffect)((function(){var n=function(n){a.current&&!a.current.contains(n.target)&&u(!1)};return document.addEventListener("mousedown",n),function(){document.removeEventListener("mousedown",n)}}),[a]),(0,V.jsxs)(N,{customerMargin:r,canApproveDiscountPromotion:o,children:[nn&&un,(0,V.jsxs)(C,{onClick:function(){if(o){var n={title:"Chi ti\u1ebft chi\u1ebft kh\u1ea5u/khuy\u1ebfn m\u1ea1i",children:(0,V.jsx)(m.Suspense,{fallback:(0,V.jsx)(T.default,{}),children:(0,V.jsx)(q,{discountPromotionItem:t})})};i((0,S.FV)(n))}},children:[(0,V.jsxs)(b.Z,{fontSize:12,fontWeight:700,children:[en," - ",rn,": ",tn]}),cn,sn,(0,V.jsx)(w,{children:on})]})]})};G.defaultProps={customerMargin:"15px 10px"};var Q=G},5222:function(n,e,r){r.d(e,{Z:function(){return f}});var t,i,o,a=r(1413),c=(r(7313),r(168)),s=r(3115),d=r(1237),u=s.ZP.div(t||(t=(0,c.Z)(["\n  position: relative;\n"]))),l=s.ZP.div(i||(i=(0,c.Z)(["\n  font-weight: 600;\n  margin: 0 0 3px;\n  color: ",";\n  text-transform: uppercase;\n"])),d.Z.goosefeatherGray),p=s.ZP.div(o||(o=(0,c.Z)(["\n  padding: 10px;\n  margin: 0 0 20px;\n  background-color: #fff;\n  box-shadow: 0px 2px 1px -1px rgb(0 0 0 / 20%),\n    0px 1px 1px 0px rgb(0 0 0 / 14%), 0px 1px 3px 0px rgb(0 0 0 / 12%);\n"]))),x=r(6417),f=function(n){var e=n.title,r=n.children;return(0,x.jsxs)(u,(0,a.Z)((0,a.Z)({},n),{},{children:[(0,x.jsx)(l,{children:e}),(0,x.jsx)(p,{children:r})]}))}},6233:function(n,e,r){r.d(e,{Z:function(){return u}});r(7313);var t,i=r(1839),o=r(168),a=r(3115).ZP.div(t||(t=(0,o.Z)(["\n  width: 100%;\n"]))),c=r(7123),s=r(6417),d=function(n){var e=n.isSelectOne,r=n.fieldName,t=n.errors,o=n.register,d=n.setValue,u=n.clearErrors;return(0,s.jsx)(a,{children:(0,s.jsx)(i.Z,{isSelectOne:e,searchGuide:"Nh\u1eadp t\xean/s\u1ed1 \u0111i\u1ec7n tho\u1ea1i \u0111\u1ec3 t\xecm ki\u1ebfm...",searchPlaceholder:"Nh\u1eadp t\xean/s\u1ed1 \u0111i\u1ec7n tho\u1ea1i \u0111\u1ec3 t\xecm ki\u1ebfm...",checkIsDisabledAttribute:"node.phoneNumber",searchQueryStatement:c.Eu,searchQueryPathName:"searchAccounts",resultItemAttributes:["node.fullName","node.address","node.phoneNumber"],selectedItemAttributes:["node.fullName","node.phoneNumber"],fieldName:r,register:o,setFieldValue:d,clearFormErrors:u,validations:{required:!0},isError:!!t[r]})})};d.defaultProps={isSelectOne:!1,fieldName:"fieldName",errors:{},register:function(){},setValue:function(){},clearErrors:function(){}};var u=d}}]);