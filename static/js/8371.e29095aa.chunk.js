"use strict";(self.webpackChunkproject_g5=self.webpackChunkproject_g5||[]).push([[8371],{8371:function(e,n,r){r.r(n),r.d(n,{default:function(){return Y}});var i,t,o,d,a,s,l,c,u,p,h,x,m=r(4165),f=r(1413),g=r(5861),v=r(885),Z=r(7313),C=r(3222),j=r(2668),b=r(790),N=r(5627),w=r(1359),y=r(6881),I=r(1677),E=r(5222),O=r(9673),P=r(9146),k=r(3182),A=r(6947),T=r(7532),q=r(7930),S=r(7123),B=r(3454),G=r(2153),H=r(5164),V=r(168),D=r(3115),L=r(1237),_=D.ZP.div(i||(i=(0,V.Z)(["\n  font-size: 12px;\n  padding: 10px 5px 120px;\n"]))),z=D.ZP.div(t||(t=(0,V.Z)(["\n  width: 100%;\n  display: flex;\n  position: relative;\n  align-items: center;\n  margin: ",";\n"])),(function(e){return e.margin||"10px 20px 15px 0"})),M=D.ZP.div(o||(o=(0,V.Z)(["\n  display: flex;\n  margin: 10px 0;\n  align-items: center;\n  justify-content: space-between;\n"]))),R=(D.ZP.span(d||(d=(0,V.Z)(["\n  font-weight: 700;\n"]))),D.ZP.p(a||(a=(0,V.Z)(["\n  width: ",";\n"])),(function(e){return e.width}))),$=D.ZP.p(s||(s=(0,V.Z)(["\n  font-weight: 700;\n"]))),Q=(D.ZP.p(l||(l=(0,V.Z)(["\n  margin: 0 0 20px;\n  font-style: italic;\n  color: ",";\n"])),L.Z.lightRed),D.ZP.div(c||(c=(0,V.Z)(["\n  width: 100%;\n  display: flex;\n  align-items: center;\n  margin: 10px 20px 15px 0;\n  @media (max-width: 991px) {\n    display: block;\n  }\n"])))),U=D.ZP.input(u||(u=(0,V.Z)(["\n  width: 49%;\n  border: none;\n  padding: 2px 5px;\n  margin: 5px 0 0 0;\n  line-height: 20px;\n  background-color: ",";\n  border-bottom: 1px solid ",";\n  &:hover {\n    box-shadow: none;\n  }\n  &:focus {\n    box-shadow: none;\n  }\n  &:focus-visible {\n    outline: none;\n    box-shadow: none;\n  }\n"])),L.Z.lightWhite,L.Z.secondary),F=D.ZP.p(p||(p=(0,V.Z)(["\n  margin: 5px 0;\n  font-size: 10px;\n  font-weight: 500;\n  color: ",";\n"])),L.Z.lightBlack),W=D.ZP.div(h||(h=(0,V.Z)(["\n  top: 31px;\n  position: absolute;\n"]))),X=D.ZP.div(x||(x=(0,V.Z)(["\n  width: 100%;\n  margin: 5px 10px 10px;\n  @media (max-width: 991px) {\n    margin: 5px 0 10px;\n  }\n"]))),J=r(6417),K=function(e){var n,r=e.leadItem,i=e.initCommunes,t=e.initDistricts,o=r||{},d=o._id,a=o.idCode,s=o.fullName,l=o.phoneNumber,c=o.dateOfBirth,u=o.provinceCode,p=o.districtCode,h=o.communeCode,x=o.addressNote,V=o.leadGroupCode,D=o.leadTypeCode,L=o.avatarImage,K=o.saleStaffInfo,Y=(0,N.cI)({defaultValues:{idCode:a,fullName:s,phoneNumber:l,dateOfBirth:c,provinceCode:u,districtCode:p,communeCode:h,addressNote:x,leadGroupCode:V,leadTypeCode:D,staffAccount:K}}),ee=Y.watch,ne=Y.register,re=Y.setValue,ie=(Y.setError,Y.clearErrors),te=Y.handleSubmit,oe=Y.formState.errors;ne("dateOfBirth",{required:!0}),ne("staffAccount",{required:!0});var de=(0,C.I0)(),ae=(0,Z.useRef)(null),se=ee("provinceCode"),le=ee("districtCode"),ce=(0,Z.useState)(L),ue=(0,v.Z)(ce,2),pe=ue[0],he=ue[1],xe=(0,Z.useState)(K),me=(0,v.Z)(xe,2),fe=me[0],ge=me[1],ve=(0,Z.useState)(c),Ze=(0,v.Z)(ve,2),Ce=Ze[0],je=Ze[1];ne("avatarImage",{required:!pe});var be=fe?(0,J.jsxs)(M,{style:{width:"100%"},children:[(0,J.jsxs)($,{children:[fe.fullName," - ",fe.phoneNumber]}),(0,J.jsx)(I.Z,{label:"\u0110\u1ed5i",onClick:function(){ge(void 0),re("staffAccount",void 0)}})]}):(0,J.jsx)(w.Z,{isSelectOne:!0,notBeCustomer:!0,notEmptyManager:!0,isError:!!oe.staffAccount,onClickSelectResultItem:function(e){ie("staffAccount"),ge(e.node),re("staffAccount",e.node)}}),Ne=(0,j.a)(S.hz,{variables:{where:{provinceCode:se}},skip:!se||t}).data,we=(0,j.a)(S.j5,{variables:{where:{districtCode:le}},skip:!le||i}).data,ye=(null===we||void 0===we?void 0:we.vnCommunesByDistrict)||i||[],Ie=(null===Ne||void 0===Ne||null===(n=Ne.vnProvinceByCode)||void 0===n?void 0:n.districts)||t||[],Ee=(0,j.a)(S.hc).data,Oe=(null===Ee||void 0===Ee?void 0:Ee.leadGroups)||[],Pe=function(e){return null===e||void 0===e?void 0:e.code},ke=function(e){return(0,y.Z)(null===e||void 0===e?void 0:e.label)},Ae=(0,J.jsx)(k.Z,{name:"provinceCode",register:ne,margin:"5px 0 10px 0",placeholder:"T\u1ec9nh/Th\xe0nh",validations:{required:!0},isError:!!oe.provinceCode,getOptionValue:Pe,options:q.ZP.provinces}),Te=(0,J.jsx)(X,{children:(0,J.jsx)(k.Z,{margin:"0",name:"districtCode",register:ne,options:Ie,placeholder:"Qu\u1eadn/Huy\u1ec7n",validations:{required:!0},isError:!!oe.districtCode,getOptionLabel:ke,getOptionValue:Pe,isDisabled:!se})}),qe=(0,J.jsx)(k.Z,{name:"communeCode",options:ye,register:ne,margin:"5px 0 10px 0",placeholder:"X\xe3/Ph\u01b0\u1eddng",isError:!!oe.communeCode,validations:{required:!0},getOptionLabel:ke,getOptionValue:Pe,isDisabled:!le}),Se=(0,J.jsxs)(Q,{children:[Ae,Te,qe]}),Be=(0,b.D)(B.$E,{onError:function(){setTimeout((function(){de((0,H.S4)())}),500);var e={title:"L\u1ed7i",children:(0,J.jsx)("p",{children:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i tr\xf9ng v\u1edbi m\u1ed9t lead c\xf3 trong danh s\xe1ch. Vui l\xf2ng li\xean h\u1ec7 qu\u1ea3n tr\u1ecb h\u1ec7 th\u1ed1ng!"})};de((0,G.om)(e))},refetchQueries:[{query:S.q6},"GET_ACCOUNTS"]}),Ge=(0,v.Z)(Be,1)[0],He=function(){var e=(0,g.Z)((0,m.Z)().mark((function e(n){var r,i,t,o,g,v,Z,C,j,b,N,w,y,I,E,O,P,k,A,T;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.idCode,i=n.fullName,t=n.phoneNumber,o=n.dateOfBirth,g=n.provinceCode,v=n.districtCode,Z=n.communeCode,C=n.addressNote,j=n.leadGroupCode,b=n.leadTypeCode,N=n.staffAccount,y=(w=N||{})._id,I=w.managerAccountId,E=w.directorAccountId,O=(K||{})._id,P=O!==y,k=pe!==L,A=(0,f.Z)((0,f.Z)((0,f.Z)((0,f.Z)((0,f.Z)((0,f.Z)((0,f.Z)((0,f.Z)((0,f.Z)((0,f.Z)((0,f.Z)((0,f.Z)({},r.trim()!==a&&{idCode:r}),i.trim()!==s&&{fullName:i}),t.trim()!==l&&{phoneNumber:t}),o!==c&&{dateOfBirth:o}),g!==u&&{provinceCode:g}),v!==p&&{districtCode:v}),Z!==h&&{communeCode:Z}),C.trim()!==x&&{addressNote:C}),j!==V&&{leadGroupCode:j}),b!==D&&{leadTypeCode:b}),k&&{avatarImage:pe}),P&&{staffAccountId:y,managerAccountId:I,directorAccountId:E}),!!!Object.keys(A).length){e.next=13;break}return de((0,H.S$)()),e.next=11,Ge({variables:{data:A,where:{accountId:d}}});case 11:e.sent.data&&(T={title:"C\u1eadp nh\u1eadt lead",children:(0,J.jsx)("p",{children:"C\u1eadp nh\u1eadt lead th\xe0nh c\xf4ng!"})},de((0,H.S4)()),de((0,G.om)(T)),de((0,G.Ay)()));case 13:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,J.jsxs)(_,{children:[(0,J.jsx)(F,{children:"TH\xd4NG TIN"}),(0,J.jsxs)(E.Z,{children:[(0,J.jsxs)(z,{children:[(0,J.jsx)(O.Z,{name:"fullName",register:ne,margin:"5px 10px 0 0",isError:!!oe.fullName,validations:{required:!0},placeholder:"H\u1ecd t\xean"}),(0,J.jsx)(O.Z,{name:"phoneNumber",register:ne,isError:!!oe.phoneNumber,validations:{required:!0,pattern:{value:/^[0-9]{10}$/}},margin:"5px 0 0 5px",placeholder:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i",errorMessage:"*Ch\u1ec9 g\u1ed3m 10 s\u1ed1"})]}),(0,J.jsxs)(z,{children:[(0,J.jsx)(U,{name:"dateOfBirth",ref:ae,placeholder:"Ng\xe0y sinh",value:Ce,onBlur:function(){return!Ce&&(ae.current.type="text")},onFocus:function(){return ae.current.type="date"},onChange:function(e){je(e.target.value),re("dateOfBirth",e.target.value)}}),(0,J.jsx)(O.Z,{width:"50%",name:"idCode",register:ne,margin:"6px 0 0 15px",placeholder:"M\xe3 lead",isError:!!oe.idCode,validations:{required:!0}}),(0,J.jsx)(W,{children:(0,J.jsx)(A.Z,{isError:!!oe.dateOfBirth})})]}),(0,J.jsxs)(z,{margin:"0",children:[(0,J.jsx)(R,{width:"70px",children:"Ph\u1ee5 tr\xe1ch:"}),"\u2002",be]})]}),(0,J.jsx)(F,{children:"\u0110\u1ecaA CH\u1ec8"}),(0,J.jsxs)(E.Z,{children:[Se,(0,J.jsx)(z,{children:(0,J.jsx)(O.Z,{margin:" 0",name:"addressNote",register:ne,placeholder:"Ghi ch\xfa \u0111\u1ecba ch\u1ec9",isError:!!oe.addressNote})})]}),(0,J.jsx)(F,{children:"NH\xd3M/LO\u1ea0I"}),(0,J.jsx)(E.Z,{children:(0,J.jsxs)(z,{children:[(0,J.jsx)(k.Z,{name:"leadGroupCode",register:ne,margin:"5px 10px 0 0",placeholder:"Nh\xf3m Lead",options:Oe,validations:{required:!0},isError:!!oe.leadGroupCode,getOptionValue:function(e){return null===e||void 0===e?void 0:e.groupCode}}),(0,J.jsx)(k.Z,{name:"leadTypeCode",placeholder:"Lo\u1ea1i",register:ne,margin:"5px 0 0 5px",options:[{label:"Trang tr\u1ea1i",value:"farm"},{label:"\u0110\u1ea1i l\xfd",value:"agency"}],validations:{required:!0},isError:!!oe.leadTypeCode})]})}),(0,J.jsx)(F,{children:"\u1ea2NH \u0110\u1ea0I DI\u1ec6N"}),(0,J.jsxs)(E.Z,{children:[(0,J.jsx)("p",{children:"\u1ea2nh \u0111\u1ea1i di\u1ec7n"}),(0,J.jsx)(A.Z,{isError:!!oe.avatarImage&&!pe}),(0,J.jsx)(z,{children:(0,J.jsx)(T.Z,{padding:"0",initImage:pe,setResizedImageUri:he})})]}),(0,J.jsx)(P.default,{label:"C\u1eacP NH\u1eacT",onClick:te(He)})]})};K.defaultProps={};var Y=K}}]);