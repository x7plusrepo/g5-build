"use strict";(self.webpackChunkproject_g5=self.webpackChunkproject_g5||[]).push([[2447],{2447:function(n,e,t){t.d(e,{Z:function(){return Tn}});var r,i,o,c,a,s,u,d,l,p,x,f,h,g,Z,m,v,E,j,T,_,P,C=t(885),O=t(4165),b=t(5861),y=t(7313),I=t(3222),R=t(790),w=t(3511),N=t(6618),M=t(6524),k=t(6173),D=t(4214),F=t(1677),S=t(2262),A=t(6881),Y=t(6069),K=t(168),U=t(3115),H=t(1237),L=(U.ZP.div(r||(r=(0,K.Z)(["\n  padding: 0;\n  font-size: 12px;\n"]))),U.ZP.div(i||(i=(0,K.Z)(["\n  margin: 20px 0;\n  background-color: #fff;\n  padding: 15px 10px 10px;\n  box-shadow: 0px 2px 1px -1px rgb(0 0 0 / 20%),\n    0px 1px 1px 0px rgb(0 0 0 / 14%), 0px 1px 3px 0px rgb(0 0 0 / 12%);\n"]))),U.ZP.div(o||(o=(0,K.Z)([""]))),U.ZP.div(c||(c=(0,K.Z)(["\n  display: flex;\n  margin: 15px auto;\n  width: fit-content;\n  justify-content: center;\n  border: solid 1px ",";\n"])),H.Z.primary),U.ZP.div(a||(a=(0,K.Z)(["\n  padding: 5px 10px;\n  cursor: pointer;\n  text-align: center;\n  color: ",";\n  border-left: 1px solid ",";\n  background-color: ",";\n"])),(function(n){return n.activeColor.textColor}),(function(n){return n.borderLeftColor}),(function(n){return n.activeColor.backgroundColor})),U.ZP.div(s||(s=(0,K.Z)(["\n  position: relative;\n  background-color: #fff;\n  padding: 15px 10px 10px;\n  margin: ",";\n  cursor: ",";\n  box-shadow: 0px 2px 1px -1px rgb(0 0 0 / 20%),\n    0px 1px 1px 0px rgb(0 0 0 / 14%), 0px 1px 3px 0px rgb(0 0 0 / 12%);\n"])),(function(n){return n.customerMargin}),(function(n){return n.canApproveDiscountPromotion?"pointer":"auto"}))),V=U.ZP.div(u||(u=(0,K.Z)([""]))),G=(U.ZP.div(d||(d=(0,K.Z)(["\n  display: flex;\n  margin: 10px 0 5px;\n  align-items: center;\n  justify-content: space-between;\n"]))),U.ZP.div(l||(l=(0,K.Z)(["\n  margin: 5px 0 15px;\n"])))),z=U.ZP.div(p||(p=(0,K.Z)(["\n  margin: 0 0 15px;\n"]))),q=U.ZP.p(x||(x=(0,K.Z)(["\n  font-weight: 700;\n  color: ",";\n"])),H.Z.primary),Q=U.ZP.p(f||(f=(0,K.Z)(["\n  font-weight: 700;\n"]))),X=U.ZP.span(h||(h=(0,K.Z)(["\n  font-weight: 500;\n"]))),W=U.ZP.span(g||(g=(0,K.Z)(["\n  font-weight: 700;\n"]))),B=U.ZP.span(Z||(Z=(0,K.Z)(["\n  font-weight: 500;\n  font-style: italic;\n  color: ",";\n"])),H.Z.black),J=U.ZP.span(m||(m=(0,K.Z)(["\n  font-size: 12px;\n  font-style: italic;\n  color: ",";\n"])),H.Z.secondary),$=U.ZP.p(v||(v=(0,K.Z)(["\n  margin: 5px 0 0;\n  font-size: 12px;\n  width: fit-content;\n  font-style: italic;\n  color: ",";\n"])),H.Z.primary),nn=U.ZP.div(E||(E=(0,K.Z)(["\n  display: flex;\n  algin-items: center;\n  justify-content: space-between;\n"]))),en=U.ZP.div(j||(j=(0,K.Z)(["\n  bottom: 5px;\n  position: absolute;\n  right: ",";\n"])),(function(n){return n.right})),tn=U.ZP.div(T||(T=(0,K.Z)(["\n  top: 0;\n  right: 10px;\n  color: #777;\n  font-size: 20px;\n  cursor: pointer;\n  width: fit-content;\n  position: absolute;\n"]))),rn=U.ZP.div(_||(_=(0,K.Z)(["\n  top: 20px;\n  right: 10px;\n  padding: 5px 10px;\n  position: absolute;\n  border-radius: 5px;\n  background-color: #fff;\n  display: ",";\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n"])),(function(n){return n.display})),on=U.ZP.div(P||(P=(0,K.Z)(["\n  padding: 3px 5px;\n  font-size: 12px;\n  &:hover {\n    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n  }\n"]))),cn=t(2153),an=t(7123),sn=t(3454),un=t(3070),dn=t(7119),ln=t(6417),pn=un.fH.MONEY_FIXED_VALUE,xn=un.fH.MONEY_PERCENT_OF_ORDER_VALUE,fn=un.fH.MONEY_PERCENT_OF_DIFFERENCE_ORDER_VALUE,hn=un.fH.MONEY_ORDER_QUANTITY,gn=un.fH.MONEY_DIFFERENCE_ORDER_QUANTITY,Zn=un.fH.MONEY_ORDER_WEIGHT,mn=un.fH.MONEY_DIFFERENCE_ORDER_WEIGHT,vn=(0,y.lazy)((function(){return t.e(7471).then(t.bind(t,7471))})),En=function(n){var e=n.message,t=n.updateFunction,r=(0,I.I0)(),i=function(){var n=(0,b.Z)((0,O.Z)().mark((function n(){return(0,O.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t();case 2:n.sent.data&&r((0,cn._w)());case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,ln.jsxs)(ln.Fragment,{children:[(0,ln.jsx)("p",{style:{margin:10},children:e}),(0,ln.jsxs)("div",{style:{display:"flex",width:"100%",justifyContent:"center"},children:[(0,ln.jsx)(S.Z,{label:"\u0110\xf3ng l\u1ea1i",onClick:function(){return r((0,cn._w)())}}),(0,ln.jsx)(D.Z,{label:"X\xe1c nh\u1eadn",onClick:i})]})]})},jn=function(n){var e,t=n.customerMargin,r=n.discountPromotionItem,i=(0,I.I0)(),o=(0,I.v9)((function(n){return n.authReducer})).viewerQuery,c=(0,I.v9)((function(n){return n.firstSubModalReducer})).visible,a=(o||{}).permissions,s=a.includes(dn.gz.CAN_APPROVE_DISCOUNT_PROMOTION),u=a.includes(dn.gz.CAN_DELETE_DISCOUNT_PROMOTION),d=(0,y.useRef)(null),l=(0,y.useState)(!1),p=(0,C.Z)(l,2),x=p[0],f=p[1],h=x?"block":"none",g=r||{},Z=g._id,m=(g.code,g.typeCode),v=g.startTime,E=g.endTime,j=g.title,T=g.conditions,_=g.detail,P=g.isApproved,S=g.payWhenCreateOrder,K=g.isBuyAnyProductOfConditions,U=g.createdAt,H=_.moneyMethodCode,jn=_.products,Tn=_.value,_n=_.giftDescription,Pn=_.paymentTypeCode,Cn=(0,w.Z)(new Date,new Date(U))<=1,On=u&&Cn,bn=(0,R.D)(sn.GG,{refetchQueries:[{query:an.Kr},"GET_DISCOUNT_PROMOTIONS",{query:an.hM},"GET_DISCOUNT_PROMOTION_DIARIES"]}),yn=(0,C.Z)(bn,1)[0],In=(0,R.D)(sn.dF,{refetchQueries:[{query:an.Kr},"GET_DISCOUNT_PROMOTIONS",{query:an.hM},"GET_DISCOUNT_PROMOTION_DIARIES"]}),Rn=(0,C.Z)(In,1)[0],wn=m===un.t_.OTHER,Nn=K?"Khi mua B\u1ea5t k\u1ef3 S\u1ea3n ph\u1ea9m":"Khi mua \u0110\u1ed3ng th\u1eddi S\u1ea3n ph\u1ea9m",Mn=(0,Y.dh)(v),kn=(0,Y.dh)(E),Dn=j&&(null===(e=j[0])||void 0===e?void 0:e.showText),Fn=S?"Tr\u1ea3 ngay khi \u0111\u1eb7t h\xe0ng":"Tr\u1ea3 sau",Sn=function(n,e){var t=1===n.length,r=(function(){switch(e){case un.rh.MONEY_ACHIEVE_TYPE:return"\u0111";case un.rh.QUANTITY_ACHIEVE_TYPE:return"sp";case un.rh.WEIGHT_ACHIEVE_TYPE:"".concat(n[0].netUnitValue).concat(n[0].unitString)}}(),function(n,e){var r=n.code,i=(n.minRequireValue,(n.productInfo||{}).name);t||"".concat(e+1,". ");return(0,ln.jsxs)("p",{children:["- ",r," - ",(0,A.Z)(i)]})});return(0,ln.jsx)(ln.Fragment,{children:n.map((function(n,e){return(0,ln.jsx)(y.Fragment,{children:r(n,e)},e)}))})},An=(0,ln.jsxs)(ln.Fragment,{children:[(0,ln.jsx)(G,{children:(0,ln.jsxs)(Q,{children:["\u0110i\u1ec1u ki\u1ec7n:"," ",T&&!!T.length&&(0,ln.jsx)(X,{children:Nn})]})}),T&&T.map((function(n,e){var t=n.products,r=n.productConditionType,i=n.minTotalRequireValue,o=(0,Y.RX)(r,t[0].netUnitValue,t[0].unitString);return(0,ln.jsxs)(z,{children:[Sn(t,r),(0,ln.jsxs)("p",{children:["T\u1ed5ng ",o.type," c\u1ea7n \u0111\u1ea1t: ",i," ",o.unit]})]},e)}))]}),Yn=(0,ln.jsxs)(ln.Fragment,{children:[(0,ln.jsx)("hr",{})," ",function(){var n=[pn,xn,fn,hn,gn,Zn,mn];switch(Pn){case un.ad.MONEY_TYPE:var e=n.find((function(n){return n.value===H}));return(0,ln.jsxs)(ln.Fragment,{children:[(0,ln.jsx)(W,{children:"T\u1eb7ng/CKKM:"}),(0,ln.jsx)("p",{children:function(n){if(n.value===pn.value)return"Ti\u1ec1n m\u1eb7t ".concat(Tn.toLocaleString()," \u0111");var e=n.value.includes("percent_of")?"%":"\u0111";return"Ti\u1ec1n = ".concat(Tn.toLocaleString()).concat(e)+n.label.slice(12)}(e)})]});case un.ad.GIFT_TYPE:return(0,ln.jsxs)(ln.Fragment,{children:[(0,ln.jsx)(W,{children:"T\u1eb7ng/CKKM:"}),(0,ln.jsxs)("p",{children:[_n," tr\u1ecb gi\xe1 ",Tn.toLocaleString()," \u0111"]})]});case un.ad.TAX_OFFSET:return"C\u1ea5n tr\u1eeb: ".concat(_n," ").concat(Tn.toLocaleString()," \u0111");case un.ad.PRODUCT_TYPE:return function(n){var e=function(n,e){var t=n.code,r=n.quantity,i=(n.productInfo||{}).name;return(0,ln.jsxs)("p",{children:[(0,ln.jsx)(J,{children:"- T\u1eb7ng"})," ",r," ",t," - ",(0,A.Z)(i)]})};return(0,ln.jsxs)(ln.Fragment,{children:[(0,ln.jsx)(W,{children:"T\u1eb7ng/CKKM:"}),n.map((function(n,t){return(0,ln.jsx)(y.Fragment,{children:e(n)},t)}))]})}(jn);default:return null}}()]}),Kn=(0,ln.jsx)(rn,{display:h,ref:d,children:(0,ln.jsx)(on,{onClick:function(){var n={title:"Tr\u1ea3 CK/KM cho ch\u01b0\u01a1ng tr\xecnh d\u1ea1ng kh\xe1c",children:(0,ln.jsx)(y.Suspense,{fallback:(0,ln.jsx)(k.default,{}),children:(0,ln.jsx)(M.default,{discountPromotionId:Z})})};i((0,cn.dn)(n))},children:"Tr\u1ea3 CK/KM"})}),Un=(0,ln.jsxs)(ln.Fragment,{children:[(0,ln.jsx)(tn,{onClick:function(){return f(!x)},children:(0,ln.jsx)(N.Z,{})}),Kn]});return(0,y.useEffect)((function(){var n=function(n){d.current&&!d.current.contains(n.target)&&f(!1)};return document.addEventListener("mousedown",n),function(){document.removeEventListener("mousedown",n)}}),[d]),(0,ln.jsxs)(L,{customerMargin:t,canApproveDiscountPromotion:s,children:[wn&&Un,(0,ln.jsxs)(V,{onClick:function(){if(s){var n={title:"Chi ti\u1ebft chi\u1ebft kh\u1ea5u/khuy\u1ebfn m\u1ea1i",children:(0,ln.jsx)(y.Suspense,{fallback:(0,ln.jsx)(k.default,{}),children:(0,ln.jsx)(vn,{discountPromotionItem:r})})};i((0,cn.FV)(n))}},children:[(0,ln.jsxs)(nn,{children:[(0,ln.jsxs)(q,{children:[Mn," - ",kn,":"," ",(0,ln.jsx)(B,{children:Dn})]}),!P&&(0,ln.jsx)(J,{children:"Ch\u1edd duy\u1ec7t"})]}),An,Yn,(0,ln.jsx)(nn,{children:(0,ln.jsx)($,{children:Fn})})]}),!P&&!c&&(0,ln.jsx)(en,{right:On?"50px":"5px",children:(0,ln.jsx)(F.Z,{label:"Duy\u1ec7t",onClick:function(){yn({variables:{data:{isApproved:!0},where:{discountPromotionId:Z}}})}})}),On&&(0,ln.jsx)(en,{right:"5px",children:(0,ln.jsx)(D.Z,{label:"Xo\xe1",onClick:function(){var n={discountPromotionId:Z},e={title:"X\xe1c nh\u1eadn xo\xe1",children:(0,ln.jsx)(En,{message:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn duy\u1ec7t xo\xe1 CKKM n\xe0y?",updateFunction:(0,b.Z)((0,O.Z)().mark((function e(){var t;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rn({variables:{where:n}});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))})};i((0,cn.om)(e))}})})]})};jn.defaultProps={customerMargin:"15px 10px"};var Tn=jn},6881:function(n,e,t){var r=t(2163);e.Z=function(n){if(Array.isArray(n)){var e,t=n||[],i=r.t.getState().commonReducer,o=i&&(null===(e=i.activeLanguage)||void 0===e?void 0:e.locale)||"vi";return(t.find((function(n){return n&&n.locale===o}))||{}).showText||""}return""}}}]);