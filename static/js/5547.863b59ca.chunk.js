"use strict";(self.webpackChunkproject_g5=self.webpackChunkproject_g5||[]).push([[5547],{2399:function(n,e,t){t.d(e,{Z:function(){return g}});var r,i,o=t(1413),a=(t(7313),t(2180)),d=t(6947),s=t(168),c=t(3115),p=t(1237),u=c.ZP.div(r||(r=(0,s.Z)(["\n  width: 100%;\n  margin: 5px 0 0 0;\n"]))),l=c.ZP.textarea(i||(i=(0,s.Z)(["\n  width: 100%;\n  border: none;\n  padding: 5px;\n  font-size: 12px;\n  font-weight: 300;\n  background-color: ",";\n  border-bottom: 1px solid ",";\n  font-style: ",";\n  text-align: ",";\n  &:hover {\n    box-shadow: none;\n  }\n  &:focus {\n    box-shadow: none;\n  }\n  &:focus-visible {\n    outline: none;\n    box-shadow: none;\n  }\n"])),p.Z.lightWhite,p.Z.secondary,(function(n){return n.fontStyle?n.fontStyle:""}),(function(n){return n.textAlign?n.textAlign:"left"})),x=t(6417),f=function(n){var e=n.label,t=n.name,r=n.isError,i=n.errorMessage,s=n.register,c=n.validations;return(0,x.jsxs)(u,{children:[e&&(0,x.jsx)(a.Z,{label:e}),(0,x.jsx)(l,(0,o.Z)((0,o.Z)({},s(t,c)),n)),(0,x.jsx)(d.Z,{isError:r,errorMessage:i})]})};f.defaultProps={type:"text",validations:{},register:function(){}};var g=f},5547:function(n,e,t){t.r(e),t.d(e,{default:function(){return Zn}});var r,i,o,a,d,s,c,p,u,l,x,f,g,h,Z,m,b,v,y,j,P,w,C,S,k,D=t(4165),E=t(5987),I=t(5861),_=t(2982),R=t(1413),q=t(885),N=t(7313),O=t(3222),T=t(5627),z=t(790),U=t(5414),A=t(1359),M=t(6069),V=t(6881),B=(t(6879),t(1677)),G=t(2262),L=(t(1300),t(9673)),Q=(t(6323),t(2323)),W=t(9146),X=t(2399),H=t(168),Y=t(3115),F=t(1237),$=Y.ZP.div(r||(r=(0,H.Z)(["\n  font-size: 12px;\n  padding: 10px 0 120px;\n  background-color: ",";\n"])),F.Z.bgGray),J=Y.ZP.div(i||(i=(0,H.Z)(["\n  margin: 20px 0;\n  background-color: #fff;\n  padding: 15px 10px 10px;\n  box-shadow: 0px 2px 1px -1px rgb(0 0 0 / 20%),\n    0px 1px 1px 0px rgb(0 0 0 / 14%), 0px 1px 3px 0px rgb(0 0 0 / 12%);\n"]))),K=Y.ZP.p(o||(o=(0,H.Z)(["\n  width: 90px;\n  font-size: 12px;\n  max-width: 200px;\n"]))),nn=(Y.ZP.input(a||(a=(0,H.Z)(["\n  width: 100%;\n"]))),Y.ZP.div(d||(d=(0,H.Z)(["\n  display: flex;\n  margin: 15px auto;\n  width: fit-content;\n  justify-content: center;\n  border: solid 1px ",";\n"])),F.Z.primary),Y.ZP.div(s||(s=(0,H.Z)(["\n  padding: 5px 10px;\n  cursor: pointer;\n  text-align: center;\n  color: ",";\n  border-left: 1px solid ",";\n  background-color: ",";\n"])),(function(n){return n.activeColor.textColor}),(function(n){return n.borderLeftColor}),(function(n){return n.activeColor.backgroundColor})),Y.ZP.div(c||(c=(0,H.Z)(["\n  margin: 20px 5px;\n  position: relative;\n  border-radius: 4px;\n  background-color: #fff;\n  padding: 15px 10px 10px;\n  box-shadow: 0px 2px 1px -1px rgb(0 0 0 / 20%),\n    0px 1px 1px 0px rgb(0 0 0 / 14%), 0px 1px 3px 0px rgb(0 0 0 / 12%);\n"])))),en=Y.ZP.div(p||(p=(0,H.Z)(["\n  width: 50px;\n  height: 40px;\n  display: flex;\n  align-items: center;\n  & > img {\n    width: 100%;\n    height: 100%;\n    object-fit: contain;\n  }\n"]))),tn=Y.ZP.div(u||(u=(0,H.Z)(["\n  padding: 10px 0 0;\n  position: relative;\n"]))),rn=Y.ZP.div(l||(l=(0,H.Z)(["\n  top: -10px;\n  right: -5px;\n  position: absolute;\n"]))),on=(Y.ZP.div(x||(x=(0,H.Z)(["\n  display: flex;\n  margin: 5px 0;\n  align-items: center;\n  justify-content: space-between;\n  border-bottom: 1px solid rgb(0 0 0 / 12%);\n"]))),Y.ZP.div(f||(f=(0,H.Z)(["\n  display: flex;\n  margin: 5px 0;\n  align-items: center;\n  justify-content: space-between;\n"])))),an=Y.ZP.div(g||(g=(0,H.Z)(["\n  display: flex;\n  margin: 5px 0;\n  align-items: center;\n"]))),dn=Y.ZP.p(h||(h=(0,H.Z)(["\n  font-weight: 700;\n"]))),sn=Y.ZP.span(Z||(Z=(0,H.Z)(["\n  font-style: italic;\n"]))),cn=(Y.ZP.div(m||(m=(0,H.Z)(["\n  text-align: center;\n  width: ","%;\n"])),100/3),Y.ZP.p(b||(b=(0,H.Z)(["\n  margin: 0 0 5px;\n"]))),Y.ZP.span(v||(v=(0,H.Z)(["\n  color: #fff;\n  padding: 3px 5px;\n  font-size: 12px;\n  border-radius: 5px;\n  background-color: ",";\n"])),(function(n){return n.backgroundColor})),Y.ZP.div(y||(y=(0,H.Z)(["\n  display: flex;\n  padding: 0 0 2px;\n  justify-content: space-between;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.1);\n"]))),Y.ZP.p(j||(j=(0,H.Z)(["\n  margin: 5px 0;\n  padding: 0 5px;\n  font-size: 12px;\n  border-radius: 5px;\n  width: fit-content;\n  background-color: rgba(120, 120, 120, 0.5);\n"]))),Y.ZP.div(P||(P=(0,H.Z)(["\n  top: 0;\n  right: 10px;\n  color: #777;\n  font-size: 20px;\n  cursor: pointer;\n  width: fit-content;\n  position: absolute;\n"]))),Y.ZP.div(w||(w=(0,H.Z)(["\n  top: 20px;\n  z-index: 7;\n  right: 10px;\n  cursor: pointer;\n  padding: 5px;\n  position: absolute;\n  border-radius: 5px;\n  background-color: #fff;\n  display: ",";\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n"])),(function(n){return n.display})),Y.ZP.p(C||(C=(0,H.Z)(["\n  padding: 5px;\n  font-size: 12px;\n  &:hover {\n    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n  }\n  &:nth-child(3): {\n    color: red;\n  }\n"]))),Y.ZP.input(S||(S=(0,H.Z)(["\n  width: 70px;\n  border: none;\n  margin: 0 5px;\n  text-align: right;\n  border-bottom: 1px solid #000;\n  color: ",";\n  &:focus-visible {\n    outline: none;\n  }\n"])),(function(n){return n.textColor}))),pn=(Y.ZP.div(k||(k=(0,H.Z)(["\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  display: flex;\n  position: fixed;\n  padding: 10px 35%;\n  align-items: center;\n  justify-content: space-around;\n  background-color: ",";\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n"])),F.Z.rgbaBlack),t(3454)),un=t(7123),ln=t(5164),xn=t(2153),fn=t(6417),gn=["__typename","_id"],hn=function(n){var e,t=n.register,r=n.errors,i=n.productItem,o=n.selectedProducts,a=n.setSelectedProducts,d=i||{},s=d.quantity,c=d.productCode,p=d.productName,u=d.netUnitValue,l=d.unitString,x=d.expirationDate,f=d.dateOfManufacture,g=(d.productInfo||{}).imgUri,h=(0,N.useState)(s||""),Z=(0,q.Z)(h,2),m=Z[0],b=Z[1],v="".concat(c).concat((0,M.dh)(x)),y=m>=0?F.Z.primary:F.Z.lightRed;return(0,fn.jsx)(nn,{children:(0,fn.jsxs)(tn,{children:[(0,fn.jsx)(rn,{children:(0,fn.jsx)(G.Z,{label:"Xo\xe1",onClick:function(){var n=o.filter((function(n){var e=n.productCode!==c,t=n.expirationDate!==x;return e||t}));a(n)}})}),(0,fn.jsxs)(on,{children:[(0,fn.jsx)(en,{children:(0,fn.jsx)("img",{src:g,alt:"product-img"})}),(0,fn.jsxs)("div",{style:{width:"100%"},children:[(0,fn.jsx)(on,{children:(0,fn.jsxs)(U.Z,{fontSize:12,fontWeight:700,children:[c," - ",(0,V.Z)(p)]})}),(0,fn.jsxs)("p",{children:[(0,fn.jsxs)(sn,{children:[u,l]}),(0,fn.jsxs)("span",{children:[" ","| NSX: ",(0,M.dh)(f)," - HSD:"," ",(0,M.dh)(x)]})]})]})]}),(0,fn.jsx)("hr",{}),(0,fn.jsxs)(on,{children:[(0,fn.jsx)(K,{children:"S\u1ed1 l\u01b0\u1ee3ng hu\u1ef7:"}),(0,fn.jsxs)("div",{children:[(0,fn.jsx)(G.Z,{label:"-",onClick:function(){var n=m-1;if(n>=0){b(n);var e=o.map((function(e){var t=e.productCode===c,r=e.expirationDate===x;return t&&r?(e.quantity=n,e):e}));a(e)}}}),(0,fn.jsx)(cn,{min:0,type:"number",pattern:"[0-9]*",inputmode:"numeric",value:m,textColor:y,onChange:function(n){var e=parseInt(n.target.value,10),t=0===e||isNaN(e);if(e>0){b(e);var r=o.map((function(n){var t=n.productCode===c,r=n.expirationDate===x;return t&&r?(0,R.Z)((0,R.Z)({},n),{},{quantity:e}):n}));a(r)}else if(t){b("");var i=o.map((function(n){var e=n.productCode===c,t=n.expirationDate===x;return e&&t?(0,R.Z)((0,R.Z)({},n),{},{quantity:0}):n}));a(i)}}}),(0,fn.jsx)(B.Z,{label:"+",onClick:function(){var n=(m||0)+1;b(n);var e=o.map((function(e){var t=e.productCode===c,r=e.expirationDate===x;return t&&r?(0,R.Z)((0,R.Z)({},e),{},{quantity:n}):e}));a(e)}})]})]}),(0,fn.jsx)(on,{children:(0,fn.jsx)(X.Z,{register:t,placeholder:"L\xfd do hu\u1ef7 h\xe0ng",validations:{required:!0},name:"".concat(v,".destroyReason"),isError:!(null===(e=r[v])||void 0===e||!e.destroyReason)})})]})})},Zn=function(n){var e=(0,M.xE)({getTimeTogether:!0}),t=(0,T.cI)({defaultValues:{destroyedDate:e}}),r=t.register,i=t.setValue,o=t.handleSubmit,a=t.formState.errors,d=(0,O.I0)(),s=(0,O.v9)((function(n){return n.authReducer})).viewerQuery,c=(0,N.useState)([]),p=(0,q.Z)(c,2),u=p[0],l=p[1],x=(0,N.useState)({node:s}),f=(0,q.Z)(x,2),g=f[0],h=f[1];r("implementer",{required:!g}),r("selectedOneProduct",{required:!u.length});var Z=(0,z.D)(pn.SB,{refetchQueries:[{query:un.yg},"GET_DESTROY_PRODUCT_DIARIES",{query:un.ze},"GET_WAREHOUSE_INVENTORY",{query:un.BQ},"GET_IMPORTED_PRODUCTS"]}),m=(0,q.Z)(Z,1)[0],b=g?(0,fn.jsxs)(on,{children:[(0,fn.jsxs)(dn,{children:[g.node.fullName," -"," ",g.node.phoneNumber]}),(0,fn.jsx)(B.Z,{label:"\u0110\u1ed5i",onClick:function(){h(void 0),i("implementer",void 0)}})]}):(0,fn.jsx)(A.Z,{isSelectOne:!0,notBeCustomer:!0,isError:!!a.implementer,onClickSelectResultItem:function(n){i("implementer",n),h(n)}}),v=(0,fn.jsxs)(J,{children:[(0,fn.jsxs)(an,{children:[(0,fn.jsx)(K,{style:{width:g?65:90},children:"Ng\u01b0\u1eddi hu\u1ef7"}),":\u2002",b]}),(0,fn.jsxs)(on,{children:[(0,fn.jsx)(K,{style:{width:75},children:"Ng\xe0y hu\u1ef7"}),":",(0,fn.jsx)(L.Z,{register:r,name:"destroyedDate",type:"datetime-local",isError:!!a.destroyedDate,validations:{required:!0}})]})]}),y=function(){var n=(0,I.Z)((0,D.Z)().mark((function n(e){var t,r,i,o,a,s,c,p,l,x,f,h,Z,b,v,y,j;return(0,D.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:for(t=e.destroyedDate,r=[],i=0;i<u.length;i++)a=u[i],s=a.quantity,c=a.productCode,p=a.netUnitValue,l=a.unitString,x=a.productName,f=a.importedDate,h=a.expirationDate,Z=a.dateOfManufacture,b=null===(o=e["".concat(c).concat((0,M.dh)(h))])||void 0===o?void 0:o.destroyReason,s&&(v=x.map((function(n){n.__typename,n._id;return(0,E.Z)(n,gn)})),y={productCode:c,netUnitValue:p,unitString:l,productName:v,quantity:s,expirationDate:h,dateOfManufacture:Z,destroyReason:b,importedDate:f},r.push(y));if(!r.length){n.next=10;break}return d((0,ln.S$)()),j={beDestroyedProducts:r,implementerAccountId:g.node._id,implementationAt:new Date(t).toISOString(),implementerFullName:g.node.fullName,destroyedProductCount:r.length},n.next=8,m({variables:{data:j}});case 8:n.sent.data&&(setTimeout((function(){d((0,ln.S4)())}),500),d((0,xn.mm)()));case 10:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return(0,fn.jsxs)($,{children:[v,u.map((function(n,e){return(0,fn.jsx)(hn,{errors:a,itemIndex:e,register:r,productItem:n,selectedProducts:u,setSelectedProducts:l},"".concat(n.productCode,"-").concat(n.expirationDate,"-").concat(e))})),(0,fn.jsxs)(on,{style:{margin:10},children:[(0,fn.jsx)(K,{style:{width:90},children:"S\u1ea3n ph\u1ea9m:"}),(0,fn.jsx)(Q.Z,{isSelectOne:!0,selectedList:u,isError:!!a.selectedOneProduct,searchBackgroundColor:F.Z.white,searchPlaceholder:"Ch\u1ecdn s\u1ea3n ph\u1ea9m mu\u1ed1n hu\u1ef7",onClickSelectResultItem:function(n){-1===u.findIndex((function(e){var t=e.productCode===n.productCode,r=e.expirationDate===n.expirationDate;return t&&r}))&&l([].concat((0,_.Z)(u),[n]))}})]}),(0,fn.jsx)(W.Z,{label:"X\xe1c nh\u1eadn",onClick:o(y)})]})}}}]);