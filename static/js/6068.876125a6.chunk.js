"use strict";(self.webpackChunkproject_g5=self.webpackChunkproject_g5||[]).push([[6068],{9881:function(e,n,t){t.r(n),t.d(n,{default:function(){return T}});var o,r,a,c=t(1413),i=t(2982),u=t(885),d=t(7313),s=t(3222),l=t(3306),f=t(2668),m=t(6173),p=t(6069),h=t(9829),g=t(5310),y=t(2206),v=t(3867),x=t(168),b=t(3115),C=t(1237),P=b.ZP.div(o||(o=(0,x.Z)(["\n  font-size: 12px;\n  margin: 20px 0 120px;\n"]))),Z=b.ZP.div(r||(r=(0,x.Z)(["\n  display: flex;\n  margin: 30px auto;\n  width: fit-content;\n  justify-content: center;\n  box-shadow: rgba(0, 0, 0, 0.16) 0px 1px 4px;\n"]))),w=b.ZP.div(a||(a=(0,x.Z)(["\n  padding: 5px;\n  cursor: pointer;\n  text-align: center;\n  color: ",";\n  border-left: 1px solid ",";\n  background-color: ",";\n"])),(function(e){return e.activeColor.textColor}),(function(e){return e.borderLeftColor}),(function(e){return e.activeColor.backgroundColor})),I=t(7123),D=t(3163),j=t(6417),k=(0,d.lazy)((function(){return Promise.all([t.e(3162),t.e(2700)]).then(t.bind(t,9300))})),S=function(e){var n=e.initCustomerAccount,t=e.customerAccountId,o=e.startOfTimeRange,r=e.endOfTimeRange,a=e.selectedCustomer,x=e.setPrintSection,b=n&&n.node||{},S=b._id,T=b.fullName,R=[{code:"all",label:"T\u1ea5t c\u1ea3"},{code:"pay_immediately",label:"Tr\u1ea3 ngay"},{code:"paid",label:"\u0110\xe3 tr\u1ea3"},{code:"waiting_for_pay",label:"Ch\u01b0a tr\u1ea3"},{code:"reached",label:"\u0110\xe3 \u0111\u1ea1t"},{code:"reaching",label:"\u0110ang ch\u1ea1y"},{code:"unreached",label:"Kh\xf4ng \u0111\u1ea1t"}],A=((0,s.v9)((function(e){return e.authReducer})).viewerQuery||{})._id,O=(0,d.useState)(R[0]),_=(0,u.Z)(O,2),M=_[0],B=_[1],E=(0,d.useState)("2012/01/01"),L=(0,u.Z)(E,2),F=L[0],V=L[1],z=(0,d.useState)("2100/01/01"),K=(0,u.Z)(z,2),N=K[0],Q=K[1],W=(0,d.useState)(S),Y=(0,u.Z)(W,2),q=Y[0],G=Y[1],H=n?F:o,J=n?N:r,U=n?q:t,X=M.code===R[2].code||M.code===R[3].code||M.code===R[4].code,$=(0,l.t)(I.hM,{fetchPolicy:"cache-and-network"}),ee=(0,u.Z)($,2),ne=ee[0],te=ee[1],oe=te.data,re=te.subscribeToMore,ae=oe&&oe.discountPromotionDiaries.edges||[],ce=[],ie=ae.filter((function(e){var n=e.node,t=n.discountPromotionCode,o=n.payWhenCreateOrder;if(o&&!ce.includes(t))return ce=[].concat((0,i.Z)(ce),[t]),!0;return!o})),ue=function(){switch(M.code){case R[1].code:return{payWhenCreateOrder:!0};case R[2].code:return{isPaid:!0};case R[3].code:return{unPayYet:!0};case R[4].code:return{isReached:!0};case R[5].code:return{availableOnly:!0};case R[6].code:return{unReachedOnly:!0};default:return{}}}(),de=(0,c.Z)((0,c.Z)({startOfTimeRange:new Date(H),endOfTimeRange:new Date(J)},ue),U&&{customerAccountId:U}),se=(0,f.a)(I.Kr,{variables:{filter:de},skip:X}).data,le=se&&se.discountPromotions.edges||[],fe=function(e){return e.code===M.code?{backgroundColor:C.Z.primary,textColor:C.Z.white}:{backgroundColor:C.Z.white,textColor:""}},me=X?(0,j.jsx)(j.Fragment,{children:ie.map((function(e,n){var t=e.node,o=t.discountPromotionCode,r=t.reachedCount,a=t.discountPromotionInfo,c=t.totalBePaidMoneyValue,i={diaryCount:r,diaryInfo:e.node,totalBePaidMoneyValue:c};return o==="".concat(C.k,"DP_early_payment")?(0,j.jsx)(g.Z,{diaryItem:e.node},n):(0,j.jsx)(v.Z,{discountPromotionItem:a,customerDiaryInfo:i},n)}))}):(0,j.jsx)(j.Fragment,{children:le.map((function(e,n){return(0,j.jsx)(v.Z,{discountPromotionItem:e.node,customerDiaryInfo:e.node.customerDiaryInfo},n)}))});(0,d.useEffect)((function(){if(X){var e=(0,c.Z)({startOfTimeRange:new Date(H),endOfTimeRange:new Date(J)},de);ne({variables:{filter:e}})}}),[M.code]),(0,d.useEffect)((function(){var e=function(e){var n=e||{},t=n.customerAccountId,o=n.staffAccountId,r=n.managerAccountId,a=n.directorAccountId;return A===t||A===o||A===r||A===a},n=re({document:D.VL,updateQuery:function(n,t){var o=t.subscriptionData;return(0,y.FM)("discountPromotionDiaries","addedNewDiscountPromotionDiary",o,n,e,!0)}});return function(){return n()}}),[re]);var pe=X?ae:le,he=n&&(null===n||void 0===n?void 0:n.node)||a||{},ge=!(0,p.SB)()&&(0,j.jsx)(d.Suspense,{fallback:(0,j.jsx)(m.default,{}),children:(0,j.jsx)(k,{customerButtonMargin:"5px 0",printDiscountPromotionTrackingData:{diariesData:pe||[],selectedCustomer:he}})});return(0,d.useMemo)((function(){x(ge)}),[ae.length,le.length]),(0,j.jsxs)(P,{children:[!!n&&(0,j.jsx)(h.Z,{printSection:ge,inputStartTime:F,setInputStartTime:V,inputEndTime:N,setInputEndTime:Q,onClickSelectResultItem:function(e){var n=(e&&e.node||{})._id;G(n),V("2012/01/01"),Q("2100/01/01")},searchPlaceholder:T,showSelectAllButton:!1,canSearchCustomer:!0}),(0,j.jsx)(Z,{children:R.map((function(e,n){return(0,j.jsx)(w,{activeColor:fe(e),onClick:function(){return B(e)},borderLeftColor:n>0?C.Z.primary:"transparent",children:e.label},n)}))}),me]})};S.defaultProps={setPrintSection:function(){}};var T=S},6881:function(e,n,t){var o=t(8098);n.Z=function(e){if(Array.isArray(e)){var n,t=e||[],r=o.t.getState().commonReducer,a=r&&(null===(n=r.activeLanguage)||void 0===n?void 0:n.locale)||"vi";return(t.find((function(e){return e&&e.locale===a}))||{}).showText||""}return""}}}]);