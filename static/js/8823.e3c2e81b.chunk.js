"use strict";(self.webpackChunkproject_g5=self.webpackChunkproject_g5||[]).push([[8823],{3867:function(n,e,r){r.d(e,{Z:function(){return on}});var t,i,o,c,s,a,d,l,u,x,h,p,f,m,g,Z,j,y,v=r(885),P=r(7313),O=r(514),b=r(3532),C=r(790),_=r(3222),E=r(6069),I=(r(6173),r(6881)),w=r(1677),k=(r(746),r(168)),R=r(3115),T=r(1237),S=(R.ZP.div(t||(t=(0,k.Z)(["\n  padding: 0;\n  font-size: 12px;\n"]))),R.ZP.div(i||(i=(0,k.Z)(["\n  margin: 0 0 15px;\n"])))),D=R.ZP.div(o||(o=(0,k.Z)(["\n  margin: 0 0 15px;\n"]))),N=R.ZP.div(c||(c=(0,k.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n"]))),A=R.ZP.div(s||(s=(0,k.Z)(["\n  position: relative;\n  border-radius: 4px;\n  margin: 10px 5px 15px;\n  background-color: #fff;\n  padding: 15px 10px 10px;\n  box-shadow: 0px 2px 1px -1px rgb(0 0 0 / 20%),\n    0px 1px 1px 0px rgb(0 0 0 / 14%), 0px 1px 3px 0px rgb(0 0 0 / 12%);\n"]))),F=R.ZP.p(a||(a=(0,k.Z)(["\n  margin: 0 0 3px;\n  font-weight: 700;\n  color: ",";\n"])),T.Z.primary),Q=R.ZP.span(d||(d=(0,k.Z)(["\n  font-weight: 500;\n  font-style: italic;\n  color: ",";\n"])),T.Z.black),M=R.ZP.span(l||(l=(0,k.Z)(["\n  font-style: italic;\n  color: ",";\n"])),T.Z.secondary),U=R.ZP.span(u||(u=(0,k.Z)(["\n  font-style: italic;\n  color: ",";\n"])),T.Z.green),B=R.ZP.span(x||(x=(0,k.Z)(["\n  font-style: italic;\n  color: ",";\n"])),T.Z.red),L=R.ZP.span(h||(h=(0,k.Z)(["\n  font-weight: 700;\n  font-style: italic;\n  color: ",";\n"])),T.Z.green),K=R.ZP.span(p||(p=(0,k.Z)(["\n  width: 70px;\n  font-weight: 700;\n  display: inline-block;\n"]))),V=R.ZP.div(f||(f=(0,k.Z)([""]))),H=(R.ZP.div(m||(m=(0,k.Z)(["\n  display: flex;\n  margin: 10px 0 5px;\n  align-items: center;\n  justify-content: space-between;\n"]))),R.ZP.p(g||(g=(0,k.Z)(["\n  font-size: 12px;\n  font-weight: 700;\n  width: fit-content;\n  font-style: italic;\n  color: ",";\n"])),T.Z.primary)),z=(R.ZP.div(Z||(Z=(0,k.Z)(["\n  top: 0;\n  right: 10px;\n  color: #777;\n  font-size: 20px;\n  cursor: pointer;\n  width: fit-content;\n  position: absolute;\n"]))),R.ZP.div(j||(j=(0,k.Z)(["\n  top: 20px;\n  right: 10px;\n  padding: 5px 10px;\n  position: absolute;\n  border-radius: 5px;\n  background-color: #fff;\n  display: ",";\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n"])),(function(n){return n.display})),R.ZP.span(y||(y=(0,k.Z)(["\n  margin: 5px;\n  font-size: 12px;\n"]))),r(3070)),q=r(3454),Y=r(7123),G=r(7119),X=r(6417),W=z.fH.MONEY_FIXED_VALUE,J=z.fH.MONEY_PERCENT_OF_ORDER_VALUE,$=z.fH.MONEY_PERCENT_OF_DIFFERENCE_ORDER_VALUE,nn=z.fH.MONEY_ORDER_QUANTITY,en=z.fH.MONEY_DIFFERENCE_ORDER_QUANTITY,rn=z.fH.MONEY_ORDER_WEIGHT,tn=z.fH.MONEY_DIFFERENCE_ORDER_WEIGHT,on=function(n){var e,r=n.discountPromotionItem,t=n.customerDiaryInfo,i=((0,_.I0)(),(0,P.useRef)(null)),o=((0,_.v9)((function(n){return n.authReducer})).viewerQuery||{}).permissions,c=o.includes(G.gz.CAN_APPROVE_DISCOUNT_PROMOTION),s=o.includes(G.gz.CAN_CONFIRM_PAID_DISCOUNT_PROMOTION),a=(0,P.useState)(!1),d=(0,v.Z)(a,2),l=(d[0],d[1]),u=r||{},x=u._id,h=u.typeCode,p=u.isApproved,f=u.startTime,m=u.endTime,g=u.title,Z=u.conditions,j=u.detail,y=u.payWhenCreateOrder,k=u.otherConditionDescription,R=u.isBuyAnyProductOfConditions,T=j||{},on=T.moneyMethodCode,cn=T.products,sn=T.value,an=T.giftDescription,dn=T.paymentTypeCode,ln=(0,O.Z)(m),un=(0,b.Z)(ln,new Date),xn=R?"Khi mua B\u1ea5t k\u1ef3 S\u1ea3n ph\u1ea9m":"Khi mua \u0110\u1ed3ng th\u1eddi S\u1ea3n ph\u1ea9m",hn=dn===z.ad.TAX_OFFSET,pn=(z.ad.PRODUCT_TYPE,(0,C.D)(q.GG,{refetchQueries:[{query:Y.Kr},"GET_DISCOUNT_PROMOTIONS",{query:Y.hM},"GET_DISCOUNT_PROMOTION_DIARIES"]})),fn=(0,v.Z)(pn,1)[0],mn=(0,C.D)(q.Yh,{refetchQueries:[{query:Y.hM},"GET_DISCOUNT_PROMOTION_DIARIES"]}),gn=(0,v.Z)(mn,1)[0],Zn=(0,C.D)(q.jT,{refetchQueries:[{query:Y.hM},"GET_DISCOUNT_PROMOTION_DIARIES"]}),jn=(0,v.Z)(Zn,1)[0],yn=function(){if(y){var n="";if(!t||!t.diaryCount)return{actuallyReached:"B\u1ea1n kh\xf4ng c\xf3 \u0111\u01a1n n\xe0o \u0111\u1ea1t CK/KM n\xe0y",paymentDetail:(0,X.jsx)(B,{children:"B\u1ea1n kh\xf4ng c\xf3 \u0111\u01a1n n\xe0o \u0111\u1ea1t"})};var e=t||{},r=e.diaryCount,i=e.totalBePaidMoneyValue,o=void 0===i?0:i;switch(dn){case z.ad.MONEY_TYPE:n=(0,X.jsxs)(U,{children:["B\u1ea1n \u0111\u01b0\u1ee3c nh\u1eadn"," ",(0,X.jsx)(L,{children:o&&"".concat(o.toLocaleString()," \u0111")})]});break;case z.ad.GIFT_TYPE:n=(0,X.jsxs)(U,{children:[(0,X.jsx)(L,{children:an})," ","tr\u1ecb gi\xe1"," ",(0,X.jsxs)(L,{children:[sn.toLocaleString()," \u0111"]})]});break;case z.ad.TAX_OFFSET:n=(0,X.jsxs)(U,{children:[an," ",sn.toLocaleString()," ","\u0111"]});break;case z.ad.PRODUCT_TYPE:n=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(1===n.length){var e=n[0],t=e.productInfo,i=e.quantity,o=(t||{}).name;return(0,X.jsxs)(U,{children:["B\u1ea1n \u0111\u01b0\u1ee3c nh\u1eadn"," ",(0,X.jsxs)(L,{children:[r*i," x ",(0,I.Z)(o)]})]})}var c=function(n){var e=n.productInfo,t=n.quantity,i=(e||{}).name;return(0,X.jsxs)(U,{children:["- Nh\u1eadn"," ",(0,X.jsxs)(L,{children:[r," x ",r*t,(0,I.Z)(i)]})]})};return(0,X.jsx)(X.Fragment,{children:n.map((function(n,e){return(0,X.jsx)("div",{children:c(n)},e)}))})}(cn)}return{actuallyReached:"C\xf3 ".concat(r," \u0111\u01a1n \u0111\u1ea1t CK/KM n\xe0y"),paymentDetail:n}}if(!t)return{actuallyReached:(0,X.jsx)("span",{children:"H\xe3y \u0111\u1eb7t \u0111\u01a1n li\xean quan \u0111\u1ec3 t\xedch lu\u1ef9"}),paymentDetail:(0,X.jsx)(B,{children:"B\u1ea1n ch\u01b0a \u0111\u1eb7t \u0111\u01a1n h\xe0ng n\xe0o li\xean quan"})};var c=t.diaryInfo,s=t.diaryCount,a=t.totalBePaidMoneyValue,d=void 0===a?0:a,l="",u=c||{},x=u.isReached,p=u.actuallyAccumulated,f=void 0===p?[]:p;switch(dn){case z.ad.MONEY_TYPE:l=x?(0,X.jsxs)(U,{children:["B\u1ea1n \u0111\u01b0\u1ee3c nh\u1eadn"," ",(0,X.jsx)(L,{children:d&&"".concat(d.toLocaleString()," \u0111")})]}):(0,X.jsx)(B,{children:"Ch\u01b0a \u0111\u1ea1t \u0111i\u1ec1u ki\u1ec7n CK/KM"});break;case z.ad.GIFT_TYPE:l=x?(0,X.jsxs)(U,{children:[(0,X.jsx)(L,{children:an})," ","tr\u1ecb gi\xe1"," ",(0,X.jsxs)(L,{children:[sn.toLocaleString()," \u0111"]})]}):(0,X.jsx)(B,{children:"Ch\u01b0a \u0111\u1ea1t \u0111i\u1ec1u ki\u1ec7n CK/KM"});break;case z.ad.PRODUCT_TYPE:l=x?function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(1===n.length){var e=n[0],r=e.productInfo,t=e.quantity,i=(r||{}).name;return(0,X.jsxs)(U,{children:["B\u1ea1n \u0111\u01b0\u1ee3c nh\u1eadn"," ",(0,X.jsxs)(L,{children:[JSON.stringify(c),s*t," x ",(0,I.Z)(i)]})]})}var o=function(n){var e=n.productInfo,r=n.quantity,t=(e||{}).name;return(0,X.jsxs)(U,{children:["- Nh\u1eadn"," ",(0,X.jsxs)(L,{children:[s," x ",s*r," ",(0,I.Z)(t)]})]})};return(0,X.jsxs)(X.Fragment,{children:[!x&&!un&&(0,X.jsx)("span",{children:"\u0110ang theo d\xf5i"}),!x&&un&&(0,X.jsx)(B,{children:"B\u1ea1n kh\xf4ng \u0111\u1ea1t"}),x&&n.map((function(n,e){return(0,X.jsx)("div",{children:o(n)},e)}))]})}(cn):(0,X.jsx)(B,{children:"Ch\u01b0a \u0111\u1ea1t \u0111i\u1ec1u ki\u1ec7n CK/KM"})}var m=f.map((function(n,e){var r=n||{},t=r.actuallyTotalReachedValue,i=r.productConditionType,o=r.products,c=void 0===o?[]:o;if(c.length){var s=1===c.length,a=c[0]||{},d=a.netUnitValue,l=a.unitString,u=(0,E.RX)(i,d,l);return s?(0,X.jsxs)("span",{children:["T\u1ed5ng ",u.type," \u0111\xe3 \u0111\u1ea1t"," ",t.toLocaleString()," ",u.unit]},e):(0,X.jsxs)("p",{children:["T\u1ed5ng ",u.type," \u0111\xe3 \u0111\u1ea1t"," ",t.toLocaleString()]},e)}return null})),g=h===z.t_.BUY_PRODUCTS?"Ch\u01b0a mua s\u1ea3n ph\u1ea9m li\xean quan":"Vui l\xf2ng \u0111\u1ed1i chi\u1ebfu l\u1ea1i v\u1edbi nh\xe2n vi\xean b\xe1n h\xe0ng";return{actuallyReached:f.length?m:(0,X.jsx)("span",{children:g}),paymentDetail:l}}(),vn=(0,E.dh)(f),Pn=(0,E.dh)(m),On=g&&(null===(e=g[0])||void 0===e?void 0:e.showText),bn=(0,X.jsxs)(N,{children:[(0,X.jsx)(H,{children:"Ch\u01b0a duy\u1ec7t"}),c&&(0,X.jsx)(w.Z,{label:"Duy\u1ec7t",onClick:function(){fn({variables:{data:{isApproved:!0},where:{discountPromotionId:x}}})}})]}),Cn=function(){var n;if(t){var e=(t||{}).diaryInfo||{},r=e._id,i=e.isReached,o=e.isPaid,c=e.paidAt;i||un||(n=(0,X.jsx)(H,{children:"\u0110ang theo d\xf5i"})),!i&&un&&(n=(0,X.jsx)(H,{children:"CK/KM kh\xf4ng \u0111\u1ea1t"})),i&&!o&&(n=(0,X.jsxs)(N,{children:[(0,X.jsx)(H,{children:"Ch\u01b0a tr\u1ea3 CK/KM"}),un&&s&&(0,X.jsx)(w.Z,{label:"X\xe1c nh\u1eadn \u0111\xe3 tr\u1ea3",onClick:function(){!function(n){gn({variables:{where:{discountPromotionDiaryId:n}}})}(r)}})]})),i&&o&&(n=(0,X.jsxs)(N,{children:[(0,X.jsxs)(H,{children:["\u0110\xe3 tr\u1ea3 v\xe0o ",(0,E.dh)(c,!0)]}),(0,X.jsx)(w.Z,{label:"Hu\u1ef7 x\xe1c nh\u1eadn",onClick:function(){!function(n){jn({variables:{where:{discountPromotionDiaryId:n}}})}(r)}})]}))}else n=un?(0,X.jsx)(H,{children:"CK/KM kh\xf4ng \u0111\u1ea1t"}):(0,X.jsx)(H,{children:"\u0110ang theo d\xf5i"});return n}(),_n=function(){if(!p)return bn;var n=hn?"C\u1ea5n tr\u1eeb thu\u1ebf TNCN":"Tr\u1ea3 ngay tr\xean m\u1ed7i \u0111\u01a1n h\xe0ng";return y?(0,X.jsx)(H,{children:n}):Cn}(),En={},In=function(n,e){En=(0,E.RX)(e,n[0].netUnitValue,n[0].unitString);var r=function(n,e){var r=n.code,t=(n.minRequireValue,(n.productInfo||{}).name),i=(0,X.jsxs)("p",{children:["- ",r," - ",(0,I.Z)(t)]});return(0,X.jsx)(X.Fragment,{children:i})};return n.map((function(n,e){return(0,X.jsx)(P.Fragment,{children:r(n)},e)}))},wn=(0,X.jsxs)(X.Fragment,{children:[k&&(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(K,{children:"\u0110i\u1ec1u ki\u1ec7n:"}),k]}),Z&&!!Z.length&&(0,X.jsxs)(X.Fragment,{children:[(0,X.jsxs)(S,{children:[(0,X.jsx)(K,{children:"\u0110i\u1ec1u ki\u1ec7n:"}),(0,X.jsx)("span",{children:xn})]}),Z.map((function(n,e){var r=n.products,t=n.productConditionType,i=n.minTotalRequireValue;return(0,X.jsxs)(D,{children:[In(r,t),(0,X.jsxs)("p",{children:["T\u1ed5ng ",En.type," c\u1ea7n \u0111\u1ea1t:"," ",i.toLocaleString()," ",En.unit]})]},e)}))]})]}),kn=(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)("hr",{}),function(){var n=[W,J,$,nn,en,rn,tn];switch(dn){case z.ad.MONEY_TYPE:var e=n.find((function(n){return n.value===on}));return(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(K,{children:"CK/KM:"}),function(n){if(n.value===W.value)return"Ti\u1ec1n m\u1eb7t ".concat(sn.toLocaleString()," \u0111");var e=n.value.includes("percent_of")?"%":"\u0111";return"Ti\u1ec1n = ".concat(sn.toLocaleString()).concat(e)+n.label.slice(12)}(e)]});case z.ad.GIFT_TYPE:return(0,X.jsx)(X.Fragment,{children:(0,X.jsxs)("div",{children:[(0,X.jsx)(K,{children:"CK/KM:"}),an," tr\u1ecb gi\xe1"," ",sn.toLocaleString()," \u0111"]})});case z.ad.TAX_OFFSET:return(0,X.jsx)(X.Fragment,{children:(0,X.jsxs)("div",{children:[(0,X.jsx)(K,{children:"C\u1ea5n tr\u1eeb:"}),an," ",sn.toLocaleString()," \u0111"]})});case z.ad.PRODUCT_TYPE:return function(n){var e=1===n.length,r=function(n){var r=n.code,t=n.quantity,i=(n.productInfo||{}).name,o=e?"":"- ";return(0,X.jsxs)("p",{children:[e&&(0,X.jsx)(K,{children:"CK/KM:"}),(0,X.jsxs)(M,{children:[o," T\u1eb7ng"]})," ",t," ",r," - ",(0,I.Z)(i)]})};return(0,X.jsxs)(X.Fragment,{children:[!e&&(0,X.jsx)(K,{children:"CK/KM:"}),n.map((function(n,e){return(0,X.jsx)(P.Fragment,{children:r(n)},e)}))]})}(cn);default:return null}}()]});return(0,P.useEffect)((function(){var n=function(n){i.current&&!i.current.contains(n.target)&&l(!1)};return document.addEventListener("mousedown",n),function(){document.removeEventListener("mousedown",n)}}),[i]),(0,X.jsx)(A,{children:(0,X.jsxs)(V,{children:[(0,X.jsxs)(F,{children:[vn," - ",Pn,":"," ",(0,X.jsx)(Q,{children:On})]}),wn,kn,!hn&&(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)("hr",{}),(0,X.jsxs)("div",{children:[(0,X.jsx)(K,{children:"Th\u1ef1c \u0111\u1ea1t: "}),(0,X.jsx)("span",{style:{fontWeight:500},children:yn.actuallyReached})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(K,{children:"K\u1ebft qu\u1ea3: "}),yn.paymentDetail]})]}),(0,X.jsx)("hr",{}),(0,X.jsx)(X.Fragment,{children:_n})]})})}},746:function(n,e,r){r.r(e),r.d(e,{default:function(){return me}});var t,i,o,c,s,a,d,l,u,x,h,p,f,m,g,Z,j,y,v,P,O,b,C,_,E,I,w,k,R,T,S,D,N,A,F,Q,M,U,B,L=r(2982),K=r(4165),V=r(1413),H=r(5987),z=r(5861),q=r(885),Y=r(7313),G=r(5627),X=r(3222),W=r(790),J=r(2668),$=r(324),nn=r(6618),en=r(1997),rn=r(5954),tn=r(5222),on=r(4641),cn=r(2397),sn=r(1677),an=r(1300),dn=r(2447),ln=r(3354),un=r(9146),xn=r(6879),hn=r(6069),pn=r(6881),fn=r(9673),mn=r(2262),gn=r(4214),Zn=r(1359),jn=r(3867),yn=r(168),vn=r(3115),Pn=r(1237),On=vn.ZP.div(t||(t=(0,yn.Z)(["\n  font-size: 12px;\n  padding: 10px 0 150px;\n"]))),bn=vn.ZP.div(i||(i=(0,yn.Z)(["\n  display: flex;\n  // margin: 5px 10px;\n  align-items: center;\n"]))),Cn=vn.ZP.p(o||(o=(0,yn.Z)(["\n  margin: 7px 0 7px;\n"]))),_n=vn.ZP.span(c||(c=(0,yn.Z)(["\n  width: 70px;\n  display: inline-block;\n"]))),En=vn.ZP.div(s||(s=(0,yn.Z)(["\n  display: flex;\n  margin: 5px 0;\n  align-items: center;\n  justify-content: space-between;\n"]))),In=vn.ZP.div(a||(a=(0,yn.Z)(["\n  display: flex;\n  justify-content: space-between;\n"]))),wn=vn.ZP.input(d||(d=(0,yn.Z)(["\n  border: none;\n  margin: 0 10px;\n  padding: 2px 0 0 5px;\n  font-size: 12px;\n  font-weight: 300;\n  text-align: right;\n  border-bottom: 1px solid ",";\n  &:hover {\n    box-shadow: none;\n  }\n  &:focus {\n    box-shadow: none;\n  }\n  &:focus-visible {\n    outline: none;\n    box-shadow: none;\n  }\n"])),Pn.Z.secondary),kn=vn.ZP.p(l||(l=(0,yn.Z)(["\n  font-style: italic;\n"]))),Rn=vn.ZP.span(u||(u=(0,yn.Z)(["\n  font-weight: 700;\n"]))),Tn=vn.ZP.span(x||(x=(0,yn.Z)(["\n  font-weight: 700;\n  color: ",";\n"])),Pn.Z.primary),Sn=vn.ZP.p(h||(h=(0,yn.Z)(["\n  font-weight: 700;\n"]))),Dn=vn.ZP.p(p||(p=(0,yn.Z)(["\n  width: ",";\n"])),(function(n){return n.width?n.width:"80px"})),Nn=(vn.ZP.span(f||(f=(0,yn.Z)(["\n  padding: 1px 5px;\n  border-radius: 3px;\n  background-color: ",";\n"])),Pn.Z.secondary),vn.ZP.div(m||(m=(0,yn.Z)(["\n  display: flex;\n  margin: 10px 0;\n  padding: 15px 0 5px;\n  position: relative;\n  align-items: center;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.12);\n  // justify-content: space-between;\n"])))),An=vn.ZP.div(g||(g=(0,yn.Z)(["\n  width: 35px;\n  height: 35px;\n  display: flex;\n  align-items: center;\n  & > img {\n    width: 100%;\n    height: 100%;\n  }\n"]))),Fn=vn.ZP.div(Z||(Z=(0,yn.Z)(["\n  width: 70%;\n  margin: 0 0 0 10px;\n"]))),Qn=vn.ZP.div(j||(j=(0,yn.Z)(["\n  width: 105px;\n  text-align: right;\n  margin: 0 0 0 10px;\n"]))),Mn=vn.ZP.p(y||(y=(0,yn.Z)(["\n  font-style: italic;\n  color: ",";\n"])),Pn.Z.secondary),Un=vn.ZP.p(v||(v=(0,yn.Z)(["\n  font-size: 15px;\n  font-weight: 700;\n  line-height: 23px;\n  color: ",";\n"])),Pn.Z.primary),Bn=vn.ZP.span(P||(P=(0,yn.Z)(["\n  font-size: 12px;\n  font-weight: 500;\n  color: ",";\n"])),(function(n){return n.textColor})),Ln=(vn.ZP.div(O||(O=(0,yn.Z)(["\n  text-align: center;\n  margin: 0 0 0 25px;\n"]))),vn.ZP.h3(b||(b=(0,yn.Z)(["\n  font-weight: 700;\n  margin: 25px 5px 0;\n  color: ",";\n"])),Pn.Z.lightBlack)),Kn=(vn.ZP.span(C||(C=(0,yn.Z)(["\n  font-size: 12px;\n  font-weight: 500;\n  font-style: italic;\n  margin: 0 5px 0 0;\n  text-decoration: line-through;\n"]))),vn.ZP.span(_||(_=(0,yn.Z)(["\n  font-weight: 700;\n  font-style: italic;\n  color: ",";\n"])),Pn.Z.secondary)),Vn=(vn.ZP.div(E||(E=(0,yn.Z)(["\n  padding: 10px;\n  cursor: pointer;\n  margin: 0 0 10px;\n  box-shadow: 0px 2px 1px -1px rgb(0 0 0 / 20%),\n    0px 1px 1px 0px rgb(0 0 0 / 14%), 0px 1px 3px 0px rgb(0 0 0 / 12%);\n"]))),vn.ZP.h5(I||(I=(0,yn.Z)(["\n  font-weight: 700;\n"]))),vn.ZP.div(w||(w=(0,yn.Z)(["\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  padding: 10px;\n  display: flex;\n  position: fixed;\n  align-items: center;\n  justify-content: space-between;\n  background-color: ",";\n"])),Pn.Z.rgbaBlack)),Hn=vn.ZP.div(k||(k=(0,yn.Z)(["\n  width: 40%;\n  display: flex;\n  position: relative;\n  justify-content: center;\n"]))),zn=vn.ZP.div(R||(R=(0,yn.Z)(["\n  right: 0;\n  top: -5px;\n  color: #777;\n  cursor: pointer;\n  width: fit-content;\n  position: absolute;\n"]))),qn=vn.ZP.div(T||(T=(0,yn.Z)(["\n  top: 15px;\n  right: 0;\n  z-index: 3;\n  padding: 5px;\n  position: absolute;\n  border-radius: 5px;\n  background-color: #fff;\n  display: ",";\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n"])),(function(n){return n.display})),Yn=vn.ZP.div(S||(S=(0,yn.Z)(["\n  bottom: 25px;\n  right: 0px;\n  z-index: 3;\n  padding: 5px;\n  position: absolute;\n  border-radius: 5px;\n  background-color: #fff;\n  display: ",";\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n"])),(function(n){return n.display})),Gn=vn.ZP.div(D||(D=(0,yn.Z)(["\n  z-index: 3;\n  width: 155px;\n  right: -12px;\n  padding: 5px;\n  bottom: 25px;\n  position: absolute;\n  border-radius: 5px;\n  background-color: #fff;\n  display: ",";\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n"])),(function(n){return n.display})),Xn=vn.ZP.p(N||(N=(0,yn.Z)(["\n  margin: 5px;\n  display: flex;\n  font-size: 12px;\n  cursor: pointer;\n  padding: 5px 10px;\n  text-align: center;\n  align-items: center;\n  color: ",";\n  &:hover {\n    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n  }\n"])),(function(n){return n.textColor})),Wn=vn.ZP.p(A||(A=(0,yn.Z)(["\n  color: #fff;\n  font-size: 13px;\n  font-weight: 600;\n"]))),Jn=(vn.ZP.span(F||(F=(0,yn.Z)(["\n  color: #fff;\n  padding: 2px 5px;\n  font-weight: 700;\n  border-radius: 5px;\n  background-color: ",";\n"])),Pn.Z.primary),vn.ZP.div(Q||(Q=(0,yn.Z)(["\n  display: flex;\n  justify-content: space-between;\n"]))),vn.ZP.div(M||(M=(0,yn.Z)(["\n  margin: 20px 0 0;\n"])))),$n=vn.ZP.div(U||(U=(0,yn.Z)(["\n  width: 150px;\n  display: flex;\n  margin: 20px auto 0;\n  justify-content: space-between;\n"]))),ne=vn.ZP.p(B||(B=(0,yn.Z)(["\n  font-style: italic;\n  color: ",";\n"])),Pn.Z.lightRed),ee=r(2153),re=r(3454),te=r(7123),ie=r(3070),oe=r(7119),ce=r(6417),se=["name","__typename","imgUri","stockQty","stockQtyByOrders"],ae=["name","__typename","imgUri","stockQty","stockQtyByOrders"],de=["name","__typename","imgUri","stockQty","stockQtyByOrders"],le=function(n){var e=n.orderId,r=n.updateOrder,t=n.productCode,i=n.orderedProducts,o=n.setOrderedProducts,c=(0,Y.useState)(!1),s=(0,q.Z)(c,2),a=s[0],d=s[1],l=(0,X.I0)(),u=function(){var n=(0,z.Z)((0,K.Z)().mark((function n(){var c,s,a,u,x,h,p,f;return(0,K.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(c={},s=i.filter((function(n){return n.code===t&&(c=n),n.code!==t})),a=s.map((function(n){var e=n.name,r=(n.__typename,n.imgUri,n.stockQty,n.stockQtyByOrders,(0,H.Z)(n,se)),t=e.map((function(n){return{showText:n.showText,locale:n.locale}}));return(0,V.Z)((0,V.Z)({},r),{},{name:t})})),!e){n.next=11;break}return x=(u=c||{}).code,h=u.orderQty,p={products:a,updateProductQty:{productCode:x,incQuantity:h}},f={orderId:e},n.next=9,r({variables:{data:p,where:f}});case 9:n.sent.data?(o(s),l((0,ee._w)())):d(!0);case 11:o(s),l((0,ee._w)());case 13:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,ce.jsxs)(Jn,{children:[a&&(0,ce.jsx)(ne,{children:"L\u1ed7i m\xe1y ch\u1ee7 vui l\xf2ng quay l\u1ea1i sau!"}),(0,ce.jsx)("p",{children:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n xo\xe1 s\u1ea3n ph\u1ea9m n\xe0y kh\u1ecfi \u0111\u01a1n h\xe0ng kh\xf4ng?"}),(0,ce.jsxs)($n,{children:[(0,ce.jsx)(mn.Z,{label:"Hu\u1ef7",onClick:function(){l((0,ee._w)())}}),(0,ce.jsx)(gn.Z,{label:"X\xe1c nh\u1eadn",onClick:u})]})]})},ue=function(n){var e=n.orderId,r=n.itemIndex,t=n.updateOrder,i=n.productItem,o=n.setShowTooltip,c=n.orderedProducts,s=n.setOrderedProducts,a=n.setIsEditingOrderQuantity,d=i||{},l=d.orderQty,u=d.stockQtyByOrders,x=(0,Y.useState)(l),h=(0,q.Z)(x,2),p=h[0],f=h[1],m=l-p,g=function(){var n=(0,z.Z)((0,K.Z)().mark((function n(){var i,d,l,x,h,f;return(0,K.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(0===m){n.next=19;break}if((i=(0,L.Z)(c))[r]=(0,V.Z)((0,V.Z)({},i[r]),{},{orderQty:p,stockQtyByOrders:u+m}),d=i.map((function(n){var e=n.name,r=(n.__typename,n.imgUri,n.stockQty,n.stockQtyByOrders,(0,H.Z)(n,ae)),t=e.map((function(n){return{showText:n.showText,locale:n.locale}}));return(0,V.Z)((0,V.Z)({},r),{},{name:t})})),!e){n.next=14;break}return x=null===(l=i[r])||void 0===l?void 0:l.code,h={products:d,updateProductQty:{productCode:x,incQuantity:m}},f={orderId:e},n.next=10,t({variables:{data:h,where:f}});case 10:n.sent.data&&(o(!1),s(i),a(!1)),n.next=17;break;case 14:o(!1),s(i),a(!1);case 17:n.next=20;break;case 19:0===m&&(o(!1),a(!1));case 20:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)(bn,{children:(0,ce.jsx)(fn.Z,{type:"number",value:p,style:{textAlign:"right"},onChange:function(n){var e=n.target.value,r=Number(e);r>=1&&f(r)}})}),(0,ce.jsx)(mn.Z,{label:"Hu\u1ef7",onClick:function(){o(!1),a(!1)}}),(0,ce.jsx)(sn.Z,{label:"OK",onClick:g})]})},xe=function(n){var e=n.orderId,r=n.itemIndex,t=n.productItem,i=n.viewerQuery,o=n.updateOrder,c=n.canUpdateOrder,s=n.orderedProducts,a=n.setOrderedProducts,d=n.isPromotionProduct,l=(0,X.I0)(),u=(0,Y.useState)(!1),x=(0,q.Z)(u,2),h=x[0],p=x[1],f=i||{},m=(f.applyingDiscount,f.permissions),g=(f.roles,t||{}),Z=g.orderQty,j=g.code,y=g.name,v=g.imgUri,P=g.price,O=g.stockQtyByOrders,b=g.quantity,C=g.netUnitValue,_=g.unitString,E=g.productInfo||{},I=E.imgUri,w=E.name,k=E.stockQtyByOrders,R=m.includes(oe.gz.VIEW_WAREHOUSE_INVENTORY_STOCK),T=O||k||0,S=d?0:P,D=Z||b,N=T>=D?Pn.Z.secondary:Pn.Z.lightRed,A=R?(0,ce.jsxs)(Bn,{textColor:N,children:["\u2002(",T,")"]}):null,F=(0,Y.useRef)(null),Q=(0,Y.useState)(!1),M=(0,q.Z)(Q,2),U=M[0],B=M[1],L=U?"block":"none",K=(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)(zn,{onClick:function(){return B(!U)},children:(0,ce.jsx)(nn.Z,{})}),(0,ce.jsxs)(qn,{display:L,ref:F,children:[(0,ce.jsxs)(Xn,{onClick:function(){p(!0)},children:[(0,ce.jsx)(rn.Z,{fontSize:"small"}),"\u2002S\u1eeda"]}),(0,ce.jsxs)(Xn,{textColor:Pn.Z.lightRed,onClick:function(){return function(n){var r={title:"X\xe1c nh\u1eadn xo\xe1 s\u1ea3n ph\u1ea9m",children:(0,ce.jsx)(le,{orderId:e,updateOrder:o,productCode:n,orderedProducts:s,setOrderedProducts:a})};l((0,ee.om)(r))}(j)},children:[(0,ce.jsx)(en.Z,{fontSize:"small"}),"\u2002Xo\xe1"]})]})]}),V=h?(0,ce.jsx)(ue,{orderId:e,itemIndex:r,updateOrder:o,productItem:t,setShowTooltip:B,orderedProducts:s,setOrderedProducts:a,setIsEditingOrderQuantity:p}):(0,ce.jsxs)(Un,{children:[D,A]}),H=(d?"[T\u1eb7ng] ":"")+"".concat(j," - ").concat((0,pn.Z)(y||w));return(0,Y.useEffect)((function(){var n=function(n){F.current&&!F.current.contains(n.target)&&B(!1)};return document.addEventListener("mousedown",n),function(){document.removeEventListener("mousedown",n)}}),[F]),(0,ce.jsxs)(Nn,{children:[c&&!h&&!d&&K,(0,ce.jsx)(An,{children:(0,ce.jsx)("img",{src:I||v,alt:"product-img"})}),(0,ce.jsxs)(Fn,{children:[(0,ce.jsx)("p",{children:H}),(0,ce.jsxs)(Mn,{children:[C,_," - ",S.toLocaleString(),"\u0111"]})]}),(0,ce.jsxs)(Qn,{children:[V,(0,ce.jsxs)("p",{style:{lineHeight:"20px"},children:[(S*Z).toLocaleString()," \u0111"]})]})]})},he=function(n){var e=n.orderId,r=n.updateOrder,t=n.orderedProductCodes,i=n.orderedProducts,o=n.setOrderedProducts,c=n.setIsAddingProduct,s=n.isPayDiscountPromotion,a=(0,Y.useState)([]),d=(0,q.Z)(a,2),l=d[0],u=d[1],x=function(){var n=(0,z.Z)((0,K.Z)().mark((function n(){var t,s,a,d,u,x;return(0,K.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=l.filter((function(n){return n.orderQty&&n.orderQty>0})),s=[].concat((0,L.Z)(i),(0,L.Z)(t)),a=[],d=s.map((function(n){var e=n.name,r=(n.__typename,n.imgUri,n.stockQty,n.stockQtyByOrders,(0,H.Z)(n,de)),t=e.map((function(n){return{showText:n.showText,locale:n.locale}}));return a=[].concat((0,L.Z)(a),[{productCode:n.code,incQuantity:-n.orderQty}]),(0,V.Z)((0,V.Z)({},r),{},{name:t})})),!e){n.next=11;break}return u=(0,V.Z)({products:d},a.length&&{addNewProducts:a}),x={orderId:e},n.next=9,r({variables:{data:u,where:x}});case 9:n.sent.data&&(o([].concat((0,L.Z)(i),(0,L.Z)(t))),c(!1));case 11:o([].concat((0,L.Z)(i),(0,L.Z)(t))),c(!1);case 13:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,ce.jsxs)(ce.Fragment,{children:[!!l.length&&(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)(Ln,{style:{margin:"20px 0 0"},children:"DANH S\xc1CH S\u1ea2N PH\u1ea8M S\u1ebc TH\xcaM:"}),(0,ce.jsxs)(tn.Z,{children:[l.map((function(n,e){var r=n.code,t=n.name,i=n.netUnitValue,o=n.unitString;return(0,ce.jsxs)(Y.Fragment,{children:[(0,ce.jsxs)(In,{children:[(0,ce.jsxs)("p",{children:[e+1,".",r," - ",(0,pn.Z)(t)," - ",i,o]}),(0,ce.jsx)(mn.Z,{label:"Xo\xe1",margin:"-3px 0 3px 10px",onClick:function(){return function(n){var e=l.filter((function(e){return e.code!==n}));u(e)}(r)}})]}),(0,ce.jsxs)("p",{children:["S\u1ed1 l\u01b0\u1ee3ng:"," ",(0,ce.jsx)(wn,{isInline:!0,min:0,name:r,type:"number",style:{width:50,margin:"0 0 15px"},onChange:function(n){return function(n,e){var r=n.target.value,t=Number(r),i=l[e].stockQtyByOrders;l[e]=t>=0?(0,V.Z)((0,V.Z)({},l[e]),{},{orderQty:t,stockQtyByOrders:i-t}):(0,V.Z)((0,V.Z)({},l[e]),{},{orderQty:0,stockQtyByOrders:i})}(n,e)}})]})]},"".concat(r,"-").concat(e))})),(0,ce.jsx)(sn.Z,{label:"X\xe1c nh\u1eadn",margin:"20px 0 0",onClick:x})]})]}),(0,ce.jsx)(bn,{children:(0,ce.jsx)(xn.Z,{isSelectOne:!0,searchPlaceholder:"Ch\u1ecdn s\u1ea3n ph\u1ea9m (c\xf3 th\u1ec3 ch\u1ecdn nhi\u1ec1u)",onClickSelectResultItem:function(n){var e=l.findIndex((function(e){return n.node.code===e.code})),r=t.findIndex((function(e){return e.code===n.node.code}));if(-1===e&&-1===r){var i=n.node,o=i.code,c=i.name,a=i.orderQty,d=i.price,x=i.netUnitValue,h=i.unitString,p=i.stockQty,f=i.stockQtyByOrders,m=i.imgUri,g={code:o,name:c,orderQty:a,price:s?0:d,netUnitValue:x,unitString:h,stockQty:p,stockQtyByOrders:f,imgUri:m},Z=[].concat((0,L.Z)(l),[g]);u(Z)}},selectedList:[].concat((0,L.Z)(l),(0,L.Z)(t))})})]})},pe=function(n){var e=n.errors,r=n.register,t=n.setValue,i=n.clearErrors,o=n.selectedCustomer,c=n.saleStaffFullName,s=n.setSelectedCustomer,a=n.isPayDiscountPromotion,d=n.setIsPayDiscountPromotion,l=n.setOrderedProducts,u=n.isSpecialOrderFromInput,x=o||{},h=x.address,p=x.fullName,f=x.phoneNumber,m=((0,X.v9)((function(n){return n.authReducer})).viewerQuery||{}).permissions,g=(void 0===m?[]:m).includes(oe.gz.CAN_CREATE_NORMAL_SPECIAL_ORDER_FOR_ANYONE),Z=o?(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsxs)(Sn,{children:[": ",p]}),(0,ce.jsx)(sn.Z,{label:"Ch\u1ecdn l\u1ea1i",onClick:function(){return s(void 0)}})]}):(0,ce.jsx)(Zn.Z,{isSelectOne:!0,roles:[ie.If.CUSTOMER],isError:!!e.selectedCustomer,onClickSelectResultItem:function(n){var e=n&&n.node;i("selectedCustomer"),t("selectedCustomer",e),s(e)},noOwnAccountFilter:g});return(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)(Ln,{style:{margin:"0 10px"},children:"KH\xc1CH H\xc0NG"}),(0,ce.jsxs)(ln.Z,{children:[(0,ce.jsxs)(bn,{children:[(0,ce.jsx)(Dn,{children:"Ng\xe0y t\u1ea1o:"}),(0,ce.jsx)(fn.Z,{name:"createdAt",register:r,type:"datetime-local",isError:!!e.createdAt,validations:{required:!0}})]}),(0,ce.jsxs)(bn,{children:[(0,ce.jsx)(Dn,{width:o?"70px":"100px",children:"Kh\xe1ch h\xe0ng"}),Z]}),o&&(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsxs)(Cn,{children:[(0,ce.jsx)(_n,{children:"S\u0110T"}),": ",f]}),(0,ce.jsxs)(Cn,{children:[(0,ce.jsx)(_n,{children:"\u0110\u1ecba ch\u1ec9"}),": ",h]}),(0,ce.jsxs)(Cn,{children:[(0,ce.jsx)(_n,{children:"Ph\u1ee5 tr\xe1ch"}),": ",c]})]}),u&&(0,ce.jsxs)(bn,{children:[(0,ce.jsx)("input",{type:"checkbox",checked:a,onChange:function(n){var e=n.target.checked;l([]),d(!!e)}}),(0,ce.jsx)("p",{children:"\u2002\u0110\u01a1n tr\u1ea3 CKKM"})]})]})]})},fe=function(n){var e=n.orderItem,r=n.callbackAfterCreatedOrder,t=n.orderProducts,i=n.isSpecialOrder,o=new Date,c=function(){var n=o.getHours();return n>9?n:"0".concat(n)}(),s=function(){var n=o.getMinutes();return n>9?n:"0".concat(n)}(),a=function(){var n=o.getDate();return n>9?n:"0".concat(n)}(),d=function(){var n=o.getMonth()+1;return n>9?n:"0".concat(n)}(),l=o.getFullYear(),u="".concat(l,"-").concat(d,"-").concat(a,"T").concat(c,":").concat(s),x=(0,G.cI)({defaultValues:{createdAt:u}}),h=x.watch,p=x.register,f=x.setValue,m=x.clearErrors,g=x.handleSubmit,Z=x.formState.errors,j=h("specialDiscountValue"),y=e||{},v=y._id,P=y.products,O=y.customerInfo,b=y.reachedPayImmediatelyDiscountPromotions,C=y.createdAt,_=y.saleStaffInfo,E=y.discountValue,I=y.isCanceled,w=y.isPromotionPayment,k=O||{},R=k.currentDebtBalance,T=k.fullName,S=k.address,D=k.phoneNumber,N=(0,X.I0)(),A=(0,X.v9)((function(n){return n.authReducer})).viewerQuery,F=(0,Y.useState)(!1),Q=(0,q.Z)(F,2),M=Q[0],U=Q[1],B=(0,Y.useState)(!1),H=(0,q.Z)(B,2),nn=H[0],en=H[1],rn=(0,Y.useState)(t||P),sn=(0,q.Z)(rn,2),xn=sn[0],pn=sn[1],mn=(0,Y.useState)(!1),gn=(0,q.Z)(mn,2),Zn=gn[0],yn=gn[1],vn=(0,Y.useState)(void 0),Pn=(0,q.Z)(vn,2),In=Pn[0],wn=Pn[1],Dn=(0,W.D)(re.d4,{refetchQueries:[{query:te.fB},"GET_ORDERS"]}),Nn=(0,q.Z)(Dn,1)[0],An=(0,W.D)(re.rF,{refetchQueries:[{query:te.fB},"GET_ORDERS"]}),Fn=(0,q.Z)(An,1)[0],Qn=(0,W.D)(re.ou,{refetchQueries:[{query:te.fB},"GET_ORDERS"]}),Mn=(0,q.Z)(Qn,1)[0],Bn=(0,W.D)(re.e9,{refetchQueries:[{query:te.fB},"GET_ORDERS"]}),zn=(0,q.Z)(Bn,1)[0],qn=(0,W.D)(re.PA,{refetchQueries:[{query:te.fB},"GET_ORDERS"]}),Jn=(0,q.Z)(qn,1)[0],$n=In||A||{},ne=$n._id,se=$n.fullName,ae=$n.address,de=$n.phoneNumber,le=$n.applyingDiscount,ue=$n.staffAccountId,fe=$n.managerAccountId,me=$n.directorAccountId,ge=$n.roles,Ze=$n.permissions,je=$n.currentDebtBalance,ye=$n.saleStaffInfo,ve=$n.fatherChildrenAccountIds,Pe=void 0===ve?[]:ve,Oe=ye||{},be=Oe.fullName,Ce=Oe.phoneNumber,_e=E||j||le||0,Ee=ge.includes(ie.If.STAFF_OF_CUSTOMER)?Pe[0]:ne,Ie=function(){var n=e?R:je,r=Number(n)?n.toLocaleString():0;return n>0?"+".concat(r):r}(),we=e?T:se,ke=e?S:ae,Re=e?D:de,Te=e?_&&_.fullName:be,Se=e?_&&_.phoneNumber:Ce,De=A.roles.includes(ie.If.CUSTOMER),Ne=A.roles.includes(ie.If.STAFF_OF_CUSTOMER),Ae=!De&&!Ne&&t;p("selectedCustomer",{required:Ae});var Fe=xn.map((function(n){return{code:n.code}})),Qe={discountValue:le||0,orderedProducts:Fe,customerAccountId:Ee},Me=!t||i||M,Ue=(0,J.a)(te.UZ,{variables:{where:Qe},skip:Me}).data,Be={orderedProducts:Fe,customerAccountId:Ee},Le=(0,J.a)(te.fb,{variables:{filter:{customerAccountId:Ee},where:Be},skip:Me}).data,Ke=Ue&&Ue.orderReachedPayImmediatelyDiscountPromotions||[],Ve=Le&&Le.orderRelatePayLaterDiscountPromotions||[],He=t?Ve:e?e.relatePayLaterPromotions:[],ze=0,qe=(xn.forEach((function(n){var e=n.orderQty,r=n.price;ze+=e*r})),(ze*(1-_e/100)).toLocaleString()),Ye=function(){var n=ze*(_e/100);return n>0?"-".concat(n.toLocaleString()):n.toLocaleString()}(),Ge=[],Xe=function(){var n=b||Ke;if(n&&n.length){for(var e=0,r=0;r<n.length;r++){var t=n[r].detail||{},i=t.value,o=t.products;if(e+=i||0,o&&o.length)for(var c=function(n){var e=o[n]||{},r=e.code,t=e.quantity,i=Ge.findIndex((function(n){return n.code===r}));if(-1===i)Ge=[].concat((0,L.Z)(Ge),(0,L.Z)(o));else{var c=Ge[i],s=c.quantity,a=(0,V.Z)((0,V.Z)({},c),{},{quantity:s+t});Ge[i]=a}},s=0;s<o.length;s++)c(s)}return e}}(),We=(0,Y.useRef)(null),Je=Zn?"block":"none",$e="",nr=!1,er=null,rr=Ze.includes(oe.gz.CAN_APPROVE_DEBT_FOR_ORDER),tr=Ze.includes(oe.gz.CAN_APPROVE_ANY_ORDER),ir=Ze.includes(oe.gz.CAN_APPROVE_SPECIAL_ORDER),or=Ze.includes(oe.gz.CAN_CONFIRM_SHIPPED_OUT_ORDER),cr=Ze.includes(oe.gz.CAN_CONFIRM_HANDED_OVER_ORDER),sr=Ze.includes(oe.gz.CAN_DELETE_CANCELED_ORDER),ar=Ze.includes(oe.gz.CAN_UPDATE_ORDER_BEFORE_BE_APPROVED),dr=Ze.includes(oe.gz.CAN_UPDATE_ORDER_AFTER_BE_APPROVED);if(t){nr=!0,$e="Ch\u1edd x\xe1c nh\u1eadn \u0111\u1eb7t h\xe0ng";var lr,ur=function(){var n=(0,z.Z)((0,K.Z)().mark((function n(e){var t,o,c,s,a,d,l,u,x,h,p,f,m,g,Z,y,v;return(0,K.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(0!==xn.length){n.next=3;break}return N((0,ee.mm)()),n.abrupt("return");case 3:for(t=e.createdAt,o=[],c=0;c<xn.length;c++)s=xn[c],a=s.code,d=s.name,l=s.orderQty,u=s.price,x=s.netUnitValue,h=s.unitString,p=d.map((function(n){return{showText:n.showText,locale:n.locale}})),f={code:a,name:p,orderQty:l,price:u,netUnitValue:x,unitString:h},o.push(f);return m=Ke.map((function(n){return n.code})),g=Ve.map((function(n){return n.code})),Z=(0,V.Z)((0,V.Z)((0,V.Z)((0,V.Z)({createdAt:new Date(t),products:o,customerAccountId:Ee,staffAccountId:ue,managerAccountId:fe,directorAccountId:me,isPromotionPayment:M},!i&&{reachedPayImmediatelyCodes:m}),!i&&{relatePayLaterPromotionCodes:g}),i&&{isSpecialOrder:i}),i&&{specialDiscountValue:Number(j)}),n.next=11,Nn({variables:{data:Z}});case 11:if(!(y=n.sent).data){n.next=22;break}if(localStorage.removeItem(ie.B),!r){n.next=21;break}return v=y.data.createOrder._id,n.next=18,r(v);case 18:N((0,ee.Ay)()),n.next=22;break;case 21:N((0,ee.mm)());case 22:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();lr=A.permissions.includes(oe.gz.CAN_APPROVE_DEBT_FOR_ORDER)?(0,ce.jsxs)(Wn,{children:["D\u01af N\u1ee2:"," ",(0,ce.jsx)(Tn,{children:Ie})," \u0111"]}):(0,ce.jsxs)(Hn,{children:[(0,ce.jsx)(cn.Z,{label:"G\u1ecdi",onClick:function(){return yn(!0)}}),(0,ce.jsxs)(Gn,{display:Je,ref:We,children:[(0,ce.jsx)(Xn,{onClick:function(){return window.open("tel:0912345678","_self")},children:"Hotline"}),(0,ce.jsx)(Xn,{onClick:function(){return window.open("tel:".concat(Se),"_self")},children:"Nh\xe2n vi\xean ph\u1ee5 tr\xe1ch"})]})]}),er=(0,ce.jsxs)(Vn,{children:[lr,(0,ce.jsx)(an.Z,{label:"T\u1ea0O \u0110\u01a0N",width:"60%",onClick:g(ur)})]})}if(e){var xr=e._id,hr=e.isApprovedDebt,pr=e.isApproved,fr=e.isShippedOut,mr=e.isHandedOver,gr=e.isSpecialOrder,Zr=e.isCanceled,jr=e.isApprovedSpecialOrder,yr=(0,ce.jsxs)(Hn,{children:[(0,ce.jsx)(cn.Z,{label:"G\u1ecdi",onClick:function(){return yn(!0)}}),(0,ce.jsxs)(Yn,{display:Je,ref:We,children:[(0,ce.jsx)(Xn,{onClick:function(){return window.open("tel:0912345678","_self")},children:"Hotline"}),(0,ce.jsx)(Xn,{onClick:function(){return window.open("tel:".concat(Se),"_self")},children:"Nh\xe2n vi\xean ph\u1ee5 tr\xe1ch"})]})]}),vr=(0,ce.jsx)(an.Z,{label:"OK",onClick:function(){return N((0,ee.mm)())}}),Pr=(0,ce.jsxs)(Vn,{children:[yr,vr]}),Or=function(){var n=(0,z.Z)((0,K.Z)().mark((function n(e){var r;return(0,K.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r={orderId:xr},!e){n.next=8;break}return n.next=4,Fn({variables:{data:e,where:r}});case 4:n.sent.data&&N((0,ee.mm)()),n.next=12;break;case 8:return n.next=10,Mn({variables:{where:r}});case 10:n.sent.data&&N((0,ee.mm)());case 12:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),br=function(){var n=(0,z.Z)((0,K.Z)().mark((function n(){var e;return(0,K.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e={orderId:xr},n.next=3,zn({variables:{where:e}});case 3:n.sent.data&&N((0,ee.mm)());case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),Cr=function(){var n=(0,z.Z)((0,K.Z)().mark((function n(){var e;return(0,K.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e={orderId:xr},n.next=3,Jn({variables:{where:e}});case 3:n.sent.data&&N((0,ee.mm)());case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();hr||($e="Ch\u1edd duy\u1ec7t c\xf4ng n\u1ee3",nr=ar,(De||Ne)&&(er=Pr),rr&&(er=(0,ce.jsxs)(Vn,{children:[(0,ce.jsxs)(Wn,{children:["D\u01af N\u1ee2:"," ",(0,ce.jsx)(Tn,{children:Ie})," ","\u0111"]}),(0,ce.jsx)(an.Z,{label:"Duy\u1ec7t",onClick:function(){return Or({isApprovedDebt:!0})}})]})),gr&&!jr&&($e="Ch\u1edd duy\u1ec7t \u0110\u01a1n \u0111\u1eb7c bi\u1ec7t",nr=ir,er=ir?(0,ce.jsx)(un.Z,{label:"Duy\u1ec7t",onClick:br}):null)),hr&&!pr&&($e="Ch\u1edd x\xe1c nh\u1eadn",nr=ar,(De||Ne)&&(er=Pr),tr&&(er=(0,ce.jsx)(un.Z,{label:"X\xe1c nh\u1eadn",onClick:function(){return Or({isApproved:!0})}}))),pr&&!fr&&($e="\u0110\xe3 x\xe1c nh\u1eadn, ch\u1edd xu\u1ea5t kho",nr=dr,or&&(er=(0,ce.jsx)(un.Z,{label:"XU\u1ea4T KHO",onClick:function(){return Or({isShippedOut:!0})}}))),fr&&!mr&&($e="\u0110\xe3 xu\u1ea5t kho, ch\u1edd giao",cr&&(er=(0,ce.jsx)(un.Z,{label:"\u0110\xc3 GIAO",onClick:function(){return Or()}}))),mr&&($e="\u0110\xe3 nh\u1eadn h\xe0ng",sr&&(er=(0,ce.jsxs)(Vn,{children:[(0,ce.jsx)(cn.Z,{label:"\u0110\xd3NG L\u1ea0I",onClick:function(){return N((0,ee.mm)())}}),(0,ce.jsx)(an.Z,{label:"Xo\xe1",onClick:Cr})]}))),Zr&&(nr=!1,$e="\u0110\xe3 hu\u1ef7",sr&&(er=(0,ce.jsxs)(Vn,{children:[(0,ce.jsx)(cn.Z,{label:"\u0110\xd3NG L\u1ea0I",onClick:function(){return N((0,ee.mm)())}}),(0,ce.jsx)(an.Z,{label:"Xo\xe1",onClick:Cr})]})))}var _r=function(n){var e=n.customerDiaryInfo,r=n.orderCustomerDiaryInfo;return!e&&!r||I?(0,ce.jsx)(dn.Z,{discountPromotionItem:n}):(0,ce.jsx)(jn.Z,{discountPromotionItem:n,customerDiaryInfo:e||r})},Er=(0,ce.jsxs)(ce.Fragment,{children:[!!He.length&&!I&&(0,ce.jsx)(Ln,{children:"CKKM tr\u1ea3 sau li\xean quan \u0111\u1ebfn \u0111\u01a1n h\xe0ng:"}),He.map((function(n,e){return(0,ce.jsx)(Y.Fragment,{children:_r(n)},e)}))]});return(0,Y.useEffect)((function(){var n=function(n){We.current&&!We.current.contains(n.target)&&yn(!1)};return document.addEventListener("mousedown",n),function(){document.removeEventListener("mousedown",n)}}),[We]),(0,ce.jsxs)(On,{children:[(0,ce.jsx)("div",{style:{textAlign:"right",margin:"5px 15px 15px"},children:(0,ce.jsx)(on.Z,{label:(0,ce.jsxs)(En,{children:["IN ",(0,ce.jsx)($.Z,{style:{fontSize:18,marginLeft:3}})]})})}),!Ae&&(0,ce.jsxs)(ln.Z,{style:{padding:"15px 10px 15px"},children:[!!e&&(0,ce.jsxs)(En,{children:[(0,ce.jsx)(Rn,{children:(0,hn.dh)(C)}),(0,ce.jsx)(kn,{children:e.code})]}),(0,ce.jsxs)(Cn,{children:[(0,ce.jsx)(_n,{children:"Kh\xe1ch h\xe0ng"}),": ",we," - S\u0110T: ",Re]}),(0,ce.jsxs)(Cn,{children:[(0,ce.jsx)(_n,{children:"\u0110\u1ecba ch\u1ec9"}),": ",ke]}),(0,ce.jsxs)(Cn,{children:[(0,ce.jsx)(_n,{children:"Ph\u1ee5 tr\xe1ch"}),": ",Te]}),e&&(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)("hr",{}),(0,ce.jsxs)(Cn,{children:[(0,ce.jsx)(_n,{children:"Tr\u1ea1ng th\xe1i"}),":"," ",(0,ce.jsx)(Tn,{children:$e})]})]})]}),Ae&&(0,ce.jsx)(pe,{errors:Z,register:p,setValue:f,clearErrors:m,selectedCustomer:In,saleStaffFullName:Te,setSelectedCustomer:wn,isPayDiscountPromotion:M,setIsPayDiscountPromotion:U,setOrderedProducts:pn,isSpecialOrderFromInput:i}),i&&!M&&(0,ce.jsx)(tn.Z,{style:{margin:"20px 5px 50px"},children:(0,ce.jsxs)(bn,{children:[(0,ce.jsx)("p",{children:"Chi\u1ebft kh\u1ea5u \xe1p d\u1ee5ng:"}),(0,ce.jsx)(fn.Z,{min:0,width:"80px",type:"number",textAlign:"right",register:p,name:"specialDiscountValue",isError:!!Z.specialDiscountValue,validations:{min:0,max:100,required:i},errorMessage:"*\u22650% v\xe0 \u2264100%"}),(0,ce.jsx)("p",{children:"\u2002% B\u1ea3ng gi\xe1"})]})}),(0,ce.jsx)(Ln,{children:"\u0110\u01a0N H\xc0NG G\u1ed2M:"}),(0,ce.jsxs)(tn.Z,{style:{margin:"0 5px"},children:[xn.map((function(n,e){return(0,ce.jsx)(xe,{orderId:v,itemIndex:e,productItem:n,viewerQuery:A,updateOrder:Fn,canUpdateOrder:nr,orderedProducts:xn,setOrderedProducts:pn},e)})),Ge.map((function(n,e){return(0,ce.jsx)(xe,{orderId:v,itemIndex:e,productItem:n,isPromotionProduct:!0,viewerQuery:A,updateOrder:Fn,canUpdateOrder:nr,orderedProducts:xn,setOrderedProducts:pn},e)})),nn&&(0,ce.jsx)(he,{orderId:v,updateOrder:Fn,orderedProductCodes:Fe,orderedProducts:xn,setOrderedProducts:pn,setIsAddingProduct:en,isPayDiscountPromotion:M}),nr&&!nn&&(0,ce.jsx)(on.Z,{style:{marginLeft:10},label:"+ Th\xeam s\u1ea3n ph\u1ea9m",onClick:function(){return en(!0)}})]}),(0,ce.jsxs)(tn.Z,{style:{margin:"0 5px"},children:[!M&&!w&&(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsxs)(En,{children:[(0,ce.jsx)("p",{children:"C\u1ed9ng ti\u1ec1n"}),(0,ce.jsxs)(Sn,{children:[ze.toLocaleString()," \u0111"]})]}),!!Xe&&(0,ce.jsxs)(En,{children:[(0,ce.jsx)("p",{children:"Ti\u1ec1n t\u1eb7ng ngay"}),(0,ce.jsxs)("p",{children:[Xe.toLocaleString()," \u0111"]})]}),(0,ce.jsxs)(En,{children:[(0,ce.jsxs)("p",{children:["CK tr\xean H\u0110 (",_e,"%)"]}),(0,ce.jsxs)("p",{children:[Ye," \u0111"]})]}),(0,ce.jsx)("hr",{})]}),(0,ce.jsxs)(En,{children:[(0,ce.jsx)(Rn,{children:"T\u1ed5ng thanh to\xe1n"}),(0,ce.jsxs)(Un,{children:[qe.toLocaleString()," ",(0,ce.jsx)(Kn,{children:"\u0111"})]})]})]}),Er,er]})};fe.defaultProps={};var me=fe}}]);