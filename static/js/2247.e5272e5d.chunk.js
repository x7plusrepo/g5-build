"use strict";(self.webpackChunkproject_g5=self.webpackChunkproject_g5||[]).push([[2247],{2247:function(n,e,t){t.r(e),t.d(e,{default:function(){return G}});var i,o,r,a,c,d,l,s,u,p,x,f,h,g,j,v,Z=t(885),m=t(1413),y=t(2982),T=t(7313),b=t(3222),C=t(2668),S=t(6881),P=t(9829),M=t(6580),k=t(6173),I=t(168),_=t(3115),w=t(1237),E=_.ZP.div(i||(i=(0,I.Z)(["\n  font-size: 12px;\n  padding: 5px 0 0;\n"]))),V=_.ZP.div(o||(o=(0,I.Z)(["\n  margin: 20px 0;\n  background-color: #fff;\n  padding: 15px 10px 10px;\n  box-shadow: 0px 2px 1px -1px rgb(0 0 0 / 20%),\n    0px 1px 1px 0px rgb(0 0 0 / 14%), 0px 1px 3px 0px rgb(0 0 0 / 12%);\n"]))),F=_.ZP.div(r||(r=(0,I.Z)([""]))),O=(_.ZP.div(a||(a=(0,I.Z)(["\n  text-align: right;\n"]))),_.ZP.div(c||(c=(0,I.Z)(["\n  display: flex;\n  margin: 15px auto;\n  width: fit-content;\n  justify-content: center;\n  border: solid 1px ",";\n"])),w.Z.primary),_.ZP.div(d||(d=(0,I.Z)(["\n  padding: 5px;\n  cursor: pointer;\n  text-align: center;\n  color: ",";\n  border-left: 1px solid ",";\n  background-color: ",";\n"])),(function(n){return n.activeColor.textColor}),(function(n){return n.borderLeftColor}),(function(n){return n.activeColor.backgroundColor})),_.ZP.div(l||(l=(0,I.Z)(["\n  margin: 20px 10px;\n  position: relative;\n  background-color: #fff;\n  padding: 15px 10px 10px;\n  box-shadow: 0px 2px 1px -1px rgb(0 0 0 / 20%),\n    0px 1px 1px 0px rgb(0 0 0 / 14%), 0px 1px 3px 0px rgb(0 0 0 / 12%);\n"]))),_.ZP.div(s||(s=(0,I.Z)([""]))),_.ZP.div(u||(u=(0,I.Z)(["\n  display: flex;\n  margin: 5px 0;\n  align-items: center;\n  justify-content: space-between;\n"])))),K=_.ZP.div(p||(p=(0,I.Z)(["\n  text-align: center;\n"]))),L=(_.ZP.div(x||(x=(0,I.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n"]))),_.ZP.p(f||(f=(0,I.Z)(["\n  padding: 0;\n  margin: 5px 0;\n  cursor: pointer;\n  font-size: 13px;\n  font-weight: 600;\n  border-radius: 5px;\n  color: ",";\n"])),w.Z.primary)),A=_.ZP.span(h||(h=(0,I.Z)(["\n  font-weight: 500;\n  font-style: italic;\n  color: ",";\n"])),w.Z.secondary),R=(_.ZP.div(g||(g=(0,I.Z)(["\n  top: 0;\n  right: 10px;\n  color: #777;\n  font-size: 20px;\n  cursor: pointer;\n  width: fit-content;\n  position: absolute;\n"]))),_.ZP.div(j||(j=(0,I.Z)(["\n  top: 20px;\n  right: 10px;\n  padding: 5px 10px;\n  position: absolute;\n  border-radius: 5px;\n  background-color: #fff;\n  display: ",";\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n"])),(function(n){return n.display})),_.ZP.span(v||(v=(0,I.Z)(["\n  margin: 5px;\n  font-size: 12px;\n"]))),t(7123)),B=t(3070),Y=t(2153),z=t(6417),U=(0,T.lazy)((function(){return t.e(6260).then(t.bind(t,6260))})),D=function(n){var e=n.statisticalData,t=void 0===e?[]:e,i=n.setStatisticalInfo,o=(0,b.I0)(),r=t.find((function(n){return n._id.paymentTypeCode===B.ad.TAX_OFFSET})),a=t.find((function(n){return n._id.paymentTypeCode===B.ad.MONEY_TYPE})),c=t.find((function(n){return n._id.paymentTypeCode===B.ad.GIFT_TYPE})),d=t.find((function(n){return n._id.paymentTypeCode===B.ad.PRODUCT_TYPE})),l=r&&r.totalBePaidMoneyValue||0,s=a&&a.totalBePaidMoneyValue||0,u=c&&c.totalBePaidMoneyValue||0,p=d&&d.totalBePaidMoneyValue||0,x=l+s+u+p,f=function(){for(var n=(c||{}).promotionGifts,e=void 0===n?[]:n,t=[],i=function(n){var i=e[n],o=i.description,r=i.moneyValue,a=t.findIndex((function(n){return n.description===o}));if(-1===a)t=[].concat((0,y.Z)(t),[(0,m.Z)((0,m.Z)({},i),{},{totalMoneyValue:r,count:1})]);else{var c=t[a],d=c.count,l=c.totalMoneyValue;t[a].count=d+1,t[a].totalMoneyValue=l+r}},o=0;o<e.length;o++)i(o);return t}(),h=function(){for(var n=(d||{}).promotionProducts,e=(void 0===n?[]:n).flat(),t=[],i=function(n){var i=e[n],o=i.code,r=t.findIndex((function(n){return n.code===o}));if(-1===r)t=[].concat((0,y.Z)(t),[(0,m.Z)((0,m.Z)({},i),{},{count:1})]);else{var a=t[r].count;t[r].count=a+1}},o=0;o<e.length;o++)i(o);return t}();z.Fragment,f.map((function(n,e){return(0,z.jsxs)(O,{children:[(0,z.jsxs)("p",{children:["\u2002+ ",n.description," ",n.count," x"," ",n.moneyValue.toLocaleString()]}),(0,z.jsxs)("p",{children:[n.totalMoneyValue.toLocaleString()," \u0111"]})]},e)})),z.Fragment,h.map((function(n,e){var t;return(0,z.jsxs)(O,{children:[(0,z.jsxs)("p",{children:["\u2002+ ",(0,S.Z)(null===(t=n.productInfo)||void 0===t?void 0:t.name)," ",n.count," x"," ",n.price.toLocaleString()," \u0111"]}),(0,z.jsxs)("p",{children:[(n.price*n.count).toLocaleString()," \u0111"]})]},e)}));return(0,T.useMemo)((function(){i({subTotalTaxOffsetMoneyValue:l,subTotalCashMoneyValue:s,subTotalGiftMoneyValue:u,subTotalProducMoneyValue:p,totalMoneyValue:x})}),[t]),(0,z.jsxs)(V,{children:[(0,z.jsxs)(O,{children:[(0,z.jsx)("p",{children:"T\u1ed5ng gi\xe1 tr\u1ecb"}),(0,z.jsxs)(L,{children:[x.toLocaleString()," ",(0,z.jsx)(A,{children:"\u0111"})]})]}),(0,z.jsxs)(O,{children:[(0,z.jsxs)(K,{children:[(0,z.jsx)("p",{children:"Ti\u1ec1n m\u1eb7t"}),(0,z.jsxs)(L,{onClick:function(){var n={title:"B\xe1o c\xe1o CK/KM ti\u1ec1n m\u1eb7t",children:(0,z.jsx)(T.Suspense,{fallback:(0,z.jsx)(k.default,{}),children:(0,z.jsx)(U,{paymentTypeCode:B.ad.MONEY_TYPE})})};o((0,Y.dn)(n))},children:[s.toLocaleString()," ",(0,z.jsx)(A,{children:"\u0111"})]})]}),(0,z.jsxs)(K,{children:[(0,z.jsx)("p",{children:"Hi\u1ec7n v\u1eadt"}),(0,z.jsxs)(L,{onClick:function(){var n={title:"B\xe1o c\xe1o CK/KM hi\u1ec7n v\u1eadt",children:(0,z.jsx)(T.Suspense,{fallback:(0,z.jsx)(k.default,{}),children:(0,z.jsx)(U,{paymentTypeCode:B.ad.GIFT_TYPE})})};o((0,Y.dn)(n))},children:[u.toLocaleString()," ",(0,z.jsx)(A,{children:"\u0111"})]})]}),(0,z.jsxs)(K,{children:[(0,z.jsx)("p",{children:"S\u1ea3n ph\u1ea9m t\u1eb7ng"}),(0,z.jsxs)(L,{onClick:function(){var n={title:"B\xe1o c\xe1o CK/KM hi\u1ec7n v\u1eadt",children:(0,z.jsx)(T.Suspense,{fallback:(0,z.jsx)(k.default,{}),children:(0,z.jsx)(U,{paymentTypeCode:B.ad.PRODUCT_TYPE})})};o((0,Y.dn)(n))},children:[p.toLocaleString()," ",(0,z.jsx)(A,{children:"\u0111"})]})]}),(0,z.jsxs)(K,{children:[(0,z.jsx)("p",{children:"C\u1ea5n tr\u1eeb thu\u1ebf"}),(0,z.jsxs)(L,{onClick:function(){var n={title:"B\xe1o c\xe1o CK/KM hi\u1ec7n v\u1eadt",children:(0,z.jsx)(T.Suspense,{fallback:(0,z.jsx)(k.default,{}),children:(0,z.jsx)(U,{paymentTypeCode:B.ad.TAX_OFFSET})})};o((0,Y.dn)(n))},children:[l.toLocaleString()," ",(0,z.jsx)(A,{children:"\u0111"})]})]})]})]})},G=function(n){var e=(0,b.I0)(),t=(0,b.v9)((function(n){return n.authReducer})).viewerQuery||{},i=t._id,o=t.roles,r=t.fatherChildrenAccountIds,a=o.includes(B.If.CUSTOMER)||o.includes(B.If.STAFF_OF_CUSTOMER),c=o.includes(B.If.STAFF_OF_CUSTOMER)?r[0]:a?i:void 0,d=(0,T.useState)("2012/01/01"),l=(0,Z.Z)(d,2),s=l[0],u=l[1],p=(0,T.useState)("2100/01/01"),x=(0,Z.Z)(p,2),f=x[0],h=x[1],g=(0,T.useState)(c),j=(0,Z.Z)(g,2),v=j[0],m=j[1],y=(0,T.useState)({}),S=(0,Z.Z)(y,2),I=S[0],_=S[1],w=(0,T.useState)({}),V=(0,Z.Z)(w,2),O=V[0],K=V[1],L=(0,T.useState)(void 0),A=(0,Z.Z)(L,2),G=A[0],N=A[1],X={customerAccountId:v},H=(0,C.a)(R.Kw,{variables:{filter:X},fetchPolicy:"cache-and-network"}).data,Q=H&&H.discountPromotionStatistical||[],q=function(n){var t={title:"B\xe1o c\xe1o CK/KM c\u1ee7a kh\xe1ch h\xe0ng",children:(0,z.jsx)(T.Suspense,{fallback:(0,z.jsx)(k.default,{}),children:(0,z.jsx)(U,{initCustomerAccount:n})})};e((0,Y.dn)(t))},J=v?(0,z.jsx)(U,{endOfTimeRange:f,statisticalInfo:O,setPrintSection:N,selectedCustomer:I,startOfTimeRange:s,customerAccountId:v}):(0,z.jsx)(M.Z,{onClickCustomerItem:q});return(0,z.jsx)(E,{children:(0,z.jsxs)(F,{children:[(0,z.jsx)(P.Z,{canSearchCustomer:!0,searchPlaceholder:"T\u1ea5t c\u1ea3",printSection:G,inputEndTime:f,inputStartTime:s,setInputEndTime:h,setInputStartTime:u,onClickSelectResultItem:function(n){var e=(n&&n.node)._id;m(e),u("2012/01/01"),h("2100/01/01"),_(n&&n.node)}}),(0,z.jsx)(D,{statisticalData:Q,setStatisticalInfo:K}),J]})})}},6881:function(n,e,t){var i=t(2101);e.Z=function(n){if(Array.isArray(n)){var e,t=n||[],o=i.t.getState().commonReducer,r=o&&(null===(e=o.activeLanguage)||void 0===e?void 0:e.locale)||"vi";return(t.find((function(n){return n&&n.locale===r}))||{}).showText||""}return""}}}]);