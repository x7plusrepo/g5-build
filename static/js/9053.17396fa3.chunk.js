"use strict";(self.webpackChunkproject_g5=self.webpackChunkproject_g5||[]).push([[9053],{9146:function(n,e,t){t.d(e,{Z:function(){return u}});var r,i=t(1413),a=(t(7313),t(168)),o=t(3115),s=t(1237),d=o.ZP.button(r||(r=(0,a.Z)(["\n  left: 0;\n  bottom: 0;\n  z-index: 1;\n  width: 100%;\n  color: #fff;\n  border: none;\n  display: flex;\n  padding: 10px;\n  position: fixed;\n  cursor: pointer;\n  font-size: 13px;\n  font-weight: 600;\n  padding: 15px 20px;\n  align-items: center;\n  text-transform: uppercase;\n  justify-content: space-around;\n  background-color: ",";\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n"])),s.Z.rgbaBlack),l=t(6417),c=function(n){var e=n.label;return(0,l.jsx)(d,(0,i.Z)((0,i.Z)({},n),{},{children:e}))};c.defaultProps={label:"N\xfat b\u1ea5m"};var u=c},5236:function(n,e,t){t.r(e),t.d(e,{default:function(){return $}});var r,i,a,o,s,d,l,c,u,h,p,x=t(4165),g=t(1413),f=t(5861),m=t(885),Z=t(2982),v=t(7313),w=t(5627),b=t(3222),j=t(2668),y=t(790),P=t(1359),S=t(1677),k=t(5222),I=t(9673),C=t(9146),A=t(7532),E=t(7119),N=t(168),R=t(3115),T=t(1237),q=R.ZP.div(r||(r=(0,N.Z)(["\n  font-size: 12px;\n  padding: 10px 5px 120px;\n"]))),z=R.ZP.div(i||(i=(0,N.Z)(["\n  display: flex;\n  align-items: center;\n  margin: 10px 0 15px;\n"]))),O=R.ZP.div(a||(a=(0,N.Z)(["\n  display: flex;\n  margin: 10px 0;\n  align-items: center;\n  justify-content: space-between;\n"]))),M=R.ZP.div(o||(o=(0,N.Z)(["\n  margin: ",";\n  width: ",";\n"])),(function(n){return n.margin}),(function(n){return n.width?n.width+"px":"100px"})),U=(R.ZP.input(s||(s=(0,N.Z)(["\n  // width: 60%;\n"]))),R.ZP.div(d||(d=(0,N.Z)(["\n  // display: flex;\n  // flex-wrap: wrap;\n"]))),R.ZP.div(l||(l=(0,N.Z)(["\n  margin: 0 0 10px;\n  border-radius: 4px;\n  padding: 3px 5px 3px 10px;\n  background-color: ",";\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n"])),T.Z.white)),B=R.ZP.div(c||(c=(0,N.Z)(["\n  display: flex;\n  margin: 18px 0;\n  align-items: start;\n"]))),D=R.ZP.span(u||(u=(0,N.Z)(["\n  color: ",";\n  font-weight: ",";\n"])),(function(n){return n.color}),(function(n){return n.fontWeight})),_=R.ZP.p(h||(h=(0,N.Z)(["\n  font-weight: 700;\n  text-transform: uppercase;\n  color: ",";\n"])),T.Z.lightBlack),G=R.ZP.p(p||(p=(0,N.Z)(["\n  font-weight: 700;\n"]))),L=t(3454),V=t(7123),F=t(2153),H=t(5164),Q=t(3070),W=t(6417),Y=function(n){var e=n.itemIndex,t=n.permissionItem,r=n.slectedPermissions,i=n.setSelectedPermissions,a=t.code,o=t.label,s=t.isDanger,d=e>9?e:"0".concat(e),l=r.includes(a);s&&T.Z.red;return(0,W.jsxs)(B,{children:[(0,W.jsxs)("span",{children:[d,"."]}),(0,W.jsx)("input",{value:a,type:"checkbox",checked:l,onChange:function(n){var e=n.target.checked,t=n.target.value;if(e){var a=[].concat((0,Z.Z)(r),[t]);i(a)}else{var o=r.filter((function(n){return n!==t}));i(o)}},style:{margin:"2px 3px 0"}}),(0,W.jsxs)(D,{children:[o,s&&" (*)"]})]})},$=function(n){var e=(0,w.cI)({defaultValues:{}}),t=e.register,r=e.setValue,i=e.handleSubmit,a=e.formState.errors,o=(0,b.I0)(),s=(0,b.v9)((function(n){return n.authReducer})).viewerQuery.roles.includes(Q.If.SYSTEM),d=(0,v.useState)(void 0),l=(0,m.Z)(d,2),c=l[0],u=l[1],h=(0,v.useState)([]),p=(0,m.Z)(h,2),Z=p[0],N=p[1],R=(0,v.useState)(""),T=(0,m.Z)(R,2),B=T[0],D=T[1],$=(0,v.useState)(!1),J=(0,m.Z)($,2),K=J[0],X=J[1],nn=K?"B\u1ecf ch\u1ecdn t\u1ea5t c\u1ea3":"Ch\u1ecdn t\u1ea5t c\u1ea3";(0,j.a)(V.Y8,{onCompleted:function(n){return an(n.isCreatingFirstAccount)}});var en=(0,v.useState)(!1),tn=(0,m.Z)(en,2),rn=tn[0],an=tn[1],on=(0,y.D)(L.cG,{onError:function(){setTimeout((function(){o((0,H.S4)())}),500);var n={title:"L\u1ed7i",children:(0,W.jsx)("p",{children:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i \u0111\xe3 c\xf3 ng\u01b0\u1eddi \u0111\u0103ng k\xfd ho\u1eb7c m\xe1y ch\u1ee7 \u0111ang b\u1ea3o tr\xec. Vui l\xf2ng li\xean h\u1ec7 qu\u1ea3n tr\u1ecb h\u1ec7 th\u1ed1ng!"})};o((0,F.om)(n))},refetchQueries:[{query:V.q6},"GET_ACCOUNTS"]}),sn=(0,m.Z)(on,1)[0],dn=c?(0,W.jsxs)(O,{style:{width:"100%"},children:[(0,W.jsxs)(G,{children:[c.fullName," - ",c.phoneNumber]}),(0,W.jsx)(S.Z,{label:"\u0110\u1ed5i",onClick:function(){u(void 0),r("managerAccount",void 0)}})]}):(0,W.jsx)(P.Z,{isSelectOne:!0,notBeCustomer:!0,isError:!!a.managerAccount,onClickSelectResultItem:function(n){u(n.node),r("managerAccount",n.node)}}),ln=function(){var n=(0,f.Z)((0,x.Z)().mark((function n(e){var t,r,i,a,s,d,l,c,u,h,p,f;return(0,x.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o((0,H.S$)()),t=e.idCode,r=e.password,i=e.phoneNumber,a=e.fullName,s=e.managerAccount,l=(d=s||{})._id,c=d.roles,u=d.managerAccountId,h=c&&c.includes(Q.If.MANAGER),p=(0,g.Z)((0,g.Z)((0,g.Z)((0,g.Z)({idCode:t,phoneNumber:i,password:r,fullName:a,roles:[],permissions:Z},B&&{avatarImage:B}),s&&{shouldUpdateManagerRole:!h}),s&&{managerAccountId:l}),s&&{directorAccountId:u}),n.next=7,sn({variables:{data:p}});case 7:n.sent.data&&(setTimeout((function(){o((0,H.S4)())}),500),f={title:"Th\xeam nh\xe2n vi\xean",children:(0,W.jsx)("p",{children:"Th\xeam nh\xe2n vi\xean th\xe0nh c\xf4ng!"})},o((0,F.om)(f)),o((0,F.mm)()));case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),cn=E.ZP.map((function(n,e){var t=function(){for(var n=1,t=0;t<e;t++)n+=E.ZP[t].length;return n}();return(0,W.jsx)(U,{children:n.map((function(n,e){return(0,W.jsx)(Y,{itemIndex:t+e,permissionItem:n,slectedPermissions:Z,setSelectedPermissions:N},e)}))},e)}));return(0,W.jsxs)(q,{children:[(0,W.jsxs)(k.Z,{children:[(0,W.jsxs)(z,{children:[(0,W.jsx)(I.Z,{margin:"0",width:"40%",name:"idCode",register:t,isError:!!a.idCode,validations:{required:!0},placeholder:"M\xe3 nh\xe2n vi\xean"}),(0,W.jsx)(I.Z,{name:"fullName",register:t,margin:"5px 0 5px 20px",isError:!!a.fullName,validations:{required:!0},placeholder:"T\xean nh\xe2n vi\xean"})]}),(0,W.jsxs)(z,{children:[(0,W.jsx)(I.Z,{name:"phoneNumber",register:t,isError:!!a.phoneNumber,validations:{required:!0,pattern:{value:/^[0-9]{10}$/}},margin:"5px 10px 0 0",placeholder:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i",errorMessage:"*Ch\u1ec9 g\u1ed3m 10 s\u1ed1"}),(0,W.jsx)(I.Z,{type:"password",name:"password",register:t,isError:!!a.password,validations:{required:!0},placeholder:"M\u1eadt kh\u1ea9u",margin:"5px 0 0 10px"})]}),(0,W.jsxs)(z,{style:{alignItems:"flex-start"},children:[(0,W.jsx)("div",{style:{marginTop:10},children:(0,W.jsx)(M,{children:"\u1ea2nh \u0111\u1ea1i di\u1ec7n:"})}),(0,W.jsx)(A.Z,{setResizedImageUri:D})]}),!rn&&!s&&(0,W.jsxs)(z,{children:[(0,W.jsx)(M,{width:120,children:"Ng\u01b0\u1eddi qu\u1ea3n l\xfd:"}),dn]})]}),(0,W.jsxs)(O,{children:[(0,W.jsx)(_,{children:"Ph\xe2n quy\u1ec1n cho t\xe0i kho\u1ea3n"}),(0,W.jsx)(S.Z,{label:nn,onClick:function(){var n=!K;X(n),N(n?Object.values(E.gz):[])}})]}),cn,(0,W.jsx)(C.Z,{label:"T\u1ea1o t\xe0i kho\u1ea3n",onClick:i(ln)})]})}},2180:function(n,e,t){t.d(e,{Z:function(){return s}});t(7313);var r,i=t(168),a=t(3115).ZP.p(r||(r=(0,i.Z)(["\n  font-size: 13px;\n  font-weight: 500;\n"]))),o=t(6417),s=function(n){var e=n.label;return(0,o.jsx)(a,{children:e})}},9673:function(n,e,t){t.d(e,{Z:function(){return g}});var r,i,a=t(1413),o=(t(7313),t(2180)),s=t(6947),d=t(168),l=t(3115),c=t(1237),u=l.ZP.div(r||(r=(0,d.Z)(["\n  height: 26px;\n  display: inline-block;\n  width: ",";\n  margin: ",";\n"])),(function(n){return n.width?n.width:"100%"}),(function(n){return n.margin?n.margin:"0 0 0 5px"})),h=l.ZP.input(i||(i=(0,d.Z)(["\n  width: 100%;\n  border: none;\n  font-size: 12px;\n  font-weight: 300;\n  padding: ",";\n  line-height: ",";\n  background-color: ",";\n  border-bottom: 1px solid ",";\n  font-style: ",";\n  text-align: ",";\n  &:hover {\n    box-shadow: none;\n  }\n  &:focus {\n    box-shadow: none;\n  }\n  &:focus-visible {\n    outline: none;\n    box-shadow: none;\n  }\n"])),(function(n){return n.padding}),(function(n){return n.lineHeight}),c.Z.lightWhite,c.Z.secondary,(function(n){return n.fontStyle?n.fontStyle:""}),(function(n){return n.textAlign?n.textAlign:"left"})),p=t(6417),x=function(n){var e=n.label,t=n.name,r=n.isError,i=n.errorMessage,d=n.register,l=n.validations,c=n.isInline,x=n.width,g=n.margin,f=c?"auto":x;return(0,p.jsxs)(u,{width:f,margin:g,children:[e&&(0,p.jsx)(o.Z,{label:e}),(0,p.jsx)(h,(0,a.Z)((0,a.Z)({},d(t,l)),n)),(0,p.jsx)(s.Z,{isError:r,errorMessage:i})]})};x.defaultProps={type:"text",validations:{},padding:"2px 5px",register:function(){},lineHeight:"20px"};var g=x},7532:function(n,e,t){t.d(e,{Z:function(){return g}});var r,i,a,o=t(885),s=t(7313),d=t(168),l=t(3115),c=l.ZP.div(r||(r=(0,d.Z)(["\n  padding: ",";\n"])),(function(n){return n.padding})),u=l.ZP.input(i||(i=(0,d.Z)(["\n  width: 100%;\n"]))),h=l.ZP.img(a||(a=(0,d.Z)(["\n  display: block;\n  margin: 10px 0 0;\n"]))),p=t(6417),x=function(n){var e=n.padding,t=n.maxPixel,r=n.setResizedImageUri,i=(0,s.useRef)(null),a=(0,s.useState)(""),d=(0,o.Z)(a,2),l=d[0],x=d[1];return(0,p.jsxs)(c,{padding:e,children:[(0,p.jsx)(u,{type:"file",ref:i,placeholder:"Ch\u1ecdn \u1ea3nh",onChange:function(n){var e=new FileReader,i=new Image,a=document.getElementById("canvas"),o=a.getContext("2d");n.target.files[0]&&(e.readAsDataURL(n.target.files[0]),e.onload=function(n){i.src=n.target.result},i.onload=function(){a.width=t,a.height=a.width*(i.height/i.width);var n=document.createElement("canvas"),e=n.getContext("2d");n.width=a.width,n.height=a.height,e.drawImage(i,0,0,n.width,n.height),o.drawImage(n,0,0,n.width,n.height,0,0,n.width,n.height);var s=a.toDataURL("image/webp");x(s),r(s)})}}),(0,p.jsx)("canvas",{id:"canvas",style:{display:"none"}}),(0,p.jsx)(h,{src:l})]})};x.defaultProps={maxPixel:500,padding:"10px 10px 0",setResizedImageUri:function(){}};var g=x},5987:function(n,e,t){t.d(e,{Z:function(){return i}});var r=t(3366);function i(n,e){if(null==n)return{};var t,i,a=(0,r.Z)(n,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)t=o[i],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(n,t)&&(a[t]=n[t])}return a}}}]);