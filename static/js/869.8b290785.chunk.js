"use strict";(self.webpackChunkproject_g5=self.webpackChunkproject_g5||[]).push([[869,6069],{869:function(e,n,t){t.r(n),t.d(n,{default:function(){return ye}});var r,a,o,i,c,u=t(4165),s=t(1413),l=t(5861),d=t(885),f=t(7313),h=t(3222),g=t(790),b=t(2668),p=t(4689),m=t(372),x=t(6173),v=t(6069),_=t(3454),S=t(7123),C=t(3163),E=t(2153),y=t(4695),Z=t(3070),k=t(168),w=t(3115),T=t(1237),N=w.ZP.div(r||(r=(0,k.Z)(["\n  width: 100%;\n  padding: 7px 0;\n  font-size: 12px;\n  justify-content: space-between;\n"]))),j=w.ZP.div(a||(a=(0,k.Z)(["\n  display: flex;\n  flex-wrap: wrap;\n"]))),A=w.ZP.div(o||(o=(0,k.Z)(["\n  height: 0.5px;\n  margin: 7px auto;\n  width: ","%;\n  background-color: ",";\n"])),2/3*100,T.Z.white),M=w.ZP.div(i||(i=(0,k.Z)(["\n  width: 50%;\n  cursor: pointer;\n  text-align: center;\n  color: ",";\n"])),T.Z.primary),P=w.ZP.div(c||(c=(0,k.Z)(["\n  margin: 7px;\n  padding: 4px;\n  display: flex;\n  align-items: center;\n  border-radius: 20px;\n  justify-content: center;\n  background-color: ",";\n"])),T.Z.white),I=t(7119),O=t(6417),R=(0,f.lazy)((function(){return Promise.all([t.e(5627),t.e(7155),t.e(2372)]).then(t.bind(t,6066))})),z=(0,f.lazy)((function(){return Promise.all([t.e(5627),t.e(362)]).then(t.bind(t,487))})),D=(0,f.lazy)((function(){return Promise.all([t.e(5627),t.e(9053)]).then(t.bind(t,5236))})),W=(0,f.lazy)((function(){return Promise.all([t.e(5627),t.e(1879),t.e(2260),t.e(4014)]).then(t.bind(t,3788))})),F=(0,f.lazy)((function(){return Promise.all([t.e(5627),t.e(1879),t.e(3997)]).then(t.bind(t,1625))})),L=(0,f.lazy)((function(){return Promise.all([t.e(5627),t.e(1879),t.e(9526),t.e(9826)]).then(t.bind(t,9826))})),U=(0,f.lazy)((function(){return Promise.all([t.e(5627),t.e(7155),t.e(145)]).then(t.bind(t,9724))})),B=(0,f.lazy)((function(){return Promise.all([t.e(5627),t.e(9526),t.e(1020),t.e(3961)]).then(t.bind(t,653))})),V=(0,f.lazy)((function(){return Promise.all([t.e(5627),t.e(9603)]).then(t.bind(t,2655))})),Q=(0,f.lazy)((function(){return Promise.all([t.e(5030),t.e(4305)]).then(t.bind(t,7495))})),Y=(0,f.lazy)((function(){return Promise.all([t.e(5627),t.e(1879),t.e(1349),t.e(4641)]).then(t.bind(t,9808))})),H=(0,f.lazy)((function(){return Promise.all([t.e(5627),t.e(6663)]).then(t.bind(t,8206))})),G=(0,f.lazy)((function(){return t.e(4816).then(t.bind(t,4816))})),J=(0,f.lazy)((function(){return t.e(9860).then(t.bind(t,9860))})),K=(0,f.lazy)((function(){return Promise.all([t.e(5627),t.e(2986)]).then(t.bind(t,2986))})),q=(0,f.lazy)((function(){return Promise.all([t.e(4660),t.e(2516)]).then(t.bind(t,8382))})),X=(0,f.lazy)((function(){return Promise.all([t.e(5627),t.e(6335),t.e(7396)]).then(t.bind(t,5903))})),$=(0,f.lazy)((function(){return Promise.all([t.e(5627),t.e(6613)]).then(t.bind(t,7062))})),ee=(0,f.lazy)((function(){return Promise.all([t.e(5627),t.e(3222),t.e(1879),t.e(468),t.e(5632),t.e(5702)]).then(t.bind(t,7715))})),ne=(0,f.lazy)((function(){return t.e(3938).then(t.bind(t,3938))})),te="create_notification",re="staff_list",ae="create_internal_staff",oe="create_customer",ie="create_purchase_order",ce="create_special_order",ue="return_products",se="import_product",le="destroy_damaged_product",de="create_product",fe="create_receipt",he="view_debt",ge="create_discount_promotion",be="change_password",pe="change_staff_work_area",me="inventory_balance",xe="customer_list",ve="leads_list",_e="create_new_lead",Se="create_conversation",Ce="logout",Ee=function(e){var n=e.itemIndex,t=e.toolItems,r=e.isCustomer,a=e.mainBottomTabs,o=e.setActiveMainBottomTab,i=e.setIsOpenedBottomMenu,c=(0,h.I0)(),b=(0,g.D)(_.Nv),p=(0,d.Z)(b,1)[0],m=(0,g.D)(_.eQ),v=(0,d.Z)(m,1)[0],S=function(e){var n=r?(0,O.jsx)(ne,{}):(0,O.jsx)(ee,{orderProducts:[]});switch(e){case te:return(0,O.jsx)(f.Suspense,{fallback:(0,O.jsx)(x.default,{}),children:(0,O.jsx)(R,{})});case re:return(0,O.jsx)(f.Suspense,{fallback:(0,O.jsx)(x.default,{}),children:(0,O.jsx)(K,{})});case ae:return(0,O.jsx)(f.Suspense,{fallback:(0,O.jsx)(x.default,{}),children:(0,O.jsx)(D,{})});case oe:return(0,O.jsx)(f.Suspense,{fallback:(0,O.jsx)(x.default,{}),children:(0,O.jsx)(z,{})});case ie:return(0,O.jsx)(f.Suspense,{fallback:(0,O.jsx)(x.default,{}),children:n});case ce:return(0,O.jsx)(f.Suspense,{fallback:(0,O.jsx)(x.default,{}),children:(0,O.jsx)(ee,{isSpecialOrder:!0,orderProducts:[]})});case ue:return(0,O.jsx)(f.Suspense,{fallback:(0,O.jsx)(x.default,{}),children:(0,O.jsx)(W,{})});case se:return(0,O.jsx)(f.Suspense,{fallback:(0,O.jsx)(x.default,{}),children:(0,O.jsx)(F,{})});case le:return(0,O.jsx)(f.Suspense,{fallback:(0,O.jsx)(x.default,{}),children:(0,O.jsx)(L,{})});case de:return(0,O.jsx)(f.Suspense,{fallback:(0,O.jsx)(x.default,{}),children:(0,O.jsx)(U,{})});case me:return(0,O.jsx)(f.Suspense,{fallback:(0,O.jsx)(x.default,{}),children:(0,O.jsx)(B,{})});case fe:return(0,O.jsx)(f.Suspense,{fallback:(0,O.jsx)(x.default,{}),children:(0,O.jsx)(V,{})});case he:return(0,O.jsx)(f.Suspense,{fallback:(0,O.jsx)(x.default,{}),children:(0,O.jsx)(Q,{})});case ge:return(0,O.jsx)(f.Suspense,{fallback:(0,O.jsx)(x.default,{}),children:(0,O.jsx)(Y,{})});case be:return(0,O.jsx)(f.Suspense,{fallback:(0,O.jsx)(x.default,{}),children:(0,O.jsx)(H,{})});case pe:return(0,O.jsx)(f.Suspense,{fallback:(0,O.jsx)(x.default,{}),children:(0,O.jsx)(G,{})});case xe:return(0,O.jsx)(f.Suspense,{fallback:(0,O.jsx)(x.default,{}),children:(0,O.jsx)(J,{})});case ve:return(0,O.jsx)(f.Suspense,{fallback:(0,O.jsx)(x.default,{}),children:(0,O.jsx)(q,{})});case _e:return(0,O.jsx)(f.Suspense,{children:(0,O.jsx)(X,{})});case Se:return(0,O.jsx)(f.Suspense,{children:(0,O.jsx)($,{})});default:return null}},C=function(){var e=(0,l.Z)((0,u.Z)().mark((function e(n){var t,r,l,d,h,g,b,m;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.label,r=n.code,i(!1),l=r===he,d=r===me,!(r===Ce)){e.next=14;break}return e.next=8,p();case 8:localStorage.removeItem(Z.B),h={viewerQuery:{},isAuthenticated:!1},c((0,y.CD)(h)),window.location.reload(),e.next=25;break;case 14:if(!l){e.next=19;break}g=a.findIndex((function(e){return"debts"===e.code})),o(a[g]),e.next=25;break;case 19:if(!d){e.next=23;break}return b=function(){v({variables:{data:{isStockChecking:!1}}})},e.next=23,v({variables:{data:{isStartStockChecking:!0}}});case 23:m=(0,s.Z)((0,s.Z)({title:t},!!b&&{customCloseAction:b}),{},{children:(0,O.jsx)(f.Suspense,{fallback:(0,O.jsx)(x.default,{}),children:S(r)})}),c((0,E.dn)(m));case 25:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),k=function(e){return null!==e&&void 0!==e&&e.children?(0,O.jsx)(M,{children:null===e||void 0===e?void 0:e.children}):e?(0,O.jsx)(M,{onClick:function(){return C(e)},children:(0,O.jsx)(P,{children:e&&e.label})}):null};return(0,O.jsxs)(j,{children:[n>0&&(0,O.jsx)(A,{}),t.map((function(e,n){return(0,O.jsx)(f.Fragment,{children:k(e)},n)}))]})},ye=function(e){var n=e.mainBottomTabs,t=e.setActiveMainBottomTab,r=e.setIsOpenedBottomMenu,a=I.gz.CAN_CREATE_NORMAL_SPECIAL_ORDER_FOR_ANYONE,o=I.gz.CAN_CREATE_ORDER_FOR_OWN_CUSTOMERS,i=I.gz.CAN_CREATE_SPECIAL_ORDER_FOR_OWN_AREA,c=I.gz.CRUD_PRODUCT,x=I.gz.IMPORT_RETURN_PRODUCT,E=I.gz.CAN_EXCUTE_WAREHOUSE_BALANCE,y=I.gz.DESTROY_PRODUCT,k=I.gz.CREATE_NOTIFICATION,w=I.gz.CAN_CREATE_CUSTOMER,T=I.gz.CAN_CREATE_STAFF,j=I.gz.CAN_CHANGE_STAFF_WORK_AREA,A=I.gz.CAN_CREATE_DISCOUNT_PROMOTION,M=I.gz.CAN_VIEW_OWN_CUSTOMER_LIST,R=I.gz.CAN_VIEW_ALL_CUSTOMERS_LIST,z=I.gz.CAN_VIEW_ALL_STAFFS,D=I.gz.CAN_VIEW_OWN_STAFF_LIST,W=I.gz.CAN_VIEW_ALL_LEADS_LIST,F=I.gz.CAN_VIEW_OWN_LEADS_LIST,L=I.gz.CAN_CREATE_LEAD,U=I.gz.CAN_CREATE_CONVERSATION,B=I.gz.CAN_VIEW_OWN_DEBTS,V=I.gz.CAN_VIEW_ALL_DEBTS,Q=I.gz.CAN_CREATE_RECEIPT_FOR_ANY_CUSTOMER,Y=I.gz.CAN_CREATE_RECEIPT_FOR_OWN_CUSTOMER,H=((0,v.SB)(),(0,h.v9)((function(e){return e.authReducer})).viewerQuery||{}),G=H._id,J=H.roles,K=void 0===J?[]:J,q=H.permissions,X=void 0===q?[]:q,$=H.customerStaffPermissions,ee=void 0===$?[]:$,ne=H.subscribedNewsPush,ye=H.subscribedSystemPush,Ze=(0,b.a)(S.bV,{fetchPolicy:"cache-and-network"}),ke=Ze.data,we=Ze.subscribeToMore,Te=(ke&&ke.global||{}).isStockChecking,Ne=K.includes(Z.If.CUSTOMER)||K.includes(Z.If.STAFF_OF_CUSTOMER),je=K.includes(Z.If.SYSTEM),Ae=ee.length?ee.includes(I.Fl.CREATE_AND_MANAGE_ORDERS):X.some((function(e){return e===o||e===a})),Me=X.some((function(e){return e===a||e===i})),Pe=X.some((function(e){return e===Y||e===Q})),Ie=X.includes(x),Oe=X.includes(x),Re=X.includes(c),ze=X.includes(y),De=X.includes(E),We=X.includes(k),Fe=X.some((function(e){return e===M||e===R})),Le=X.includes(w),Ue=X.some((function(e){return e===D||e===z})),Be=X.includes(T),Ve=X.includes(j),Qe=X.some((function(e){return e===W||e===F})),Ye=X.includes(L),He=X.includes(U),Ge=X.includes(A),Je=X.some((function(e){return e===B||e===V})),Ke=(0,f.useState)(!1),qe=(0,d.Z)(Ke,2),Xe=qe[0],$e=qe[1],en=(0,f.useState)(!1),nn=(0,d.Z)(en,2),tn=nn[0],rn=nn[1],an=(0,f.useState)(!0),on=(0,d.Z)(an,2),cn=on[0],un=on[1],sn=(0,g.D)(_.$E),ln=(0,d.Z)(sn,1)[0],dn=function(){var e=(0,l.Z)((0,u.Z)().mark((function e(){var n,t,r,a;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Notification.requestPermission();case 2:if("denied"!==(n=e.sent)){e.next=6;break}return console.error("The user explicitly denied the permission request."),e.abrupt("return");case 6:return"granted"===n&&console.info("The user accepted the permission request."),e.next=9,navigator.serviceWorker.getRegistration();case 9:return t=e.sent,e.next=12,t.pushManager.getSubscription();case 12:if(!(r=e.sent)||!Xe){e.next=16;break}return console.info("User is already subscribed."),e.abrupt("return");case 16:return e.next=18,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:(0,v.EJ)("BLw43wcbE_9PstDuQ2XoCKxLZuf4jO9QtV_UVrnMS2HV6XIgyPMU1hkkA86AF1NfEM6pEbIsUHaqGy1JXDeApV4")});case 18:return a=e.sent,e.next=21,ln({variables:{data:(0,s.Z)({subscribedNewsPush:!0},!r&&{subscribeJson:JSON.stringify(a)}),where:{accountId:G}}});case 21:e.sent.data&&$e(!0);case 23:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),fn=function(){var e=(0,l.Z)((0,u.Z)().mark((function e(){var n,t;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.serviceWorker.getRegistration();case 2:return n=e.sent,e.next=5,n.pushManager.getSubscription();case 5:return t=e.sent,e.next=8,ln({variables:{data:(0,s.Z)({subscribedNewsPush:!1},!tn&&{unsubscribeJson:JSON.stringify(t)}),where:{accountId:G}}});case 8:if(!e.sent.data){e.next=16;break}if($e(!1),tn){e.next=16;break}return e.next=14,t.unsubscribe();case 14:e.sent&&console.info("Successfully unsubscribed from push notifications.");case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),hn=Xe?(0,O.jsxs)(P,{onClick:fn,children:[(0,O.jsx)(p.Z,{fontSize:"small"}),"\u2002Hu\u1ef7 th\xf4ng b\xe1o tin t\u1ee9c"]}):(0,O.jsxs)(P,{onClick:dn,children:[(0,O.jsx)(m.Z,{fontSize:"small"}),"\u2002Th\xf4ng b\xe1o tin t\u1ee9c"]}),gn=function(){var e=(0,l.Z)((0,u.Z)().mark((function e(){var n,t,r,a;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Notification.requestPermission();case 2:if("denied"!==(n=e.sent)){e.next=6;break}return console.error("The user explicitly denied the permission request."),e.abrupt("return");case 6:return"granted"===n&&console.info("The user accepted the permission request."),e.next=9,navigator.serviceWorker.getRegistration();case 9:return t=e.sent,e.next=12,t.pushManager.getSubscription();case 12:if(!(r=e.sent)||!tn){e.next=16;break}return console.info("User is already subscribed."),e.abrupt("return");case 16:return e.next=18,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:(0,v.EJ)("BLw43wcbE_9PstDuQ2XoCKxLZuf4jO9QtV_UVrnMS2HV6XIgyPMU1hkkA86AF1NfEM6pEbIsUHaqGy1JXDeApV4")});case 18:return a=e.sent,e.next=21,ln({variables:{data:(0,s.Z)({subscribedSystemPush:!0},!r&&{subscribeJson:JSON.stringify(a)}),where:{accountId:G}}});case 21:e.sent.data&&rn(!0);case 23:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),bn=function(){var e=(0,l.Z)((0,u.Z)().mark((function e(){var n,t;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.serviceWorker.getRegistration();case 2:return n=e.sent,e.next=5,n.pushManager.getSubscription();case 5:return t=e.sent,e.next=8,ln({variables:{data:(0,s.Z)({subscribedSystemPush:!1},!Xe&&{unsubscribeJson:JSON.stringify(t)}),where:{accountId:G}}});case 8:if(!e.sent.data){e.next=16;break}if(rn(!1),Xe){e.next=16;break}return e.next=14,t.unsubscribe();case 14:e.sent&&console.info("Successfully unsubscribed from push notifications.");case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),pn=tn?(0,O.jsxs)(P,{onClick:bn,children:[(0,O.jsx)(p.Z,{fontSize:"small"}),"\u2002Hu\u1ef7 t.b\xe1o h\u1ec7 th\u1ed1ng"]}):(0,O.jsxs)(P,{onClick:gn,children:[(0,O.jsx)(m.Z,{fontSize:"small"}),"\u2002Th\xf4ng b\xe1o h\u1ec7 th\u1ed1ng"]}),mn=[[!je&&cn?{children:hn}:void 0,!je&&cn?{children:pn}:void 0,We?{code:te,label:"+ Th\xf4ng b\xe1o m\u1edbi"}:void 0],[Ae?{code:ie,label:"+ \u0110\u1eb7t h\xe0ng"}:void 0,Me?{code:ce,label:"+ \u0110\u01a1n \u0111\u1eb7c bi\u1ec7t"}:void 0,Ge?{code:ge,label:"+ T\u1ea1o CKKM"}:void 0],[Ie?{code:se,label:"+ Nh\u1eadp h\xe0ng"}:void 0,Oe?{code:ue,label:"+ Nh\u1eadp l\u1ea1i h\xe0ng"}:void 0,Re?{code:de,label:"+ S\u1ea3n ph\u1ea9m m\u1edbi"}:void 0,ze?{code:le,label:"+ Hu\u1ef7 h\xe0ng h\u1ecfng"}:void 0,De&&!Te?{code:me,label:"+ Ki\u1ec3m kho"}:void 0],[Fe?{code:xe,label:"Danh s\xe1ch kh\xe1ch h\xe0ng"}:void 0,Le?{code:oe,label:"+ Th\xeam Kh\xe1ch h\xe0ng"}:void 0,Ve?{code:pe,label:"Chuy\u1ec3n v\xf9ng"}:void 0],[Qe?{code:ve,label:"Danh s\xe1ch Leads"}:void 0,Ye?{code:_e,label:"+ Th\xeam Lead"}:void 0,He?{code:Se,label:"+ Th\xeam cu\u1ed9c g\u1eb7p"}:void 0],[Ue?{code:re,label:"Danh s\xe1ch nh\xe2n vi\xean"}:void 0,Be?{code:ae,label:"+ Th\xeam Nh\xe2n vi\xean"}:void 0],[Je?{code:he,label:"C\xf4ng n\u1ee3"}:void 0,Pe?{code:fe,label:"+ Thu ti\u1ec1n"}:void 0],[{code:be,label:"\u0110\u1ed5i m\u1eadt kh\u1ea9u"},{code:Ce,label:"\u0110\u0103ng xu\u1ea5t"}]];return(0,f.useEffect)((function(){var e=function(){var e=(0,l.Z)((0,u.Z)().mark((function e(){var n,t,r;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=navigator.userAgent||window.opera,t=n.toLowerCase(),!/iPad|iPhone|iPod/.test(n)||window.MSStream){e.next=5;break}return un(!1),e.abrupt("return");case 5:if(-1===t.indexOf("safari")||-1!==t.indexOf("chrome")){e.next=8;break}return un(!1),e.abrupt("return");case 8:return e.next=10,navigator.serviceWorker.getRegistration();case 10:return r=e.sent,e.next=13,r.pushManager.getSubscription();case 13:e.sent&&(ne&&$e(!0),ye&&rn(!0));case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),(0,f.useEffect)((function(){var e=we({document:C.Po,updateQuery:function(e,n){var t=n.subscriptionData;if(t)return{global:t.data.updatedGlobalData}}});return function(){return e()}}),[we]),(0,O.jsx)(N,{children:mn.map((function(e,a){return(0,O.jsx)(Ee,{itemIndex:a,toolItems:e,isCustomer:Ne,mainBottomTabs:n,setActiveMainBottomTab:t,setIsOpenedBottomMenu:r},a)}))})}},6069:function(e,n,t){t.d(n,{Bu:function(){return g},EJ:function(){return p},Ok:function(){return m},RX:function(){return s},SB:function(){return x},Zu:function(){return _},_O:function(){return b},dh:function(){return c},hz:function(){return u},mr:function(){return f},tO:function(){return i},tg:function(){return v},xE:function(){return d},zZ:function(){return l}});var r=t(2982),a=t(1237),o=t(3070),i=function(e,n){if(n){for(var t=(n=(n=n.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split("."),r=0,a=t.length;r<a;++r){var o=t[r];if(!(o in e))return;e=e[o]}return"stockQtyByShippedOutOrders"===n?e&&e.toLocaleString()+"(sp)":e}},c=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=new Date(e),r=t.getFullYear(),a=t.getMonth()+1,o=t.getDate(),i=t.getHours(),c=t.getMinutes();return o=o<10?"0"+o:o,a=a<10?"0"+a:a,i=i<10?"0"+i:i,c=c<10?"0"+c:c,n?"".concat(o,"/").concat(a,"/").concat(r," - ").concat(i,":").concat(c):"".concat(o,"/").concat(a,"/").concat(r)},u=function(e){var n=e.isoString,t=e.includeTime,r=new Date(n),a=r.getFullYear(),o=r.getMonth()+1,i=r.getDate(),c=r.getHours(),u=r.getMinutes();return i=i<10?"0"+i:i,o=o<10?"0"+o:o,c=c<10?"0"+c:c,u=u<10?"0"+u:u,t?"".concat(a,"-").concat(o,"-").concat(i,"T").concat(c,":").concat(u):"".concat(a,"-").concat(o,"-").concat(i)},s=function(e,n,t){switch(e){case o.rh.MONEY_ACHIEVE_TYPE:return{unit:"\u0111",type:"Ti\u1ec1n mua"};case o.rh.QUANTITY_ACHIEVE_TYPE:return{unit:"SP",type:"S\u1ed1 l\u01b0\u1ee3ng"};case o.rh.WEIGHT_ACHIEVE_TYPE:return{unit:t,type:"Kh\u1ed1i l\u01b0\u1ee3ng"}}},l=function(e,n){return isNaN(n)?e:"string"===typeof e?e.split(" ").slice(0,parseInt(n,10)).join(" "):e},d=function(e){var n=(e||{}).getTimeTogether,t=new Date,r=function(){var e=t.getHours();return e>9?e:"0".concat(e)}(),a=function(){var e=t.getMinutes();return e>9?e:"0".concat(e)}(),o=function(){var e=t.getDate();return e>9?e:"0".concat(e)}(),i=function(){var e=t.getMonth()+1;return e>9?e:"0".concat(e)}(),c=t.getFullYear(),u="".concat(c,"-").concat(i,"-").concat(o),s="".concat(c,"-").concat(i,"-").concat(o,"T").concat(r,":").concat(a);return n?s:u},f=function(){for(var e="#",n=0;n<6;n++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e},h=function(e){var n=1,t="";return e===o.mZ.G&&(n=.001,t="kg"),e===o.mZ.KG&&(n=.001,t="t\u1ea5n"),e===o.mZ.ML&&(n=.001,t="l\xedt"),e===o.mZ.MG&&(n=1e-6,t="kg"),{weightCoefficient:n,weightShowUnit:t}},g=function(e){for(var n=e.chartData,t=void 0===n?[]:n,o=e.startOfTimeRange,i=(t&&t[0]||{}).unitString,c=h(void 0===i?"":i),u=c.weightCoefficient,s=c.weightShowUnit,l=new Date(o),d=l.getFullYear(),f=l.getMonth(),g=[],b=[],p=[],m=[],x=function(e){var n=t[e],a=n._id,o=n.totalMoney,i=n.totalQuantity,c=n.totalWeight,u=a||{},s=u.orderYear,l=u.orderMonth,h=u.productCode,x=u.productCategories,v=u.customerInfo,_=u.staffInfo,S=u.managerInfo,C=(v||{}).fullName,E=(_||{}).fullName,y=(S||{}).fullName,Z=h||x||C||E||y||"";-1===g.findIndex((function(e){return e===Z}))&&(g=[].concat((0,r.Z)(g),[Z]));var k={totalMoney:o,totalQuantity:i,totalWeight:c,label:Z};s===d?l===f?b=[].concat((0,r.Z)(b),[k]):p=[].concat((0,r.Z)(p),[k]):0===f&&11===l?p=[].concat((0,r.Z)(p),[k]):m=[].concat((0,r.Z)(m),[k])},v=0;v<t.length;v++)x(v);for(var _=[],S=[],C=[],E=[],y=[],Z=[],k=[],w=[],T=[],N=function(e){var n=g[e],t=b.find((function(e){return e.label===n})),a=p.find((function(e){return e.label===n})),o=m.find((function(e){return e.label===n})),i=t||{},c=i.totalMoney,s=i.totalQuantity,l=i.totalWeight,d=a||{},f=d.totalMoney,h=d.totalQuantity,x=d.totalWeight,v=o||{},N=v.totalMoney,j=v.totalQuantity,A=v.totalWeight;_=[].concat((0,r.Z)(_),[c/1e6||0]),S=[].concat((0,r.Z)(S),[s||0]),C=[].concat((0,r.Z)(C),[l*u||0]),E=[].concat((0,r.Z)(E),[f/1e6||0]),y=[].concat((0,r.Z)(y),[h/1e6||0]),Z=[].concat((0,r.Z)(Z),[x*u||0]),k=[].concat((0,r.Z)(k),[N/1e6||0]),w=[].concat((0,r.Z)(w),[j||0]),T=[].concat((0,r.Z)(T),[A*u||0])},j=0;j<g.length;j++)N(j);var A=function(){var e=f+1;return e>9?e:"0".concat(e)}(),M=0===f?"Th\xe1ng 12 - N\u0103m "+(d-1):"Th\xe1ng "+(f>9?f:"0".concat(f))+" - N\u0103m "+d,P=function(){var e=0;return _.forEach((function(n){return e+=n})),e?Number(e).toFixed(3).replace(/\B(?=(\d{3})+(?!\d))/g," "):0}(),I=function(){var e=0;return C.forEach((function(n){return e+=n})),e?Number(e).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g," "):0}(),O=function(){var e=0;return S.forEach((function(n){return e+=n})),e?Number(e).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g," "):0}(),R=[{label:"Th\xe1ng "+A+" - N\u0103m "+d,data:_,backgroundColor:a.Z.rgbaPrimary},{label:M,data:E,backgroundColor:a.Z.chartGreen},{label:"Th\xe1ng "+A+" - N\u0103m "+(d-1),data:k,backgroundColor:a.Z.purple}],z=[{label:"Th\xe1ng "+A+" - N\u0103m "+d,data:S,backgroundColor:a.Z.rgbaPrimary},{label:M,data:y,backgroundColor:a.Z.chartGreen},{label:"Th\xe1ng "+A+" - N\u0103m "+(d-1),data:w,backgroundColor:a.Z.purple}],D=[{label:"Th\xe1ng "+A+" - N\u0103m "+d,data:C,backgroundColor:a.Z.rgbaPrimary},{label:M,data:Z,backgroundColor:a.Z.chartGreen},{label:"Th\xe1ng "+A+" - N\u0103m "+(d-1),data:T,backgroundColor:a.Z.purple}];return{monthWeightShowUnit:s,totalMonthMoney:P,totalMonthWeight:I,totalMonthQuantity:O,chartLabels:g,moneyDatasets:R,quantityDatasets:z,weightDatasets:D}},b=function(e){for(var n=e.chartData,t=e.startOfTimeRange,o=(n&&n[0]||{}).unitString,i=h(void 0===o?"":o),c=i.weightCoefficient,u=i.weightShowUnit,s=t?new Date(t).getFullYear():(new Date).getFullYear(),l=[],d=[],f=[],g=function(e){var t=n[e],a=t._id,o=t.totalMoney,i=t.totalQuantity,c=t.totalWeight,u=a||{},h=u.orderYear,g=u.productCode,b=u.customerInfo,p=u.staffInfo,m=u.managerInfo,x=(b||{}).fullName,v=(p||{}).fullName,_=(m||{}).fullName,S=g||x||v||_||"";-1===l.findIndex((function(e){return e===S}))&&(l=[].concat((0,r.Z)(l),[S]));var C={totalMoney:o,totalQuantity:i,totalWeight:c,label:S};h===s?d=[].concat((0,r.Z)(d),[C]):f=[].concat((0,r.Z)(f),[C])},b=0;b<n.length;b++)g(b);for(var p=[],m=[],x=[],v=[],_=[],S=[],C=function(e){var n=l[e],t=d.find((function(e){return e.label===n})),a=f.find((function(e){return e.label===n})),o=t||{},i=o.totalMoney,u=o.totalQuantity,s=o.totalWeight,h=a||{},g=h.totalMoney,b=h.totalQuantity,C=h.totalWeight;p=[].concat((0,r.Z)(p),[i/1e6||0]),m=[].concat((0,r.Z)(m),[u||0]),x=[].concat((0,r.Z)(x),[s*c||0]),v=[].concat((0,r.Z)(v),[g/1e6||0]),_=[].concat((0,r.Z)(_),[b||0]),S=[].concat((0,r.Z)(S),[C*c||0])},E=0;E<l.length;E++)C(E);var y=function(){var e=0;return p.forEach((function(n){return e+=n})),e?Number(e).toFixed(3).replace(/\B(?=(\d{3})+(?!\d))/g," "):0}(),Z=function(){var e=0;return x.forEach((function(n){return e+=n})),e?Number(e).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g," "):0}(),k=[{label:"N\u0103m "+s,data:p,backgroundColor:a.Z.rgbaPrimary},{label:"N\u0103m "+(s-1),data:v,backgroundColor:a.Z.chartGreen}],w=[{label:"N\u0103m "+s,data:m,backgroundColor:a.Z.rgbaPrimary},{label:"N\u0103m "+(s-1),data:_,backgroundColor:a.Z.chartGreen}],T=[{label:"N\u0103m "+s,data:x,backgroundColor:a.Z.rgbaPrimary},{label:"N\u0103m "+(s-1),data:S,backgroundColor:a.Z.chartGreen}];return{yearWeightShowUnit:u,totalYearMoney:y,totalYearWeight:Z,chartLabels:l,moneyDatasets:k,quantityDatasets:w,weightDatasets:T}},p=function(e){for(var n=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),t=window.atob(n),r=new Uint8Array(t.length),a=0;a<t.length;++a)r[a]=t.charCodeAt(a);return r},m=function(e){for(var n="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",r=t.length,a=0;a<e;)n+=t.charAt(Math.floor(Math.random()*r)),a+=1;return n},x=function(){var e=navigator.userAgent||window.opera;return!!/windows phone/i.test(e)||(!!/android/i.test(e)||!(!/iPad|iPhone|iPod/.test(e)||window.MSStream))},v=function(e){var n=e.maxPixel,t=void 0===n?500:n,r=e.imageSrc,a=e.canvasId,o=new Image,i=document.getElementById(a),c=i.getContext("2d");if(r)return o.src=r,(o.onload=function(){i.width=t,i.height=i.width*(o.height/o.width);var e=document.createElement("canvas"),n=e.getContext("2d");return e.width=i.width,e.height=i.height,n.drawImage(o,0,0,e.width,e.height),c.drawImage(e,0,0,e.width,e.height,0,0,e.width,e.height),i.toDataURL("image/jpeg")})()},_=function(e){return e&&e.trim()?e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\u0111/g,"d").replace(/\u0110/g,"D").trim().replace(/ /g,"_").toLowerCase():""}}}]);