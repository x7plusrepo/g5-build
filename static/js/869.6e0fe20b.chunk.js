"use strict";(self.webpackChunkproject_g5=self.webpackChunkproject_g5||[]).push([[869],{869:function(e,t,n){n.r(t),n.d(t,{default:function(){return xe}});var r,a,o,i,c=n(4165),u=n(1413),s=n(5861),l=n(885),d=n(7313),f=n(3222),h=n(790),g=n(2668),b=n(4689),p=n(372),m=n(6173),x=n(6069),v=n(3454),_=n(7123),S=n(3163),y=n(2153),C=n(4695),E=n(3070),Z=n(168),k=n(3115),w=n(1237),T=k.ZP.div(r||(r=(0,Z.Z)(["\n  width: 100%;\n  font-size: 12px;\n  justify-content: space-between;\n"]))),N=k.ZP.div(a||(a=(0,Z.Z)(["\n  display: flex;\n  flex-wrap: wrap;\n  margin: "," 0;\n"])),(function(e){return e.marginTopBottom})),j=k.ZP.div(o||(o=(0,Z.Z)(["\n  width: 50%;\n  cursor: pointer;\n  text-align: center;\n  color: ",";\n"])),w.Z.primary),A=k.ZP.div(i||(i=(0,Z.Z)(["\n  padding: 4px;\n  display: flex;\n  margin: 5px 7px;\n  align-items: center;\n  border-radius: 20px;\n  justify-content: center;\n  background-color: ",";\n"])),w.Z.white),M=n(7119),P=n(6417),O=(0,d.lazy)((function(){return Promise.all([n.e(5627),n.e(7155),n.e(2372)]).then(n.bind(n,6066))})),I=(0,d.lazy)((function(){return Promise.all([n.e(5627),n.e(362)]).then(n.bind(n,487))})),R=(0,d.lazy)((function(){return Promise.all([n.e(5627),n.e(9053)]).then(n.bind(n,5236))})),D=(0,d.lazy)((function(){return Promise.all([n.e(5627),n.e(1879),n.e(2260),n.e(4014)]).then(n.bind(n,3788))})),z=(0,d.lazy)((function(){return Promise.all([n.e(5627),n.e(1879),n.e(8404),n.e(8111)]).then(n.bind(n,1625))})),W=(0,d.lazy)((function(){return Promise.all([n.e(5627),n.e(1879),n.e(3681),n.e(8404),n.e(5547)]).then(n.bind(n,5547))})),F=(0,d.lazy)((function(){return Promise.all([n.e(5627),n.e(7155),n.e(145)]).then(n.bind(n,9724))})),U=(0,d.lazy)((function(){return Promise.all([n.e(5627),n.e(3681),n.e(1020),n.e(3961)]).then(n.bind(n,653))})),L=(0,d.lazy)((function(){return Promise.all([n.e(5627),n.e(2655),n.e(2351)]).then(n.bind(n,2655))})),B=(0,d.lazy)((function(){return Promise.all([n.e(5030),n.e(1963)]).then(n.bind(n,7495))})),V=(0,d.lazy)((function(){return Promise.all([n.e(5627),n.e(1879),n.e(9757),n.e(4641)]).then(n.bind(n,9808))})),Q=(0,d.lazy)((function(){return Promise.all([n.e(5627),n.e(6663)]).then(n.bind(n,8206))})),Y=(0,d.lazy)((function(){return n.e(4816).then(n.bind(n,4816))})),H=(0,d.lazy)((function(){return n.e(9860).then(n.bind(n,9860))})),G=(0,d.lazy)((function(){return Promise.all([n.e(5627),n.e(2986)]).then(n.bind(n,2986))})),J=(0,d.lazy)((function(){return Promise.all([n.e(6139),n.e(2516)]).then(n.bind(n,8382))})),K=(0,d.lazy)((function(){return Promise.all([n.e(5627),n.e(3222),n.e(1879),n.e(468),n.e(5632),n.e(684)]).then(n.bind(n,7715))})),q=(0,d.lazy)((function(){return n.e(3938).then(n.bind(n,3938))})),X="create_notification",$="staff_list",ee="create_internal_staff",te="create_customer",ne="create_purchase_order",re="create_special_order",ae="return_products",oe="import_product",ie="destroy_damaged_product",ce="create_product",ue="create_receipt",se="view_debt",le="create_discount_promotion",de="change_password",fe="change_staff_work_area",he="inventory_balance",ge="customer_list",be="leads_list",pe="logout",me=function(e){var t=e.isCustomer,n=e.toolItems,r=e.mainBottomTabs,a=e.setActiveMainBottomTab,o=e.setIsOpenedBottomMenu,i=n.filter((function(e){return!!e})).length?"10px":0,g=(0,f.I0)(),b=(0,h.D)(v.Nv),p=(0,l.Z)(b,1)[0],x=(0,h.D)(v.eQ),_=(0,l.Z)(x,1)[0],S=function(e){var n=t?(0,P.jsx)(q,{}):(0,P.jsx)(K,{orderProducts:[]});switch(e){case X:return(0,P.jsx)(d.Suspense,{fallback:(0,P.jsx)(m.default,{}),children:(0,P.jsx)(O,{})});case $:return(0,P.jsx)(d.Suspense,{fallback:(0,P.jsx)(m.default,{}),children:(0,P.jsx)(G,{})});case ee:return(0,P.jsx)(d.Suspense,{fallback:(0,P.jsx)(m.default,{}),children:(0,P.jsx)(R,{})});case te:return(0,P.jsx)(d.Suspense,{fallback:(0,P.jsx)(m.default,{}),children:(0,P.jsx)(I,{})});case ne:return(0,P.jsx)(d.Suspense,{fallback:(0,P.jsx)(m.default,{}),children:n});case re:return(0,P.jsx)(d.Suspense,{fallback:(0,P.jsx)(m.default,{}),children:(0,P.jsx)(K,{isSpecialOrder:!0,orderProducts:[]})});case ae:return(0,P.jsx)(d.Suspense,{fallback:(0,P.jsx)(m.default,{}),children:(0,P.jsx)(D,{})});case oe:return(0,P.jsx)(d.Suspense,{fallback:(0,P.jsx)(m.default,{}),children:(0,P.jsx)(z,{})});case ie:return(0,P.jsx)(d.Suspense,{fallback:(0,P.jsx)(m.default,{}),children:(0,P.jsx)(W,{})});case ce:return(0,P.jsx)(d.Suspense,{fallback:(0,P.jsx)(m.default,{}),children:(0,P.jsx)(F,{})});case he:return(0,P.jsx)(d.Suspense,{fallback:(0,P.jsx)(m.default,{}),children:(0,P.jsx)(U,{})});case ue:return(0,P.jsx)(d.Suspense,{fallback:(0,P.jsx)(m.default,{}),children:(0,P.jsx)(L,{})});case se:return(0,P.jsx)(d.Suspense,{fallback:(0,P.jsx)(m.default,{}),children:(0,P.jsx)(B,{})});case le:return(0,P.jsx)(d.Suspense,{fallback:(0,P.jsx)(m.default,{}),children:(0,P.jsx)(V,{})});case de:return(0,P.jsx)(d.Suspense,{fallback:(0,P.jsx)(m.default,{}),children:(0,P.jsx)(Q,{})});case fe:return(0,P.jsx)(d.Suspense,{fallback:(0,P.jsx)(m.default,{}),children:(0,P.jsx)(Y,{})});case ge:return(0,P.jsx)(d.Suspense,{fallback:(0,P.jsx)(m.default,{}),children:(0,P.jsx)(H,{})});case be:return(0,P.jsx)(d.Suspense,{fallback:(0,P.jsx)(m.default,{}),children:(0,P.jsx)(J,{})});default:return null}},Z=function(){var e=(0,s.Z)((0,c.Z)().mark((function e(t){var n,i,s,l,f,h,b,x;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.label,i=t.code,o(!1),s=i===se,l=i===he,!(i===pe)){e.next=14;break}return e.next=8,p();case 8:localStorage.removeItem(E.B),f={viewerQuery:{},isAuthenticated:!1},g((0,C.CD)(f)),window.location.reload(),e.next=25;break;case 14:if(!s){e.next=19;break}h=r.findIndex((function(e){return"debts"===e.code})),a(r[h]),e.next=25;break;case 19:if(!l){e.next=23;break}return b=function(){_({variables:{data:{isStockChecking:!1}}})},e.next=23,_({variables:{data:{isStartStockChecking:!0}}});case 23:x=(0,u.Z)((0,u.Z)({title:n},!!b&&{customCloseAction:b}),{},{children:(0,P.jsx)(d.Suspense,{fallback:(0,P.jsx)(m.default,{}),children:S(i)})}),g((0,y.dn)(x));case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,P.jsx)(N,{marginTopBottom:i,children:n.map((function(e,t){return e?(0,P.jsx)(j,{onClick:function(){return Z(e)},children:(0,P.jsx)(A,{children:e&&e.label})},t):null}))})},xe=function(e){var t=e.mainBottomTabs,n=e.setActiveMainBottomTab,r=e.setIsOpenedBottomMenu,a=M.gz.CRUD_PRODUCT,o=M.gz.CAN_CREATE_NORMAL_SPECIAL_ORDER_FOR_ANYONE,i=M.gz.CAN_CREATE_ORDER_FOR_OWN_CUSTOMERS,m=M.gz.CAN_CREATE_SPECIAL_ORDER_FOR_OWN_AREA,y=M.gz.IMPORT_RETURN_PRODUCT,C=M.gz.CAN_EXCUTE_WAREHOUSE_BALANCE,Z=M.gz.DESTROY_PRODUCT,k=M.gz.CREATE_NOTIFICATION,w=M.gz.CAN_CREATE_CUSTOMER,O=M.gz.CAN_CREATE_STAFF,I=M.gz.CAN_CHANGE_STAFF_WORK_AREA,R=M.gz.CAN_CREATE_DISCOUNT_PROMOTION,D=M.gz.CAN_VIEW_OWN_CUSTOMER_LIST,z=M.gz.CAN_VIEW_ALL_CUSTOMERS_LIST,W=M.gz.CAN_VIEW_ALL_LEADS_LIST,F=M.gz.CAN_VIEW_ALL_STAFFS,U=M.gz.CAN_VIEW_OWN_STAFF_LIST,L=M.gz.CAN_VIEW_OWN_DEBTS,B=M.gz.CAN_VIEW_ALL_DEBTS,V=M.gz.CAN_CREATE_RECEIPT_FOR_ANY_CUSTOMER,Q=M.gz.CAN_CREATE_RECEIPT_FOR_OWN_CUSTOMER,Y=(0,f.v9)((function(e){return e.authReducer})).viewerQuery||{},H=Y._id,G=Y.roles,J=void 0===G?[]:G,K=Y.permissions,q=void 0===K?[]:K,xe=Y.customerStaffPermissions,ve=void 0===xe?[]:xe,_e=Y.subscribedNewsPush,Se=Y.subscribedSystemPush,ye=(0,g.a)(_.bV,{fetchPolicy:"cache-and-network"}),Ce=ye.data,Ee=ye.subscribeToMore,Ze=(Ce&&Ce.global||{}).isStockChecking,ke=J.includes(E.If.CUSTOMER)||J.includes(E.If.STAFF_OF_CUSTOMER),we=J.includes(E.If.SYSTEM),Te=ve.length?ve.includes(M.Fl.CREATE_AND_MANAGE_ORDERS):q.some((function(e){return e===i||e===o})),Ne=q.some((function(e){return e===o||e===m})),je=q.some((function(e){return e===Q||e===V})),Ae=q.includes(y),Me=q.includes(y),Pe=q.includes(a),Oe=q.includes(Z),Ie=q.includes(C),Re=q.includes(k),De=q.some((function(e){return e===D||e===z})),ze=q.includes(w),We=q.some((function(e){return e===U||e===F})),Fe=q.includes(O),Ue=q.includes(I),Le=q.includes(W),Be=q.includes(R),Ve=q.some((function(e){return e===L||e===B})),Qe=[[Te?{code:ne,label:"+ \u0110\u1eb7t h\xe0ng"}:void 0,Ne?{code:re,label:"+ \u0110\u01a1n \u0111\u1eb7c bi\u1ec7t"}:void 0,je?{code:ue,label:"+ Thu ti\u1ec1n"}:void 0],[Ae?{code:oe,label:"+ Nh\u1eadp h\xe0ng"}:void 0,Me?{code:ae,label:"+ Nh\u1eadp l\u1ea1i h\xe0ng"}:void 0,Pe?{code:ce,label:"+ S\u1ea3n ph\u1ea9m m\u1edbi"}:void 0,Oe?{code:ie,label:"+ Hu\u1ef7 h\xe0ng h\u1ecfng"}:void 0,Ie&&!Ze?{code:he,label:"+ Ki\u1ec3m kho"}:void 0],[Re?{code:X,label:"+ Th\xf4ng b\xe1o m\u1edbi"}:void 0],[De?{code:ge,label:"Danh s\xe1ch kh\xe1ch h\xe0ng"}:void 0,ze?{code:te,label:"+ Th\xeam Kh\xe1ch h\xe0ng"}:void 0,We?{code:$,label:"Danh s\xe1ch nh\xe2n vi\xean"}:void 0,Fe?{code:ee,label:"+ Th\xeam Nh\xe2n vi\xean"}:void 0,Ue?{code:fe,label:"Chuy\u1ec3n v\xf9ng"}:void 0,Le?{code:be,label:"Danh s\xe1ch Leads"}:void 0],[Be?{code:le,label:"+ T\u1ea1o CKKM"}:void 0,Ve?{code:se,label:"C\xf4ng n\u1ee3"}:void 0],[{code:de,label:"\u0110\u1ed5i m\u1eadt kh\u1ea9u"},{code:pe,label:"\u0110\u0103ng xu\u1ea5t"}]],Ye=(0,d.useState)(!1),He=(0,l.Z)(Ye,2),Ge=He[0],Je=He[1],Ke=(0,d.useState)(!1),qe=(0,l.Z)(Ke,2),Xe=qe[0],$e=qe[1],et=(0,d.useState)(!0),tt=(0,l.Z)(et,2),nt=tt[0],rt=tt[1],at=(0,h.D)(v.$E),ot=(0,l.Z)(at,1)[0],it=function(){var e=(0,s.Z)((0,c.Z)().mark((function e(){var t,n,r,a;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Notification.requestPermission();case 2:if("denied"!==(t=e.sent)){e.next=6;break}return console.error("The user explicitly denied the permission request."),e.abrupt("return");case 6:return"granted"===t&&console.info("The user accepted the permission request."),e.next=9,navigator.serviceWorker.getRegistration();case 9:return n=e.sent,e.next=12,n.pushManager.getSubscription();case 12:if(!(r=e.sent)||!Ge){e.next=16;break}return console.info("User is already subscribed."),e.abrupt("return");case 16:return e.next=18,n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:(0,x.EJ)("BLw43wcbE_9PstDuQ2XoCKxLZuf4jO9QtV_UVrnMS2HV6XIgyPMU1hkkA86AF1NfEM6pEbIsUHaqGy1JXDeApV4")});case 18:return a=e.sent,e.next=21,ot({variables:{data:(0,u.Z)({subscribedNewsPush:!0},!r&&{subscribeJson:JSON.stringify(a)}),where:{accountId:H}}});case 21:e.sent.data&&Je(!0);case 23:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ct=function(){var e=(0,s.Z)((0,c.Z)().mark((function e(){var t,n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.serviceWorker.getRegistration();case 2:return t=e.sent,e.next=5,t.pushManager.getSubscription();case 5:return n=e.sent,e.next=8,ot({variables:{data:(0,u.Z)({subscribedNewsPush:!1},!Xe&&{unsubscribeJson:JSON.stringify(n)}),where:{accountId:H}}});case 8:if(!e.sent.data){e.next=16;break}if(Je(!1),Xe){e.next=16;break}return e.next=14,n.unsubscribe();case 14:e.sent&&console.info("Successfully unsubscribed from push notifications.");case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ut=Ge?(0,P.jsxs)(A,{onClick:ct,children:[(0,P.jsx)(b.Z,{fontSize:"small"}),"\u2002Hu\u1ef7 th\xf4ng b\xe1o tin t\u1ee9c"]}):(0,P.jsxs)(A,{onClick:it,children:[(0,P.jsx)(p.Z,{fontSize:"small"}),"\u2002Th\xf4ng b\xe1o tin t\u1ee9c"]}),st=function(){var e=(0,s.Z)((0,c.Z)().mark((function e(){var t,n,r,a;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Notification.requestPermission();case 2:if("denied"!==(t=e.sent)){e.next=6;break}return console.error("The user explicitly denied the permission request."),e.abrupt("return");case 6:return"granted"===t&&console.info("The user accepted the permission request."),e.next=9,navigator.serviceWorker.getRegistration();case 9:return n=e.sent,e.next=12,n.pushManager.getSubscription();case 12:if(!(r=e.sent)||!Xe){e.next=16;break}return console.info("User is already subscribed."),e.abrupt("return");case 16:return e.next=18,n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:(0,x.EJ)("BLw43wcbE_9PstDuQ2XoCKxLZuf4jO9QtV_UVrnMS2HV6XIgyPMU1hkkA86AF1NfEM6pEbIsUHaqGy1JXDeApV4")});case 18:return a=e.sent,e.next=21,ot({variables:{data:(0,u.Z)({subscribedSystemPush:!0},!r&&{subscribeJson:JSON.stringify(a)}),where:{accountId:H}}});case 21:e.sent.data&&$e(!0);case 23:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),lt=function(){var e=(0,s.Z)((0,c.Z)().mark((function e(){var t,n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.serviceWorker.getRegistration();case 2:return t=e.sent,e.next=5,t.pushManager.getSubscription();case 5:return n=e.sent,e.next=8,ot({variables:{data:(0,u.Z)({subscribedSystemPush:!1},!Ge&&{unsubscribeJson:JSON.stringify(n)}),where:{accountId:H}}});case 8:if(!e.sent.data){e.next=16;break}if($e(!1),Ge){e.next=16;break}return e.next=14,n.unsubscribe();case 14:e.sent&&console.info("Successfully unsubscribed from push notifications.");case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),dt=Xe?(0,P.jsxs)(A,{onClick:lt,children:[(0,P.jsx)(b.Z,{fontSize:"small"}),"\u2002Hu\u1ef7 t.b\xe1o h\u1ec7 th\u1ed1ng"]}):(0,P.jsxs)(A,{onClick:st,children:[(0,P.jsx)(p.Z,{fontSize:"small"}),"\u2002Th\xf4ng b\xe1o h\u1ec7 th\u1ed1ng"]});return(0,d.useEffect)((function(){var e=function(){var e=(0,s.Z)((0,c.Z)().mark((function e(){var t,n,r;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=navigator.userAgent||window.opera,n=t.toLowerCase(),!/iPad|iPhone|iPod/.test(t)||window.MSStream){e.next=5;break}return rt(!1),e.abrupt("return");case 5:if(-1===n.indexOf("safari")||-1!==n.indexOf("chrome")){e.next=8;break}return rt(!1),e.abrupt("return");case 8:return e.next=10,navigator.serviceWorker.getRegistration();case 10:return r=e.sent,e.next=13,r.pushManager.getSubscription();case 13:e.sent&&(_e&&Je(!0),Se&&$e(!0));case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),(0,d.useEffect)((function(){var e=Ee({document:S.Po,updateQuery:function(e,t){var n=t.subscriptionData;if(n)return{global:n.data.updatedGlobalData}}});return function(){return e()}}),[Ee]),(0,P.jsxs)(T,{children:[nt&&(0,P.jsxs)(N,{marginTopBottom:"5px",children:[!we&&(0,P.jsx)(j,{children:ut}),!we&&(0,P.jsx)(j,{children:dt})]}),Qe.map((function(e,a){return(0,P.jsx)(me,{itemIndex:a,toolItems:e,isCustomer:ke,mainBottomTabs:t,setActiveMainBottomTab:n,setIsOpenedBottomMenu:r},a)}))]})}},6069:function(e,t,n){n.d(t,{Bu:function(){return g},EJ:function(){return p},Ok:function(){return m},RX:function(){return s},SB:function(){return x},Zu:function(){return _},_O:function(){return b},dh:function(){return c},hz:function(){return u},mr:function(){return f},tO:function(){return i},tg:function(){return v},xE:function(){return d},zZ:function(){return l}});var r=n(2982),a=n(1237),o=n(3070),i=function(e,t){if(t){for(var n=(t=(t=t.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split("."),r=0,a=n.length;r<a;++r){var o=n[r];if(!(o in e))return;e=e[o]}return"stockQtyByShippedOutOrders"===t?e&&e.toLocaleString()+"(sp)":e}},c=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new Date(e),r=n.getFullYear(),a=n.getMonth()+1,o=n.getDate(),i=n.getHours(),c=n.getMinutes();return o=o<10?"0"+o:o,a=a<10?"0"+a:a,i=i<10?"0"+i:i,c=c<10?"0"+c:c,t?"".concat(o,"/").concat(a,"/").concat(r," - ").concat(i,":").concat(c):"".concat(o,"/").concat(a,"/").concat(r)},u=function(e){var t=e.isoString,n=e.includeTime,r=new Date(t),a=r.getFullYear(),o=r.getMonth()+1,i=r.getDate(),c=r.getHours(),u=r.getMinutes();return i=i<10?"0"+i:i,o=o<10?"0"+o:o,c=c<10?"0"+c:c,u=u<10?"0"+u:u,n?"".concat(a,"-").concat(o,"-").concat(i,"T").concat(c,":").concat(u):"".concat(a,"-").concat(o,"-").concat(i)},s=function(e,t,n){switch(e){case o.rh.MONEY_ACHIEVE_TYPE:return{unit:"\u0111",type:"Ti\u1ec1n mua"};case o.rh.QUANTITY_ACHIEVE_TYPE:return{unit:"SP",type:"S\u1ed1 l\u01b0\u1ee3ng"};case o.rh.WEIGHT_ACHIEVE_TYPE:return{unit:n,type:"Kh\u1ed1i l\u01b0\u1ee3ng"}}},l=function(e,t){return isNaN(t)?e:"string"===typeof e?e.split(" ").slice(0,parseInt(t,10)).join(" "):e},d=function(e){var t=(e||{}).getTimeTogether,n=new Date,r=function(){var e=n.getHours();return e>9?e:"0".concat(e)}(),a=function(){var e=n.getMinutes();return e>9?e:"0".concat(e)}(),o=function(){var e=n.getDate();return e>9?e:"0".concat(e)}(),i=function(){var e=n.getMonth()+1;return e>9?e:"0".concat(e)}(),c=n.getFullYear(),u="".concat(c,"-").concat(i,"-").concat(o),s="".concat(c,"-").concat(i,"-").concat(o,"T").concat(r,":").concat(a);return t?s:u},f=function(){for(var e="#",t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e},h=function(e){var t=1,n="";return e===o.mZ.G&&(t=.001,n="kg"),e===o.mZ.KG&&(t=.001,n="t\u1ea5n"),e===o.mZ.ML&&(t=.001,n="l\xedt"),e===o.mZ.MG&&(t=1e-6,n="kg"),{weightCoefficient:t,weightShowUnit:n}},g=function(e){for(var t=e.chartData,n=void 0===t?[]:t,o=e.startOfTimeRange,i=(n&&n[0]||{}).unitString,c=h(void 0===i?"":i),u=c.weightCoefficient,s=c.weightShowUnit,l=new Date(o),d=l.getFullYear(),f=l.getMonth(),g=[],b=[],p=[],m=[],x=function(e){var t=n[e],a=t._id,o=t.totalMoney,i=t.totalQuantity,c=t.totalWeight,u=a||{},s=u.orderYear,l=u.orderMonth,h=u.productCode,x=u.productCategories,v=u.customerInfo,_=u.staffInfo,S=u.managerInfo,y=(v||{}).fullName,C=(_||{}).fullName,E=(S||{}).fullName,Z=h||x||y||C||E||"";-1===g.findIndex((function(e){return e===Z}))&&(g=[].concat((0,r.Z)(g),[Z]));var k={totalMoney:o,totalQuantity:i,totalWeight:c,label:Z};s===d?l===f?b=[].concat((0,r.Z)(b),[k]):p=[].concat((0,r.Z)(p),[k]):0===f&&11===l?p=[].concat((0,r.Z)(p),[k]):m=[].concat((0,r.Z)(m),[k])},v=0;v<n.length;v++)x(v);for(var _=[],S=[],y=[],C=[],E=[],Z=[],k=[],w=[],T=[],N=function(e){var t=g[e],n=b.find((function(e){return e.label===t})),a=p.find((function(e){return e.label===t})),o=m.find((function(e){return e.label===t})),i=n||{},c=i.totalMoney,s=i.totalQuantity,l=i.totalWeight,d=a||{},f=d.totalMoney,h=d.totalQuantity,x=d.totalWeight,v=o||{},N=v.totalMoney,j=v.totalQuantity,A=v.totalWeight;_=[].concat((0,r.Z)(_),[c/1e6||0]),S=[].concat((0,r.Z)(S),[s||0]),y=[].concat((0,r.Z)(y),[l*u||0]),C=[].concat((0,r.Z)(C),[f/1e6||0]),E=[].concat((0,r.Z)(E),[h/1e6||0]),Z=[].concat((0,r.Z)(Z),[x*u||0]),k=[].concat((0,r.Z)(k),[N/1e6||0]),w=[].concat((0,r.Z)(w),[j||0]),T=[].concat((0,r.Z)(T),[A*u||0])},j=0;j<g.length;j++)N(j);var A=function(){var e=f+1;return e>9?e:"0".concat(e)}(),M=0===f?"Th\xe1ng 12 - N\u0103m "+(d-1):"Th\xe1ng "+(f>9?f:"0".concat(f))+" - N\u0103m "+d,P=function(){var e=0;return _.forEach((function(t){return e+=t})),e?Number(e).toFixed(3).replace(/\B(?=(\d{3})+(?!\d))/g," "):0}(),O=function(){var e=0;return y.forEach((function(t){return e+=t})),e?Number(e).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g," "):0}(),I=function(){var e=0;return S.forEach((function(t){return e+=t})),e?Number(e).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g," "):0}(),R=[{label:"Th\xe1ng "+A+" - N\u0103m "+d,data:_,backgroundColor:a.Z.rgbaPrimary},{label:M,data:C,backgroundColor:a.Z.chartGreen},{label:"Th\xe1ng "+A+" - N\u0103m "+(d-1),data:k,backgroundColor:a.Z.purple}],D=[{label:"Th\xe1ng "+A+" - N\u0103m "+d,data:S,backgroundColor:a.Z.rgbaPrimary},{label:M,data:E,backgroundColor:a.Z.chartGreen},{label:"Th\xe1ng "+A+" - N\u0103m "+(d-1),data:w,backgroundColor:a.Z.purple}],z=[{label:"Th\xe1ng "+A+" - N\u0103m "+d,data:y,backgroundColor:a.Z.rgbaPrimary},{label:M,data:Z,backgroundColor:a.Z.chartGreen},{label:"Th\xe1ng "+A+" - N\u0103m "+(d-1),data:T,backgroundColor:a.Z.purple}];return{monthWeightShowUnit:s,totalMonthMoney:P,totalMonthWeight:O,totalMonthQuantity:I,chartLabels:g,moneyDatasets:R,quantityDatasets:D,weightDatasets:z}},b=function(e){for(var t=e.chartData,n=e.startOfTimeRange,o=(t&&t[0]||{}).unitString,i=h(void 0===o?"":o),c=i.weightCoefficient,u=i.weightShowUnit,s=n?new Date(n).getFullYear():(new Date).getFullYear(),l=[],d=[],f=[],g=function(e){var n=t[e],a=n._id,o=n.totalMoney,i=n.totalQuantity,c=n.totalWeight,u=a||{},h=u.orderYear,g=u.productCode,b=u.customerInfo,p=u.staffInfo,m=u.managerInfo,x=(b||{}).fullName,v=(p||{}).fullName,_=(m||{}).fullName,S=g||x||v||_||"";-1===l.findIndex((function(e){return e===S}))&&(l=[].concat((0,r.Z)(l),[S]));var y={totalMoney:o,totalQuantity:i,totalWeight:c,label:S};h===s?d=[].concat((0,r.Z)(d),[y]):f=[].concat((0,r.Z)(f),[y])},b=0;b<t.length;b++)g(b);for(var p=[],m=[],x=[],v=[],_=[],S=[],y=function(e){var t=l[e],n=d.find((function(e){return e.label===t})),a=f.find((function(e){return e.label===t})),o=n||{},i=o.totalMoney,u=o.totalQuantity,s=o.totalWeight,h=a||{},g=h.totalMoney,b=h.totalQuantity,y=h.totalWeight;p=[].concat((0,r.Z)(p),[i/1e6||0]),m=[].concat((0,r.Z)(m),[u||0]),x=[].concat((0,r.Z)(x),[s*c||0]),v=[].concat((0,r.Z)(v),[g/1e6||0]),_=[].concat((0,r.Z)(_),[b||0]),S=[].concat((0,r.Z)(S),[y*c||0])},C=0;C<l.length;C++)y(C);var E=function(){var e=0;return p.forEach((function(t){return e+=t})),e?Number(e).toFixed(3).replace(/\B(?=(\d{3})+(?!\d))/g," "):0}(),Z=function(){var e=0;return x.forEach((function(t){return e+=t})),e?Number(e).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g," "):0}(),k=[{label:"N\u0103m "+s,data:p,backgroundColor:a.Z.rgbaPrimary},{label:"N\u0103m "+(s-1),data:v,backgroundColor:a.Z.chartGreen}],w=[{label:"N\u0103m "+s,data:m,backgroundColor:a.Z.rgbaPrimary},{label:"N\u0103m "+(s-1),data:_,backgroundColor:a.Z.chartGreen}],T=[{label:"N\u0103m "+s,data:x,backgroundColor:a.Z.rgbaPrimary},{label:"N\u0103m "+(s-1),data:S,backgroundColor:a.Z.chartGreen}];return{yearWeightShowUnit:u,totalYearMoney:E,totalYearWeight:Z,chartLabels:l,moneyDatasets:k,quantityDatasets:w,weightDatasets:T}},p=function(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=window.atob(t),r=new Uint8Array(n.length),a=0;a<n.length;++a)r[a]=n.charCodeAt(a);return r},m=function(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",r=n.length,a=0;a<e;)t+=n.charAt(Math.floor(Math.random()*r)),a+=1;return t},x=function(){var e=navigator.userAgent||window.opera;return!!/windows phone/i.test(e)||(!!/android/i.test(e)||!(!/iPad|iPhone|iPod/.test(e)||window.MSStream))},v=function(e){var t=e.maxPixel,n=void 0===t?500:t,r=e.imageSrc,a=e.canvasId,o=new Image,i=document.getElementById(a),c=i.getContext("2d");if(r)return o.src=r,(o.onload=function(){i.width=n,i.height=i.width*(o.height/o.width);var e=document.createElement("canvas"),t=e.getContext("2d");return e.width=i.width,e.height=i.height,t.drawImage(o,0,0,e.width,e.height),c.drawImage(e,0,0,e.width,e.height,0,0,e.width,e.height),i.toDataURL("image/webp")})()},_=function(e){return e&&e.trim()?e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\u0111/g,"d").replace(/\u0110/g,"D").trim().replace(/ /g,"_").toLowerCase():""}}}]);