"use strict";(self.webpackChunkproject_g5=self.webpackChunkproject_g5||[]).push([[468,9146],{9146:function(n,e,t){t.r(e),t.d(e,{default:function(){return l}});var r,i=t(1413),o=(t(7313),t(168)),a=t(3115),c=t(1237),d=a.ZP.button(r||(r=(0,o.Z)(["\n  left: 0;\n  bottom: 0;\n  z-index: 1;\n  width: 100%;\n  color: #fff;\n  border: none;\n  display: flex;\n  padding: 10px;\n  position: fixed;\n  cursor: pointer;\n  font-size: 13px;\n  font-weight: 600;\n  padding: 15px 20px;\n  align-items: center;\n  text-transform: uppercase;\n  justify-content: space-around;\n  background-color: ",";\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n"])),c.Z.rgbaBlack),s=t(6417),u=function(n){var e=n.label;return(0,s.jsx)(d,(0,i.Z)((0,i.Z)({},n),{},{children:e}))};u.defaultProps={label:"N\xfat b\u1ea5m",onClick:function(){}};var l=u},6524:function(n,e,t){t.r(e),t.d(e,{default:function(){return N}});var r,i,o,a,c,d,s,u=t(4165),l=t(5861),p=t(885),h=t(7313),x=t(5627),f=t(3222),g=t(790),m=t(5222),Z=t(9146),v=t(9673),b=t(1359),j=t(1677),y=t(168),C=t(3115),P=t(1237),T=C.ZP.div(r||(r=(0,y.Z)(["\n  font-size: 12px;\n  padding: 10px 10px 120px;\n"]))),w=C.ZP.p(i||(i=(0,y.Z)(["\n  font-weight: 700;\n"]))),E=C.ZP.div(o||(o=(0,y.Z)(["\n  display: flex;\n  align-items: center;\n  margin: 10px 0 15px;\n"]))),k=C.ZP.div(a||(a=(0,y.Z)(["\n  display: flex;\n  margin: 10px 0;\n  align-items: center;\n  justify-content: space-between;\n"]))),S=C.ZP.div(c||(c=(0,y.Z)(["\n  width: 100px;\n"]))),I=(C.ZP.input(d||(d=(0,y.Z)(["\n  width: 60%;\n"]))),C.ZP.div(s||(s=(0,y.Z)(["\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  display: flex;\n  position: fixed;\n  padding: 10px;\n  align-items: center;\n  justify-content: space-around;\n  background-color: ",";\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n"])),P.Z.rgbaBlack),t(3454)),O=t(2153),_=t(3070),A=t(6417),N=function(n){var e=n.discountPromotionId,t=(0,x.cI)({defaultValues:{}}),r=t.register,i=t.setValue,o=t.clearErrors,a=t.handleSubmit,c=t.formState.errors,d=(0,f.I0)(),s=(0,h.useState)(void 0),y=(0,p.Z)(s,2),C=y[0],P=y[1];r("customer",{required:!C});var N=(0,g.D)(I.Xu),D=(0,p.Z)(N,1)[0],R=(0,g.D)(I.JS),M=(0,p.Z)(R,1)[0],V=C?(0,A.jsxs)(k,{style:{width:"100%"},children:[(0,A.jsxs)(w,{children:[C.fullName," - ",C.phoneNumber]}),(0,A.jsx)(j.Z,{label:"\u0110\u1ed5i",onClick:function(){P(void 0),i("customer",void 0)}})]}):(0,A.jsx)(b.Z,{isSelectOne:!0,isError:!!c.customer,roles:[_.If.CUSTOMER],onClickSelectResultItem:function(n){o("customer"),P(n.node),i("customer",n.node)}}),F=function(){var n=(0,l.Z)((0,u.Z)().mark((function n(t){var r,i,o,a,c,s,l,p,h,x;return(0,u.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t.customer,i=t.paidAt,o=t.bePaidMoneyValue,a=r._id,c=r.staffAccountId,s=r.managerAccountId,l=r.directorAccountId,!e){n.next=11;break}return p={paidAt:new Date(i).toISOString(),customerAccountId:a,staffAccountId:c,managerAccountId:s,directorAccountId:l},h={discountPromotionId:e},n.next=7,M({variables:{data:p,where:h}});case 7:n.sent.data&&d((0,O.mm)()),n.next=16;break;case 11:return x={paidAt:new Date(i).toISOString(),bePaidMoneyValue:Number(o),customerAccountId:a,staffAccountId:c,managerAccountId:s,directorAccountId:l},n.next=14,D({variables:{data:x}});case 14:n.sent.data&&d((0,O.mm)());case 16:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return(0,A.jsxs)(T,{children:[(0,A.jsxs)(m.Z,{children:[(0,A.jsxs)(E,{children:[(0,A.jsx)(S,{children:"Kh\xe1ch h\xe0ng:"}),V]}),(0,A.jsxs)(E,{children:[(0,A.jsx)(S,{children:"Ng\xe0y tr\u1ea3:"}),(0,A.jsx)(v.Z,{type:"datetime-local",name:"paidAt",register:r,validations:{required:!0},isError:!!c.paidAt})]}),!e&&(0,A.jsxs)(E,{children:[(0,A.jsx)(S,{children:"S\u1ed1 ti\u1ec1n:"}),(0,A.jsx)(v.Z,{type:"number",textAlign:"right",name:"bePaidMoneyValue",register:r,validations:{required:!0},isError:!!c.bePaidMoneyValue}),(0,A.jsx)("span",{style:{marginLeft:10},children:"\u0111"})]})]}),(0,A.jsx)(Z.default,{label:"X\xe1c nh\u1eadn",onClick:a(F)})]})}},468:function(n,e,t){t.d(e,{Z:function(){return ze}});var r,i,o,a,c,d,s,u,l,p,h,x,f,g,m,Z,v,b,j,y,C,P,T,w,E,k,S,I,O,_,A,N,D,R,M,V,F,q,K,U,H,Y=t(885),G=t(4165),z=t(5861),L=t(7313),B=t(790),X=t(3222),Q=t(514),W=t(3532),J=t(3511),$=t(5954),nn=t(6618),en=t(7522),tn=t(1997),rn=t(750),on=t(6524),an=t(6173),cn=t(4214),dn=t(1677),sn=t(2262),un=t(2982),ln=t(1413),pn=t(5627),hn=t(4641),xn=t(9673),fn=t(3182),gn=t(5222),mn=t(1300),Zn=t(2397),vn=t(6879),bn=t(1359),jn=t(6881),yn=t(6069),Cn=t(6947),Pn=t(168),Tn=t(3115),wn=t(1237),En=Tn.ZP.div(r||(r=(0,Pn.Z)(["\n  font-size: 12px;\n  padding: 10px 5px 120px;\n"]))),kn=Tn.ZP.div(i||(i=(0,Pn.Z)(["\n  width: 100%;\n  display: flex;\n  margin: 5px 0 10px;\n  align-items: center;\n"]))),Sn=Tn.ZP.div(o||(o=(0,Pn.Z)(["\n  margin: 20px 0 0;\n"]))),In=Tn.ZP.span(a||(a=(0,Pn.Z)(["\n  font-weight: 700;\n"]))),On=Tn.ZP.div(c||(c=(0,Pn.Z)(["\n  left: 0;\n  top: -30px;\n  width: 100%;\n  display: flex;\n  position: absolute;\n  align-items: center;\n"]))),_n=Tn.ZP.p(d||(d=(0,Pn.Z)(["\n  font-weight: 600;\n  text-transform: uppercase;\n  color: ",";\n"])),wn.Z.lightBlack),An=Tn.ZP.select(s||(s=(0,Pn.Z)(["\n  border: none;\n  padding: 0 5px;\n  margin: 0 0 0 10px;\n  text-align: center;\n  background-color: transparent;\n  color: ",";\n  border-bottom: 1px solid ",";\n  &:focus {\n    outline: none;\n  }\n"])),wn.Z.luckyGrey,wn.Z.luckyGrey),Nn=Tn.ZP.select(u||(u=(0,Pn.Z)(["\n  top: -2px;\n  left: 90px;\n  border: none;\n  text-align: center;\n  position: absolute;\n  padding: 0 3px 0 0;\n  margin: 2px 5px 0 0;\n  background-color: transparent;\n  color: ",";\n  border-bottom: 1px solid ",";\n  &:focus {\n    outline: none;\n  }\n"])),wn.Z.luckyGrey,wn.Z.secondary),Dn=Tn.ZP.select(l||(l=(0,Pn.Z)(["\n  width: 100%;\n  border: none;\n  margin: 10px 0 0;\n  background-color: transparent;\n  color: ",";\n  border-bottom: 1px solid ",";\n  &:focus {\n    outline: none;\n  }\n"])),wn.Z.luckyGrey,wn.Z.secondary),Rn=Tn.ZP.div(p||(p=(0,Pn.Z)(["\n  display: flex;\n  margin: 10px 0;\n  justify-content: space-between;\n"]))),Mn=Tn.ZP.div(h||(h=(0,Pn.Z)(["\n  display: flex;\n  margin: 10px 0;\n  align-items: center;\n  justify-content: space-between;\n"]))),Vn=Tn.ZP.div(x||(x=(0,Pn.Z)(["\n  width: 70px;\n"]))),Fn=(Tn.ZP.input(f||(f=(0,Pn.Z)(["\n  width: 60%;\n"]))),Tn.ZP.input(g||(g=(0,Pn.Z)(["\n  width: 30px;\n  border: none;\n  margin: 0 5px;\n  text-align: right;\n  padding: 0 0 0 5px;\n  border-bottom: 1px solid ",";\n  &:focus-visible {\n    outline: none;\n  }\n"])),wn.Z.secondary)),qn=Tn.ZP.div(m||(m=(0,Pn.Z)(["\n  position: relative;\n"]))),Kn=Tn.ZP.div(Z||(Z=(0,Pn.Z)(["\n  right: -5px;\n  bottom: 0px;\n  position: absolute;\n"]))),Un=Tn.ZP.input(v||(v=(0,Pn.Z)(["\n  width: 50px;\n  border: none;\n  text-align: right;\n  padding: 0 0 0 5px;\n  border-bottom: 1px solid ",";\n  &:focus-visible {\n    outline: none;\n  }\n"])),wn.Z.secondary),Hn=Tn.ZP.div(b||(b=(0,Pn.Z)(["\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  display: flex;\n  position: fixed;\n  padding: 10px;\n  align-items: center;\n  justify-content: space-around;\n  background-color: ",";\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n"])),wn.Z.rgbaBlack),Yn=Tn.ZP.textarea(j||(j=(0,Pn.Z)(["\n  border: none;\n  width: 100%;\n  height: 25px;\n  font-style: italic;\n  &:focus {\n    outline: none;\n  }\n"]))),Gn=t(5164),zn=t(2153),Ln=t(7123),Bn=t(3454),Xn=t(3070),Qn=t(6417),Wn=Xn.rh.QUANTITY_ACHIEVE_TYPE,Jn=Xn.rh.WEIGHT_ACHIEVE_TYPE,$n=Xn.rh.MONEY_ACHIEVE_TYPE,ne=Xn.ad.GIFT_TYPE,ee=Xn.ad.MONEY_TYPE,te=Xn.ad.PRODUCT_TYPE,re=Xn.fH.MONEY_FIXED_VALUE,ie=Xn.fH.MONEY_PERCENT_OF_ORDER_VALUE,oe=Xn.fH.MONEY_PERCENT_OF_DIFFERENCE_ORDER_VALUE,ae=Xn.fH.MONEY_ORDER_QUANTITY,ce=Xn.fH.MONEY_DIFFERENCE_ORDER_QUANTITY,de=Xn.fH.MONEY_ORDER_WEIGHT,se=Xn.fH.MONEY_DIFFERENCE_ORDER_WEIGHT,ue="buy_products",le="other",pe="buy_any_product",he="buy_simultaneously_products",xe=[{value:Wn,label:"T\u1ed5ng s\u1ed1 l\u01b0\u1ee3ng t\u1ed1i thi\u1ec3u \u0111\u1ea1t"},{value:Jn,label:"T\u1ed5ng kh\u1ed1i l\u01b0\u1ee3ng t\u1ed1i thi\u1ec3u \u0111\u1ea1t"},{value:$n,label:"T\u1ed5ng ti\u1ec1n t\u1ed1i thi\u1ec3u \u0111\u1ea1t"}],fe=function(n){var e=n.buyProductConditions,t=n.confirmAddNewCondition,r=n.isSelectedBuyAnyProduct,i=n.setIsAddingProductCondition,o=(0,pn.cI)({defaultValues:{}}),a=o.register,c=o.setValue,d=(o.clearErrors,o.handleSubmit),s=o.formState.errors,u=(0,L.useState)([]),l=(0,Y.Z)(u,2),p=l[0],h=l[1],x=function(n){var e=n&&n.node||{},t=e.code,r=e.name,i=e.netUnitValue,o=e.unitString;return"".concat(t," - ").concat((0,jn.Z)(r)," (").concat(i).concat(o,")")};return(0,L.useEffect)((function(){h([])}),[r]),(0,Qn.jsxs)(Qn.Fragment,{children:[p.map((function(n,e){return(0,Qn.jsxs)(Rn,{children:[(0,Qn.jsx)(kn,{children:(0,Qn.jsxs)("p",{children:[e+1,". ",x(n)]})}),(0,Qn.jsx)(sn.Z,{label:"Xo\xe1",margin:"0 0 0 10px",onClick:function(){return function(n){var e=p.filter((function(e){return e.node.code!==n.node.code}));h(e)}(n)}})]},e)})),(0,Qn.jsx)(kn,{children:(0,Qn.jsx)(vn.Z,{isSelectOne:!0,selectedList:p,onClickSelectResultItem:function(n){if(-1===p.findIndex((function(e){return e.node.code===n.node.code}))){var e=r?0:1,t={node:(0,ln.Z)((0,ln.Z)({},n.node),{},{minRequireValue:e})};h([].concat((0,un.Z)(p),[t]))}},searchPlaceholder:"B\u1ea5m ch\u1ecdn s\u1ea3n ph\u1ea9m"})}),(0,Qn.jsxs)(kn,{style:{alignItems:"flex-end"},children:[(0,Qn.jsx)(fn.Z,{register:a,setFieldValue:c,name:"productConditionType",options:xe,isError:!!s.productConditionType,validations:{required:!0}}),(0,Qn.jsx)(xn.Z,{type:"number",width:"120px",textAlign:"right",lineHeight:"19px",register:a,name:"minTotalRequireValue",validations:{required:!0,min:1},isError:!!s.minTotalRequireValue,errorMessage:"*B\u1eaft bu\u1ed9c \u2265 1"})]}),(0,Qn.jsxs)(kn,{children:[(0,Qn.jsx)(dn.Z,{label:"X\xe1c nh\u1eadn",onClick:d((function(n){if(p.length){var e=(new Date).toISOString(),r=n.productConditionType,i=n.minTotalRequireValue;t({products:p,productConditionType:r,minTotalRequireValue:i,code:e})}}))}),!!e.length&&(0,Qn.jsx)(sn.Z,{label:"Hu\u1ef7",onClick:function(){return i(!1)}})]})]})},ge=function(n){var e=n.condition,t=n.removeCondition,r=e.code,i=e.products,o=e.productConditionType,a=e.minTotalRequireValue,c=function(){var n=i[0].node.unitString;switch(o){case $n:return{unitString:"\u0111",label:"ti\u1ec1n mua"};case Wn:return{unitString:"s\u1ea3n ph\u1ea9m",label:"s\u1ed1 l\u01b0\u1ee3ng"};case Jn:return{unitString:n,label:"kh\u1ed1i l\u01b0\u1ee3ng"};default:return""}}(),d=i.every((function(n){return 0===n.node.minRequireValue})),s=function(n,e){var t=n.node,r=t.minRequireValue,i=t.code,o=t.name,a=t.netUnitValue,c=t.unitString,d=(t.productInfo||{}).name;return r?(0,Qn.jsxs)("p",{children:[e+1,". ",i," - ",(0,jn.Z)(o||d)," (",a,c,")"]}):null},u=function(n,e){var t=n.node,r=t.code,i=t.name,o=t.netUnitValue,a=t.unitString,c=(t.productInfo||{}).name;return(0,Qn.jsxs)(kn,{children:[e+1,". ",r," - ",(0,jn.Z)(i||c)," (",o,a,")"]})},l=d?(0,Qn.jsx)(Sn,{children:i.map((function(n,e){return(0,Qn.jsx)(L.Fragment,{children:u(n,e)},e)}))}):(0,Qn.jsx)(Sn,{children:i.map((function(n,e){return(0,Qn.jsx)(Mn,{children:s(n,e)},e)}))});return(0,Qn.jsxs)(qn,{children:[l,(0,Qn.jsxs)("p",{children:["T\u1ed5ng ",c.label," \u0111\u1ea1t t\u1ed1i thi\u1ec3u:"," ",(0,Qn.jsx)(In,{children:Number(a).toLocaleString()})," ",c.unitString]}),(0,Qn.jsx)("hr",{}),(0,Qn.jsx)(Kn,{children:(0,Qn.jsx)(sn.Z,{label:"Xo\xe1",onClick:function(){return t(r)}})})]})},me=function(n){var e=n.promotionProducts,t=n.confirmAddPromotionProduct,r=n.setIsAddingPromotionProduct,i=(0,pn.cI)({defaultValues:{}}),o=(i.register,i.setValue,i.clearErrors,i.handleSubmit),a=(i.formState.errors,(0,L.useState)([])),c=(0,Y.Z)(a,2),d=c[0],s=c[1],u=function(n){var e=n&&n.node||{},t=e.code,r=e.name,i=e.netUnitValue,o=e.unitString;return"".concat(t," - ").concat(r[0].showText," (").concat(i).concat(o,")")};return(0,Qn.jsxs)(Qn.Fragment,{children:[d.map((function(n,e){var t;return(0,Qn.jsxs)(Rn,{children:[(0,Qn.jsx)(kn,{children:(0,Qn.jsxs)("p",{children:[e+1,". T\u1eb7ng",(0,Qn.jsx)(Fn,{min:0,type:"number",name:n&&(null===(t=n.node)||void 0===t?void 0:t.code),value:d[e].node.quantity,onChange:function(n){return function(n,e){var t=Number(n.target.value);t>=1?(d[e].node.quantity=t,s((0,un.Z)(d))):(d[e].node.quantity=1,s((0,un.Z)(d)))}(n,e)}}),u(n)]})}),(0,Qn.jsx)(sn.Z,{label:"Xo\xe1",margin:"0 0 0 10px",onClick:function(){return function(n){var e=d.filter((function(e){return e.node.code!==n.node.code}));s(e)}(n)}})]},e)})),(0,Qn.jsx)(kn,{children:(0,Qn.jsx)(vn.Z,{isSelectOne:!0,selectedList:[].concat((0,un.Z)(e),(0,un.Z)(d)),onClickSelectResultItem:function(n){if(-1===d.findIndex((function(e){return e.node.code===n.node.code}))){var e={node:(0,ln.Z)((0,ln.Z)({},n.node),{},{quantity:1})};s([].concat((0,un.Z)(d),[e]))}},searchPlaceholder:"B\u1ea5m ch\u1ecdn s\u1ea3n ph\u1ea9m"})}),(0,Qn.jsxs)(kn,{children:[(0,Qn.jsx)(dn.Z,{label:"X\xe1c nh\u1eadn",onClick:o((function(n){if(d.length){var e=d.filter((function(n){return n.node.quantity>0}));t(e)}}))}),!!e.length&&(0,Qn.jsx)(sn.Z,{label:"Hu\u1ef7",onClick:function(){return r(!1)}})]})]})},Ze=function(n){var e,t,r,i=n.register,o=n.errors,a=n.setValue,c=n.initDetail,d=n.clearErrors,s=n.conditionType,u=n.minAchieveTypes,l=n.setIsNewPromotionProducts,p=c||{},h=p.value,x=p.giftDescription,f=p.moneyMethodCode,g=p.paymentTypeCode,m=p.products,Z=function(){switch(s){case le:return[{value:ee,label:"Ti\u1ec1n"},{value:ne,label:"Hi\u1ec7n v\u1eadt"}];case ue:return[{value:ee,label:"Ti\u1ec1n"},{value:te,label:"S\u1ea3n ph\u1ea9m"}];default:return[{value:ee,label:"Ti\u1ec1n"},{value:ne,label:"Hi\u1ec7n v\u1eadt"},{value:te,label:"S\u1ea3n ph\u1ea9m"}]}}(),v=function(){var n=[re];return u.includes(Wn)&&(n=[].concat((0,un.Z)(n),[ae,ce])),u.includes(Jn)&&(n=[].concat((0,un.Z)(n),[de,se])),u.includes($n)&&(n=[].concat((0,un.Z)(n),[ie,oe])),n}(),b=m.map((function(n){return{node:n}})),j=(0,L.useRef)(null),y=(0,L.useState)([]),C=(0,Y.Z)(y,2),P=C[0],T=C[1],w=(0,L.useState)(!1),E=(0,Y.Z)(w,2),k=E[0],S=E[1],I=(0,L.useState)(g||Z[0].value),O=(0,Y.Z)(I,2),_=O[0],A=O[1],N=P.length>0,D=k||!N,R=v.find((function(n){return n.value===f}))||{value:"",label:""},M=(0,L.useState)(R),V=(0,Y.Z)(M,2),F=V[0],q=V[1],K=(0,L.useState)(h||0),U=(0,Y.Z)(K,2),H=U[0],G=U[1],z=v.length>1,B=_===ee,X=F&&F.label.slice(10),Q=(0,Qn.jsxs)(Qn.Fragment,{children:[(0,Qn.jsxs)(kn,{children:[(0,Qn.jsx)(Vn,{children:"M\xf4 t\u1ea3"}),":",(0,Qn.jsx)(xn.Z,{placeholder:"T\xean hi\u1ec7n v\u1eadt",name:"detail.giftDescription",register:i,isError:!(null===(e=o.detail)||void 0===e||!e.giftDescription),validations:{required:!0}})]}),(0,Qn.jsxs)(kn,{children:[(0,Qn.jsx)(Vn,{children:"Tr\u1ecb gi\xe1 (\u0111)"}),":",(0,Qn.jsx)(xn.Z,{type:"number",placeholder:"Tr\u1ecb gi\xe1",name:"detail.giftValue",register:i,isError:!(null===(t=o.detail)||void 0===t||!t.giftValue),validations:{required:!0}})]})]}),W=(0,Qn.jsx)(Qn.Fragment,{children:z&&(0,Qn.jsxs)(Qn.Fragment,{children:[(0,Qn.jsxs)(Dn,{value:F.value,onChange:function(n){var e=n.target.value,t=v.find((function(n){return n.value===e}));q(t),a("detail.moneyMethodCode",e),d("detail.moneyMethodCode"),j.current.focus()},children:[(0,Qn.jsx)("option",{value:"",disabled:!0,children:"Ch\u1ecdn ph\u01b0\u01a1ng th\u1ee9c t\xednh"}),v.map((function(n,e){return(0,Qn.jsx)("option",{value:n.value,children:n.label},e)}))]}),(0,Qn.jsx)(Cn.Z,{isError:!(null===(r=o.detail)||void 0===r||!r.moneyMethodCode)})]})}),J=function(n,e){var t=n.node||{},r=t.code,i=t.name,o=t.netUnitValue,a=t.unitString,c=t.quantity;return(0,Qn.jsxs)("p",{children:[e+1,". T\u1eb7ng ",c," SP ",r," - ",(0,jn.Z)(i)," (",o,a,")"]})},$=(0,Qn.jsxs)(Qn.Fragment,{children:[N&&(0,Qn.jsxs)(Qn.Fragment,{children:[(0,Qn.jsx)(Mn,{children:(0,Qn.jsx)("p",{children:"Danh s\xe1ch s\u1ea3n ph\u1ea9m \u0111\u01b0\u1ee3c t\u1eb7ng:"})}),P.map((function(n,e){return(0,Qn.jsxs)(Mn,{children:[J(n,e),(0,Qn.jsx)(sn.Z,{label:"Xo\xe1",onClick:function(){return function(n){var e=P.filter((function(e){return e.node.code!==n.node.code}));l(!0),T(e)}(n)}})]},e)})),!k&&(0,Qn.jsx)(hn.Z,{label:"+ Th\xeam s\u1ea3n ph\u1ea9m",onClick:function(){return S(!0)}})]}),D&&(0,Qn.jsx)(Qn.Fragment,{children:(0,Qn.jsx)(me,{promotionProducts:P,setPromotionProducts:T,confirmAddPromotionProduct:function(n){var e=(0,un.Z)(P);n.forEach((function(n){var t=n.node,r=t.code,i=t.quantity,o=e.findIndex((function(n){return n.node.code===r}));-1===o?e=[].concat((0,un.Z)(e),[n]):o>=0&&(e=e.map((function(n,e){if(e===o){var t=n.node.quantity;return n.node.quantity=t+i,n}return n})))})),l(!0),S(!1),T(e),a("detail.products",e)},setIsAddingPromotionProduct:S})})]}),nn=function(){switch(_){case ne:return Q;case ee:return W;case te:return $;default:return null}}();return(0,L.useEffect)((function(){T(b||[]),a("detail.products",b||[]),a("detail.giftValue",x&&h||void 0),a("detail.giftDescription",x||void 0),a("detail.moneyMethodValue",h||0),A(g||Z[0].value),a("detail.paymentTypeCode",g||Z[0].value)}),[s]),(0,Qn.jsxs)(Qn.Fragment,{children:[(0,Qn.jsx)(Nn,{value:_,onChange:function(n){var e=n.target.value;A(e),G(0),T([]),a("detail.paymentTypeCode",e),a("detail.products",[]),a("detail.moneyMethodValue",0),a("detail.giftValue",void 0),a("detail.giftDescription",void 0),e===ee?(q({value:"",label:""}),a("detail.moneyMethodCode",void 0)):a("detail.moneyMethodCode",void 0)},children:Z.map((function(n,e){return(0,Qn.jsx)("option",{value:n.value,children:n.label},e)}))}),nn,(0,Qn.jsx)(kn,{style:{display:"flex-end"},children:B&&(0,Qn.jsxs)("p",{children:["Ti\u1ec1n ="," ",(0,Qn.jsx)(Un,{min:0,type:"number",value:H,ref:j,onChange:function(n){var e=n.target.value;Number(e)>=0&&(G(Number(e)),a("detail.moneyMethodValue",Number(e)))}})," ",X]})})]})},ve=function(n){var e=n.discountPromotionItem,t=e._id,r=e.typeCode,i=e.title,o=e.payWhenCreateOrder,a=e.isApplyForAll,c=e.startTime,d=e.endTime,s=e.conditions,u=e.isBuyAnyProductOfConditions,l=e.detail,p=e.beAppliedAccountIds,h=e.beAppliedCustomers,x=e.note,f=e.otherConditionDescription,g=(0,yn.hz)({isoString:c}),m=(0,yn.hz)({isoString:d}),Z=s.map((function(n){var e=n.products.map((function(n){return{node:n}}));return(0,ln.Z)((0,ln.Z)({},n),{},{products:e})})),v=h&&h.map((function(n){return{node:n}})),b=l.giftDescription,j=l.moneyMethodCode,y=l.paymentTypeCode,C=(l.products,l.value),P=(0,pn.cI)({defaultValues:{title:(0,jn.Z)(i),startTime:g,endTime:m,detail:{giftDescription:b,moneyMethodCode:j,giftValue:C},note:(0,jn.Z)(x),beAppliedAccounts:p,otherConditionDescription:f}}),T=P.watch,w=P.register,E=P.setValue,k=P.clearErrors,S=P.handleSubmit,I=P.formState.errors,O=(0,X.I0)(),_=window.innerWidth<=768?"\u0110I\u1ec0U KI\u1ec6N:":"\u0110I\u1ec0U KI\u1ec6N C\u1ea6N \u0110\u1ea0T:",A=(0,B.D)(Bn.GG,{refetchQueries:[{query:Ln.Kr},"GET_DISCOUNT_PROMOTIONS"]}),N=(0,Y.Z)(A,1)[0],D=(0,B.D)(Bn.CS),R=(0,Y.Z)(D,1)[0],M=(0,B.D)(Bn.sY,{refetchQueries:[{query:Ln.Kr},"GET_DISCOUNT_PROMOTIONS"]}),V=(0,Y.Z)(M,1)[0],F=(0,B.D)(Bn.Am,{refetchQueries:[{query:Ln.Kr},"GET_DISCOUNT_PROMOTIONS"]}),q=(0,Y.Z)(F,1)[0],K=(0,B.D)(Bn.BQ,{refetchQueries:[{query:Ln.Kr},"GET_DISCOUNT_PROMOTIONS"]}),U=(0,Y.Z)(K,1)[0],H=(0,L.useState)(a),Q=(0,Y.Z)(H,2),W=Q[0],J=Q[1],$=(0,L.useState)(v||[]),nn=(0,Y.Z)($,2),en=nn[0],tn=nn[1],rn=(0,L.useState)(o),on=(0,Y.Z)(rn,2),an=on[0],cn=on[1],dn=(0,L.useState)(Z),fn=(0,Y.Z)(dn,2),vn=fn[0],Cn=fn[1],Pn=(0,L.useState)(!1),Tn=(0,Y.Z)(Pn,2),wn=Tn[0],Sn=Tn[1],In=(0,L.useState)(!1),Nn=(0,Y.Z)(In,2),Dn=Nn[0],Rn=Nn[1],Fn=r===le?le:u?pe:he,qn=(0,L.useState)(Fn),Kn=(0,Y.Z)(qn,2),Un=Kn[0],Wn=Kn[1],Jn=(0,L.useState)(r),$n=(0,Y.Z)(Jn,2),ne=$n[0],te=$n[1],ie=(0,L.useState)(!1),oe=(0,Y.Z)(ie,2),ae=oe[0],ce=oe[1];w("beAppliedAccounts",{required:!W});var de=vn.map((function(n){return n.productConditionType})),se=Un===pe,xe=vn.length>0,me=ne===ue;w("detail.moneyMethodCode",{required:T("detail.paymentTypeCode")===ee});var ve=(ae||!xe)&&me,be=function(n){Sn(!0);var e=vn.filter((function(e){return e.code!==n}));Cn(e)},je=function(){var n=(0,z.Z)((0,G.Z)().mark((function n(e){var o,s,u,l,h,g,m,Z,v,P,T,w,E,k,S,I,_,A,D,M,F,K,H,Y,z,L,B,X,Q,J,$,nn,tn;return(0,G.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(O((0,Gn.S$)()),o=e.title,s=e.note,u=e.detail,l=e.endTime,h=e.startTime,g=e.otherConditionDescription,m=u.giftDescription,Z=u.giftValue,v=u.moneyMethodCode,P=u.moneyMethodValue,T=u.paymentTypeCode,w=u.products,E=void 0===w?[]:w,k=Un===pe,S=Number(Z)||Number(P)||0,I=vn.map((function(n){var e=n.products,t=n.minTotalRequireValue;return{productConditionType:n.productConditionType,products:e.map((function(n){var e=n.node;return{code:e.code,netUnitValue:e.netUnitValue,unitString:e.unitString,minRequireValue:e.minRequireValue}})),minTotalRequireValue:Number(t)}})),_=en.map((function(n){return n.node._id})),A=E.map((function(n){var e=n.node;return{code:e.code,price:e.price,netUnitValue:e.netUnitValue,unitString:e.unitString,quantity:e.quantity}})),D=v||(ne===le?T===ee?re.value:v:void 0),M={discountPromotionId:t},F=m&&m!==b,K=S!==C,H=(0,ln.Z)((0,ln.Z)((0,ln.Z)({},o!==(0,jn.Z)(i)&&{title:[{showText:o,locale:"vi"}]}),s!==(0,jn.Z)(x)&&{note:[{showText:s,locale:"vi"}]}),!me&&(0,ln.Z)((0,ln.Z)({},g!==f&&{otherConditionDescription:g}),(F||K)&&{detail:(0,ln.Z)((0,ln.Z)({},F&&{giftDescription:m}),K&&{value:S})})),!!!Object.keys(H).length){n.next=20;break}return n.next=17,N({variables:{data:H,where:M}});case 17:if(n.sent.data){n.next=20;break}return n.abrupt("return",alert("Update title wrong!"));case 20:if(Y=function(){var n=[];return p.forEach((function(e){_.includes(e)||(n=[].concat((0,un.Z)(n),[e]))})),n}(),z=function(){var n=[];return _.forEach((function(e){p.includes(e)||(n=[].concat((0,un.Z)(n),[e]))})),n}(),a||!Y.length&&!z.length){n.next=29;break}return L=(0,ln.Z)((0,ln.Z)({},!!Y.length&&{beRemovedAccountIds:Y}),!!z.length&&{beAddedAccountIds:z}),n.next=26,R({variables:{data:L,where:M}});case 26:if(n.sent.data){n.next=29;break}return n.abrupt("return",alert("Update be applied accounts wrong!"));case 29:if(!(W!==a)){n.next=39;break}return B={},a&&!W&&(B={isApplyForAll:W,beAppliedAccountIds:_}),!a&&W&&(B={isApplyForAll:W}),n.next=36,R({variables:{data:B,where:M}});case 36:if(n.sent.data){n.next=39;break}return n.abrupt("return",alert("Update be applied accounts wrong!"));case 39:if(!(new Date(h).toISOString()!==new Date(c).toISOString())){n.next=47;break}return X={newStartTime:new Date(h).toISOString()},n.next=44,V({variables:{data:X,where:M}});case 44:if(n.sent.data){n.next=47;break}return n.abrupt("return",alert("Update startTime wrong!"));case 47:if(!(new Date(l).toISOString()!==new Date(d).toISOString())){n.next=55;break}return Q={newEndTime:new Date(l).toISOString()},n.next=52,q({variables:{data:Q,where:M}});case 52:if(n.sent.data){n.next=55;break}return n.abrupt("return",alert("Update endTime wrong!"));case 55:if(J=T!==y,$=(!!D||!!j)&&D!==j,nn=me&&S!==C,!(ne!==r||wn||J||Dn||$||nn)){n.next=67;break}return tn={reCalculateData:{typeCode:ne,conditions:I,detail:{moneyMethodCode:D,products:A,value:S,giftDescription:m,paymentTypeCode:T},isBuyAnyProductOfConditions:k}},n.next=64,U({variables:{data:tn,where:M}});case 64:if(n.sent.data){n.next=67;break}return n.abrupt("return",alert("Update wrong!"));case 67:O((0,Gn.S4)()),O((0,zn.Ay)());case 69:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),ye=(0,Qn.jsxs)(Qn.Fragment,{children:[!!en.length&&en.map((function(n,e){return(0,Qn.jsxs)(Mn,{children:[(0,Qn.jsxs)("p",{children:[e+1,". ",n.node.fullName]}),(0,Qn.jsx)(sn.Z,{label:"Xo\xe1",onClick:function(){return function(n){var e=en.filter((function(e){return e.node._id!==n.node._id}));tn(e),E("beAppliedAccounts",e)}(n)}})]},e)})),(0,Qn.jsx)(bn.Z,{selectedList:en,roles:[Xn.If.CUSTOMER],isError:!!I.beAppliedAccounts,onClickSelectResultItem:function(n){if(-1===en.findIndex((function(e){return e.node._id===n.node._id}))){var e=[].concat((0,un.Z)(en),[n]);tn(e),E("beAppliedAccounts",e),k("beAppliedAccounts")}},searchPlaceholder:"T\xecm ki\u1ebfm kh\xe1ch h\xe0ng"})]}),Ce=xe?(0,Qn.jsxs)(Qn.Fragment,{children:[vn.map((function(n,e){return(0,Qn.jsx)(ge,{condition:n,removeCondition:be},e)})),!ae&&(0,Qn.jsx)(hn.Z,{label:"+ Th\xeam \u0111i\u1ec1u ki\u1ec7n",onClick:function(){return ce(!0)}})]}):null,Pe=(0,Qn.jsxs)(kn,{children:[(0,Qn.jsx)(Vn,{children:"N\u1ed9i dung"}),":",(0,Qn.jsx)(xn.Z,{name:"otherConditionDescription",register:w,isError:!!I.otherConditionDescription,validations:{required:!0}})]}),Te=me?Ce:Pe;return(0,Qn.jsxs)(En,{children:[(0,Qn.jsxs)(gn.Z,{children:[(0,Qn.jsxs)(kn,{children:[(0,Qn.jsx)(Vn,{style:{width:80},children:"T\xean CKKM:"}),(0,Qn.jsx)(xn.Z,{name:"title",register:w,isError:!!I.title,validations:{required:!0}})]}),(0,Qn.jsxs)(kn,{children:[(0,Qn.jsx)("input",{disabled:!0,type:"checkbox",checked:an,onChange:function(){return cn(!an)}}),(0,Qn.jsx)("span",{children:"\u2002Tr\u1ea3 CKKM ngay khi \u0111\u1eb7t h\xe0ng"})]}),(0,Qn.jsxs)(Mn,{children:[(0,Qn.jsx)(Vn,{children:"Kh\xe1ch h\xe0ng:"}),(0,Qn.jsxs)(kn,{style:{width:"fit-content"},children:[(0,Qn.jsx)("input",{type:"checkbox",checked:W,onChange:function(n){return function(n){var e=n.target.checked;J(e),e&&tn([])}(n)}}),(0,Qn.jsx)("span",{children:"\u2002\xc1p d\u1ee5ng cho t\u1ea5t c\u1ea3 KH"})]})]}),!W&&ye,(0,Qn.jsxs)(kn,{children:[(0,Qn.jsx)("p",{children:"Th\u1eddi gian:"}),(0,Qn.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,Qn.jsx)(xn.Z,{type:"date",name:"startTime",register:w,isError:!!I.startTime,validations:{required:!0}}),(0,Qn.jsx)("p",{children:"\u2002- "}),(0,Qn.jsx)(xn.Z,{type:"date",name:"endTime",register:w,isError:!!I.endTime,validations:{required:!0}})]})]})]}),(0,Qn.jsxs)(gn.Z,{style:{marginTop:60},children:[(0,Qn.jsxs)(On,{children:[(0,Qn.jsx)(_n,{children:_}),(0,Qn.jsxs)(An,{value:Un,onChange:function(n){var e=n.target.value,t=e===he||e===pe?ue:e;Cn([]),Wn(e),te(t),ce(!1),E("otherConditionDescription",void 0)},children:[(0,Qn.jsx)("option",{value:he,children:"- Khi mua \u0110\u1ed3ng th\u1eddi S\u1ea3n ph\u1ea9m"}),(0,Qn.jsx)("option",{value:pe,children:"- Khi mua B\u1ea5t k\u1ef3 S\u1ea3n ph\u1ea9m"}),(0,Qn.jsx)("option",{value:le,children:"- Kh\xe1c"})]})]}),Te,ve&&(0,Qn.jsx)(fe,{buyProductConditions:vn,confirmAddNewCondition:function(n){Sn(!0);var e=[].concat((0,un.Z)(vn),[n]);ce(!1),Cn(e)},isSelectedBuyAnyProduct:se,setBuyProductConditions:Cn,setIsAddingProductCondition:ce})]}),(0,Qn.jsx)(gn.Z,{title:"T\u1eb6NG/CKKM:",children:(0,Qn.jsx)(Ze,{errors:I,register:w,setValue:E,initDetail:l,clearErrors:k,conditionType:ne,minAchieveTypes:de,setIsNewPromotionProducts:Rn})}),(0,Qn.jsx)(gn.Z,{title:"GHI CH\xda",style:{padding:0},children:(0,Qn.jsx)(Yn,(0,ln.Z)((0,ln.Z)({},w("note")),{},{placeholder:"N\u1ed9i dung ghi ch\xfa (n\u1ebfu c\xf3)..."}))}),(0,Qn.jsxs)(Hn,{children:[(0,Qn.jsx)(Zn.Z,{label:"HU\u1ef6",onClick:function(){return O((0,zn.Ay)())}}),(0,Qn.jsx)(mn.Z,{label:"X\xc1C NH\u1eacN",onClick:S(je)})]})]})},be=(Tn.ZP.div(y||(y=(0,Pn.Z)(["\n  padding: 0;\n  font-size: 12px;\n"]))),Tn.ZP.div(C||(C=(0,Pn.Z)(["\n  margin: 20px 0;\n  background-color: #fff;\n  padding: 15px 10px 10px;\n  box-shadow: 0px 2px 1px -1px rgb(0 0 0 / 20%),\n    0px 1px 1px 0px rgb(0 0 0 / 14%), 0px 1px 3px 0px rgb(0 0 0 / 12%);\n"]))),Tn.ZP.div(P||(P=(0,Pn.Z)([""]))),Tn.ZP.div(T||(T=(0,Pn.Z)(["\n  display: flex;\n  margin: 15px auto;\n  width: fit-content;\n  justify-content: center;\n  border: solid 1px ",";\n"])),wn.Z.primary),Tn.ZP.div(w||(w=(0,Pn.Z)(["\n  padding: 5px 10px;\n  cursor: pointer;\n  text-align: center;\n  color: ",";\n  border-left: 1px solid ",";\n  background-color: ",";\n"])),(function(n){return n.activeColor.textColor}),(function(n){return n.borderLeftColor}),(function(n){return n.activeColor.backgroundColor})),Tn.ZP.div(E||(E=(0,Pn.Z)(["\n  position: relative;\n  border-radius: 4px;\n  background-color: #fff;\n  padding: 15px 10px 10px;\n  margin: ",";\n  cursor: ",";\n  box-shadow: 0px 2px 1px -1px rgb(0 0 0 / 20%),\n    0px 1px 1px 0px rgb(0 0 0 / 14%), 0px 1px 3px 0px rgb(0 0 0 / 12%);\n"])),(function(n){return n.customerMargin}),(function(n){return n.canApproveDiscountPromotion?"pointer":"auto"}))),je=Tn.ZP.div(k||(k=(0,Pn.Z)([""]))),ye=(Tn.ZP.div(S||(S=(0,Pn.Z)(["\n  display: flex;\n  margin: 10px 0 5px;\n  align-items: center;\n  justify-content: space-between;\n"]))),Tn.ZP.div(I||(I=(0,Pn.Z)(["\n  margin: 5px 0 15px;\n"])))),Ce=Tn.ZP.div(O||(O=(0,Pn.Z)(["\n  margin: 0 0 15px;\n"]))),Pe=Tn.ZP.p(_||(_=(0,Pn.Z)(["\n  font-weight: 700;\n  color: ",";\n"])),wn.Z.primary),Te=Tn.ZP.p(A||(A=(0,Pn.Z)(["\n  font-weight: 700;\n"]))),we=Tn.ZP.span(N||(N=(0,Pn.Z)(["\n  font-weight: 500;\n"]))),Ee=Tn.ZP.span(D||(D=(0,Pn.Z)(["\n  font-weight: 700;\n"]))),ke=Tn.ZP.span(R||(R=(0,Pn.Z)(["\n  font-weight: 500;\n  font-style: italic;\n  color: ",";\n"])),wn.Z.black),Se=Tn.ZP.span(M||(M=(0,Pn.Z)(["\n  font-size: 12px;\n  font-style: italic;\n  color: ",";\n"])),wn.Z.secondary),Ie=Tn.ZP.p(V||(V=(0,Pn.Z)(["\n  margin: 5px 0 0;\n  font-size: 12px;\n  width: fit-content;\n  font-style: italic;\n  color: ",";\n"])),wn.Z.primary),Oe=Tn.ZP.div(F||(F=(0,Pn.Z)(["\n  display: flex;\n  algin-items: center;\n  justify-content: space-between;\n"]))),_e=(Tn.ZP.div(q||(q=(0,Pn.Z)(["\n  bottom: 5px;\n  position: absolute;\n  right: ",";\n"])),(function(n){return n.right})),Tn.ZP.div(K||(K=(0,Pn.Z)(["\n  top: 0;\n  right: 10px;\n  color: #777;\n  font-size: 20px;\n  cursor: pointer;\n  width: fit-content;\n  position: absolute;\n"])))),Ae=Tn.ZP.div(U||(U=(0,Pn.Z)(["\n  top: 20px;\n  right: 10px;\n  padding: 5px 10px 0;\n  position: absolute;\n  border-radius: 5px;\n  background-color: #fff;\n  display: ",";\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n"])),(function(n){return n.display})),Ne=Tn.ZP.div(H||(H=(0,Pn.Z)(["\n  display: flex;\n  padding: 3px 7px;\n  margin: 10px 0 15px;\n  color: ",";\n  margin: ",";\n  & p {\n    margin: 0 5px;\n  }\n  &:hover {\n    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n  }\n"])),(function(n){return n.color}),(function(n){return n.margin})),De=t(7119),Re=Xn.fH.MONEY_FIXED_VALUE,Me=Xn.fH.MONEY_PERCENT_OF_ORDER_VALUE,Ve=Xn.fH.MONEY_PERCENT_OF_DIFFERENCE_ORDER_VALUE,Fe=Xn.fH.MONEY_ORDER_QUANTITY,qe=Xn.fH.MONEY_DIFFERENCE_ORDER_QUANTITY,Ke=Xn.fH.MONEY_ORDER_WEIGHT,Ue=Xn.fH.MONEY_DIFFERENCE_ORDER_WEIGHT,He=(0,L.lazy)((function(){return t.e(7471).then(t.bind(t,7471))})),Ye=function(n){var e=n.message,t=n.updateFunction,r=(0,X.I0)(),i=function(){var n=(0,z.Z)((0,G.Z)().mark((function n(){return(0,G.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t();case 2:n.sent.data&&r((0,zn._w)());case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,Qn.jsxs)(Qn.Fragment,{children:[(0,Qn.jsx)("p",{style:{margin:10},children:e}),(0,Qn.jsxs)("div",{style:{display:"flex",width:"100%",justifyContent:"center"},children:[(0,Qn.jsx)(sn.Z,{label:"\u0110\xf3ng l\u1ea1i",onClick:function(){return r((0,zn._w)())}}),(0,Qn.jsx)(cn.Z,{label:"X\xe1c nh\u1eadn",onClick:i})]})]})},Ge=function(n){var e,t=n.customerMargin,r=n.discountPromotionItem,i=(0,X.I0)(),o=(0,X.v9)((function(n){return n.authReducer})).viewerQuery,a=((0,X.v9)((function(n){return n.firstSubModalReducer})).visible,(o||{}).permissions),c=a.includes(De.gz.CAN_APPROVE_DISCOUNT_PROMOTION),d=a.includes(De.gz.CAN_DELETE_DISCOUNT_PROMOTION),s=localStorage.getItem(Xn.pP),u=(JSON.parse(s||"")||{}).totalProductCount,l=(0,L.useRef)(null),p=(0,L.useState)(!1),h=(0,Y.Z)(p,2),x=h[0],f=h[1],g=x?"block":"none",m=r||{},Z=m._id,v=(m.code,m.typeCode),b=m.startTime,j=m.endTime,y=m.title,C=m.conditions,P=m.detail,T=m.isApproved,w=m.payWhenCreateOrder,E=m.isBuyAnyProductOfConditions,k=m.otherConditionDescription,S=m.createdAt,I=P.moneyMethodCode,O=P.products,_=P.value,A=P.giftDescription,N=P.paymentTypeCode,D=(0,Q.Z)(j),R=(0,W.Z)(D,new Date),M=(0,J.Z)(new Date,new Date(S))<=1,V=d&&M,F=(0,B.D)(Bn.GG,{refetchQueries:[{query:Ln.Kr},"GET_DISCOUNT_PROMOTIONS",{query:Ln.hM},"GET_DISCOUNT_PROMOTION_DIARIES"]}),q=(0,Y.Z)(F,1)[0],K=(0,B.D)(Bn.dF,{refetchQueries:[{query:Ln.Kr},"GET_DISCOUNT_PROMOTIONS",{query:Ln.hM},"GET_DISCOUNT_PROMOTION_DIARIES"]}),U=(0,Y.Z)(K,1)[0],H=v===Xn.t_.OTHER,cn=E?"Khi mua B\u1ea5t k\u1ef3 S\u1ea3n ph\u1ea9m":"Khi mua \u0110\u1ed3ng th\u1eddi S\u1ea3n ph\u1ea9m",dn=(0,yn.dh)(b),sn=(0,yn.dh)(j),un=y&&(null===(e=y[0])||void 0===e?void 0:e.showText),ln=w?"Tr\u1ea3 ngay khi \u0111\u1eb7t h\xe0ng":"Tr\u1ea3 sau",pn=function(n){var e=n.length===u,t=function(n,e){var t=n.code,r=(n.productInfo||{}).name;return(0,Qn.jsxs)("p",{children:["- ",t," - ",(0,jn.Z)(r)]})};return e?E?"Trong t\u1ea5t c\u1ea3 s\u1ea3n ph\u1ea9m":"T\u1ea5t c\u1ea3 s\u1ea3n ph\u1ea9m":(0,Qn.jsx)(Qn.Fragment,{children:n.map((function(n,e){return(0,Qn.jsx)(L.Fragment,{children:t(n)},e)}))})},hn=(0,Qn.jsxs)(Qn.Fragment,{children:[(0,Qn.jsxs)(ye,{children:[(0,Qn.jsxs)(Te,{children:["\u0110i\u1ec1u ki\u1ec7n:"," ",C&&!!C.length&&(0,Qn.jsx)(we,{children:cn})]}),H&&k]}),C&&C.map((function(n,e){var t=n.products,r=n.productConditionType,i=n.minTotalRequireValue,o=(0,yn.RX)(r,t[0].netUnitValue,t[0].unitString);return(0,Qn.jsxs)(Ce,{children:[pn(t),(0,Qn.jsxs)("p",{children:["T\u1ed5ng ",o.type," c\u1ea7n \u0111\u1ea1t:"," ",i.toLocaleString()," ",o.unit]})]},e)}))]}),xn=(0,Qn.jsxs)(Qn.Fragment,{children:[(0,Qn.jsx)("hr",{})," ",function(){var n=[Re,Me,Ve,Fe,qe,Ke,Ue];switch(N){case Xn.ad.MONEY_TYPE:var e=n.find((function(n){return n.value===I}));return(0,Qn.jsxs)(Qn.Fragment,{children:[(0,Qn.jsx)(Ee,{children:"T\u1eb7ng/CKKM:"}),(0,Qn.jsx)("p",{children:function(n){if(n.value===Re.value)return"Ti\u1ec1n m\u1eb7t ".concat(_.toLocaleString()," \u0111");var e=n.value.includes("percent_of")?"%":"\u0111";return"Ti\u1ec1n = ".concat(_.toLocaleString()).concat(e)+n.label.slice(12)}(e)})]});case Xn.ad.GIFT_TYPE:return(0,Qn.jsxs)(Qn.Fragment,{children:[(0,Qn.jsx)(Ee,{children:"T\u1eb7ng/CKKM:"}),(0,Qn.jsxs)("p",{children:[A," tr\u1ecb gi\xe1 ",_.toLocaleString()," \u0111"]})]});case Xn.ad.TAX_OFFSET:return"C\u1ea5n tr\u1eeb: ".concat(A," ").concat(_.toLocaleString()," \u0111");case Xn.ad.PRODUCT_TYPE:return function(n){var e=function(n,e){var t=n.code,r=n.quantity,i=(n.productInfo||{}).name;return(0,Qn.jsxs)("p",{children:[(0,Qn.jsx)(Se,{children:"- T\u1eb7ng"})," ",r," sp: ",t," - ",(0,jn.Z)(i)]})};return(0,Qn.jsxs)(Qn.Fragment,{children:[(0,Qn.jsx)(Ee,{children:"T\u1eb7ng/CKKM:"}),n.map((function(n,t){return(0,Qn.jsx)(L.Fragment,{children:e(n)},t)}))]})}(O);default:return null}}()]}),fn=c&&!R,gn=!T&&c,mn=H&&R,Zn=fn||gn||mn||V,vn=(0,Qn.jsxs)(Ae,{display:g,ref:l,children:[gn&&(0,Qn.jsxs)(Ne,{onClick:function(){q({variables:{data:{isApproved:!0},where:{discountPromotionId:Z}}})},children:[(0,Qn.jsx)(rn.Z,{fontSize:"small"}),(0,Qn.jsx)("p",{children:"Duy\u1ec7t CK/KM"})]}),fn&&(0,Qn.jsxs)(Ne,{color:wn.Z.orange,onClick:function(){var n={title:"S\u1eeda CKKM",children:(0,Qn.jsx)(ve,{discountPromotionItem:r})};i((0,zn.FV)(n))},children:[(0,Qn.jsx)($.Z,{fontSize:"small"}),(0,Qn.jsx)("p",{children:"S\u1eeda CK/KM"})]}),mn&&(0,Qn.jsxs)(Ne,{color:wn.Z.green,onClick:function(){var n={title:"Tr\u1ea3 CK/KM cho ch\u01b0\u01a1ng tr\xecnh d\u1ea1ng kh\xe1c",children:(0,Qn.jsx)(L.Suspense,{fallback:(0,Qn.jsx)(an.default,{}),children:(0,Qn.jsx)(on.default,{discountPromotionId:Z})})};i((0,zn.dn)(n))},children:[(0,Qn.jsx)(en.Z,{fontSize:"small"}),(0,Qn.jsx)("p",{children:"Tr\u1ea3 CK/KM"})]}),V&&(0,Qn.jsxs)(Ne,{color:wn.Z.lightRed,onClick:function(){var n={discountPromotionId:Z},e={title:"X\xe1c nh\u1eadn xo\xe1",children:(0,Qn.jsx)(Ye,{message:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn duy\u1ec7t xo\xe1 CKKM n\xe0y?",updateFunction:(0,z.Z)((0,G.Z)().mark((function e(){var t;return(0,G.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U({variables:{where:n}});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))})};i((0,zn.om)(e))},children:[(0,Qn.jsx)(tn.Z,{fontSize:"small"}),(0,Qn.jsx)("p",{children:"Xo\xe1 CK/KM"})]})]}),bn=(0,Qn.jsxs)(Qn.Fragment,{children:[(0,Qn.jsx)(_e,{onClick:function(){return f(!x)},children:(0,Qn.jsx)(nn.Z,{})}),vn]});return(0,L.useEffect)((function(){var n=function(n){l.current&&!l.current.contains(n.target)&&f(!1)};return document.addEventListener("mousedown",n),function(){document.removeEventListener("mousedown",n)}}),[l]),(0,Qn.jsxs)(be,{customerMargin:t,canApproveDiscountPromotion:c,children:[Zn&&bn,(0,Qn.jsxs)(je,{onClick:function(){if(c){var n={title:"Chi ti\u1ebft chi\u1ebft kh\u1ea5u/khuy\u1ebfn m\u1ea1i",children:(0,Qn.jsx)(L.Suspense,{fallback:(0,Qn.jsx)(an.default,{}),children:(0,Qn.jsx)(He,{discountPromotionItem:r})})};i((0,zn.FV)(n))}},children:[(0,Qn.jsxs)(Oe,{children:[(0,Qn.jsxs)(Pe,{children:[dn," - ",sn,":"," ",(0,Qn.jsx)(ke,{children:un})]}),!T&&(0,Qn.jsx)(Se,{children:"Ch\u1edd duy\u1ec7t"})]}),hn,xn,(0,Qn.jsx)(Oe,{children:(0,Qn.jsx)(Ie,{children:ln})})]})]})};Ge.defaultProps={customerMargin:"15px 5px"};var ze=Ge},6879:function(n,e,t){t.d(e,{Z:function(){return Y}});var r,i,o,a,c,d,s,u,l,p,h,x,f,g,m,Z=t(4165),v=t(5861),b=t(885),j=t(7313),y=t(3306),C=t(1677),P=t(6069),T=t(6947),w=t(168),E=t(3115),k=t(1237),S=(E.ZP.div(r||(r=(0,w.Z)(["\n  margin: 0;\n  border-radius: 3px;\n  padding: 5px 5px 1px;\n  border: solid 1px #c4c4c4;\n"]))),E.ZP.div(i||(i=(0,w.Z)(["\n  position: relative;\n"])))),I=(E.ZP.div(o||(o=(0,w.Z)(["\n  top: 0;\n  left: 0;\n  z-index: 12;\n  width: 100%;\n  height: 30px;\n  position: absolute;\n  display: ",";\n  &:hover {\n    cursor: pointer;\n  }\n"])),(function(n){return n.searchinputmaskdisplay})),E.ZP.div(a||(a=(0,w.Z)(["\n  margin-top: 10px;\n  border-bottom: solid 1px #c4c4c4;\n  & input {\n    background-color: ",";\n  }\n"])),(function(n){return n.searchBackground}))),O=E.ZP.input(c||(c=(0,w.Z)(["\n  color: #777;\n  width: 100%;\n  height: 27px;\n  border: none;\n  font-size: 13px;\n  padding: ",";\n  &:focus-visible {\n    outline: none;\n  }\n"])),(function(n){return n.searchinputpadding})),_=E.ZP.div(d||(d=(0,w.Z)(["\n  top: 5px;\n  height: 100%;\n  position: absolute;\n  right: ",";\n  &:hover {\n    cursor: pointer;\n  }\n"])),(function(n){return n.searchiconright})),A=E.ZP.p(s||(s=(0,w.Z)(["\n  top: 5px;\n  right: 10px;\n  height: 100%;\n  position: absolute;\n  transition: all 0.5s;\n  opacity: ",";\n  &:hover {\n    cursor: pointer;\n  }\n"])),(function(n){return n.upiconopacity})),N=(E.ZP.div(u||(u=(0,w.Z)(["\n  margin: 0;\n  width: 100%;\n  border-radius: 3px;\n  margin: 0 0 3px 0;\n  padding: 5px 7px 2px;\n  border: solid 1px #c4c4c4;\n  background-color: #f7f7f7;\n"]))),E.ZP.div(l||(l=(0,w.Z)(["\n  left: 0;\n  top: 30px;\n  z-index: 7;\n  width: 100%;\n  height: 300px;\n  overflow-y: auto;\n  padding: 20px 10px;\n  position: absolute;\n  border-radius: 3px;\n  transition: all 0.5s;\n  background-color: #fff;\n  border: solid 1px #f7f7f7;\n  display: ",";\n  box-shadow: 0 1px 2px 0 rgba(33, 33, 33, 0.14), 0 0 1px 0 rgba(0, 0, 0, 0.14);\n  &::-webkit-scrollbar {\n    width: 5px;\n  }\n  &::-webkit-scrollbar-track {\n    border-radius: 5px;\n    background: #ccc;\n  }\n  &::-webkit-scrollbar-track:hover {\n    background: #999;\n  }\n  &::-webkit-scrollbar-thumb {\n    border-radius: 5px;\n    background: #999;\n  }\n  &::-webkit-scrollbar-thumb:hover {\n    background: transparent;\n  }\n  &:hover {\n    &::-webkit-scrollbar-thumb {\n      background: #transparent;\n    }\n    &::-webkit-scrollbar-thumb:hover {\n      background: #transparent;\n    }\n  }\n"])),(function(n){return n.modaldisplay}))),D=E.ZP.div(p||(p=(0,w.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n"]))),R=E.ZP.div(h||(h=(0,w.Z)(["\n  padding: 3px 0;\n  cursor: pointer;\n  margin: 7px 0 0;\n  border-bottom: 1px solid ",";\n  &:hover {\n    padding: 3px 10px;\n    background-color: ",";\n  }\n"])),k.Z.bgGray,k.Z.rgbaPrimary),M=E.ZP.p(x||(x=(0,w.Z)(["\n  color: #777;\n  font-size: 12px;\n"]))),V=E.ZP.div(f||(f=(0,w.Z)(["\n  margin: 10px auto;\n"]))),F=(E.ZP.input(g||(g=(0,w.Z)(["\n  display: none;\n"]))),E.ZP.div(m||(m=(0,w.Z)(["\n  margin: -10px 0 0;\n  color: ",";\n"])),k.Z.lightRed)),q=t(7123),K=t(2206),U=t(6417),H=function(n){var e,t=n.isError,r=n.isSelectOne,i=(n.searchGuide,n.selectedList),o=n.showSelectAll,a=n.searchPlaceholder,c=n.searchBackgroundColor,d=n.onClickSelectResultItem,s=n.emptySearchResultMessage,u=n.onClickSelectAllProducts,l=["node.code","node.name[0].showText"],p=(0,j.useState)(""),h=(0,b.Z)(p,2),x=h[0],f=h[1],g=(0,j.useState)([]),m=(0,b.Z)(g,2),w=m[0],E=m[1],H=(0,y.t)(q.tT,{variables:{filter:{text:x||"a"}},fetchPolicy:"cache-and-network"}),Y=(0,b.Z)(H,2),G=Y[0],z=Y[1],L=z.data,B=z.fetchMore,X=(0,y.t)(q.Yc,{fetchPolicy:"cache-and-network"}),Q=(0,b.Z)(X,1)[0],W=L&&(null===(e=L.products)||void 0===e?void 0:e.pageInfo)||{},J=W.hasNextPage,$=w&&0===w.length,nn=(0,j.useState)(!1),en=(0,b.Z)(nn,2),tn=en[0],rn=en[1],on=!!x,an=(0,j.useRef)(null),cn=(0,j.useRef)(null),dn=tn?1:0,sn=tn?"500px":"0",un=tn&&!$?"block":"none",ln=tn?"0 0 0 10px":"0 0 0 24px",pn=tn?"30px":"calc(100% - 20px)",hn=c||k.Z.lightWhite,xn=function(n){d(n),r&&rn(!1)},fn=function(){var n=(0,v.Z)((0,Z.Z)().mark((function n(){var e;return(0,Z.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return rn(!1),n.next=3,Q();case 3:return e=n.sent,n.abrupt("return",e&&e.data.allProducts||[]);case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),gn=(0,U.jsxs)(S,{children:[(0,U.jsxs)(I,{searchBackground:hn,onClick:function(){rn(!0),an.current&&an.current.focus()},children:[(0,U.jsx)(O,{ref:an,value:x,placeholder:a,searchinputpadding:ln,onChange:function(n){return f(n.target.value)}}),(0,U.jsx)(_,{searchiconright:pn,children:"\ud83d\udd0e"}),(0,U.jsx)(A,{upiconopacity:dn,onClick:function(){rn(!1),f("")},children:"\u2716"})]}),(0,U.jsx)(T.Z,{isError:t}),(0,U.jsxs)(N,{modalheight:sn,modaldisplay:un,children:[(0,U.jsxs)(D,{children:[(0,U.jsx)("p",{children:"K\u1ebft qu\u1ea3 t\xecm ki\u1ebfm:"}),o&&(0,U.jsx)(C.Z,{label:"Ch\u1ecdn t\u1ea5t c\u1ea3",onClick:function(){return u(fn)}})]}),$?null:w.map((function(n,e){var t=l.map((function(e){return(0,P.tO)(n,e)})),r="";return t.forEach((function(n,e){r+=e>0?" - ".concat(n):n})),(0,U.jsx)(R,{onClick:function(){return xn(n)},children:(0,U.jsx)(M,{children:r})},e)})),!!J&&(0,U.jsx)(V,{children:(0,U.jsx)(C.Z,{size:"small",label:"T\u1ea3i th\xeam",onClick:function(){B({variables:{cursor:W.endCursor},updateQuery:function(n,e){var t=e.fetchMoreResult;return(0,K.d0)("products",t,n)}})}})})]})]});return(0,j.useEffect)((function(){var n=function(n){cn.current&&!cn.current.contains(n.target)&&(rn(!1),f(""))};return document.addEventListener("mousedown",n),function(){document.removeEventListener("mousedown",n)}}),[cn]),(0,j.useEffect)((function(){var n=function(){var n=(0,v.Z)((0,Z.Z)().mark((function n(){var e,t,r,o;return(0,Z.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,G();case 2:t=n.sent,r=t&&(null===(e=t.data.products)||void 0===e?void 0:e.edges)||[],o=r.filter((function(n){var e=(n||{}).node.code;return-1===i.findIndex((function(n){var t=n||{},r=t.node,i=t.code;return r?r.code===e:i===e}))})),E(o);case 6:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}),[i,x]),(0,U.jsxs)("div",{style:{width:"100%"},ref:cn,children:[gn,on&&!w.length&&(0,U.jsx)(F,{children:s})]})};H.defaultProps={selectedList:[],searchQueryPathName:"",onClickSelectResultItem:function(){},onClickSelectAllProducts:function(){},searchPlaceholder:"Click \u0111\u1ec3 t\xecm ki\u1ebfm...",searchGuide:"Nh\u1eadp d\u1eef li\u1ec7u \u0111\u1ec3 t\xecm ki\u1ebfm...",emptySearchResultMessage:"Kh\xf4ng t\xecm \u0111\u01b0\u1ee3c k\u1ebft qu\u1ea3 n\xe0o"};var Y=H},2180:function(n,e,t){t.d(e,{Z:function(){return c}});t(7313);var r,i=t(168),o=t(3115).ZP.p(r||(r=(0,i.Z)(["\n  font-size: 13px;\n  font-weight: 500;\n"]))),a=t(6417),c=function(n){var e=n.label;return(0,a.jsx)(o,{children:e})}},3182:function(n,e,t){t.d(e,{Z:function(){return f}});var r,i,o=t(1413),a=(t(7313),t(2180)),c=t(6947),d=t(168),s=t(3115),u=t(1237),l=s.ZP.div(r||(r=(0,d.Z)(["\n  height: 30px;\n  margin: 0 10px 0 5px;\n  width: ",";\n"])),(function(n){return n.customerWidth})),p=s.ZP.select(i||(i=(0,d.Z)(["\n  width: 100%;\n  border: none;\n  font-size: 12px;\n  font-weight: 300;\n  padding: 4px 0 0;\n  height: ",";\n  border-bottom: 1px solid ",";\n  &:hover {\n    box-shadow: none;\n  }\n  &:focus {\n    outline: none;\n    box-shadow: none;\n  }\n"])),(function(n){return n.height}),u.Z.secondary),h=t(6417),x=function(n){var e=n.label,t=n.options,r=n.name,i=n.placeholder,d=n.validations,s=n.register,u=n.isDisabled,x=n.isError,f=n.onChange,g=n.errorMessage,m=n.setFieldValue,Z=n.dependencyFieldName,v=n.customerWidth;return(0,h.jsxs)(l,{customerWidth:v,children:[e&&(0,h.jsx)(a.Z,{label:e}),(0,h.jsxs)(p,(0,o.Z)((0,o.Z)((0,o.Z)({},n),{},{disabled:u,onChange:function(n){f&&f(n),m&&(m(r,n.target.value),m(Z,void 0))}},s(r,d)),{},{children:[(0,h.jsx)("option",{value:"",disabled:!0,children:i}),t.map((function(n,e){return(0,h.jsx)("option",{value:n.value,children:n.label},e)}))]})),(0,h.jsx)(c.Z,{isError:x,errorMessage:g})]})};x.defaultProps={label:"",options:[],height:"27px",isDisabled:!1,name:"selectName",validations:{},customerWidth:"100%",register:function(){},setFieldValue:function(n){},dependencyFieldName:"",placeholder:"-- Vui l\xf2ng ch\u1ecdn --"};var f=x},9673:function(n,e,t){t.d(e,{Z:function(){return f}});var r,i,o=t(1413),a=(t(7313),t(2180)),c=t(6947),d=t(168),s=t(3115),u=t(1237),l=s.ZP.div(r||(r=(0,d.Z)(["\n  height: 26px;\n  display: inline-block;\n  width: ",";\n  margin: ",";\n"])),(function(n){return n.width?n.width:"100%"}),(function(n){return n.margin?n.margin:"0 0 0 5px"})),p=s.ZP.input(i||(i=(0,d.Z)(["\n  width: 100%;\n  border: none;\n  font-size: 12px;\n  font-weight: 300;\n  padding: ",";\n  line-height: ",";\n  background-color: ",";\n  border-bottom: 1px solid ",";\n  font-style: ",";\n  text-align: ",";\n  &:hover {\n    box-shadow: none;\n  }\n  &:focus {\n    box-shadow: none;\n  }\n  &:focus-visible {\n    outline: none;\n    box-shadow: none;\n  }\n"])),(function(n){return n.padding}),(function(n){return n.lineHeight}),u.Z.lightWhite,u.Z.secondary,(function(n){return n.fontStyle?n.fontStyle:""}),(function(n){return n.textAlign?n.textAlign:"left"})),h=t(6417),x=function(n){var e=n.label,t=n.name,r=n.isError,i=n.errorMessage,d=n.register,s=n.validations,u=n.isInline,x=n.width,f=n.margin,g=u?"auto":x;return(0,h.jsxs)(l,{width:g,margin:f,children:[e&&(0,h.jsx)(a.Z,{label:e}),(0,h.jsx)(p,(0,o.Z)((0,o.Z)({},d(t,s)),n)),(0,h.jsx)(c.Z,{isError:r,errorMessage:i})]})};x.defaultProps={type:"text",validations:{},padding:"2px 5px",register:function(){},lineHeight:"20px"};var f=x}}]);