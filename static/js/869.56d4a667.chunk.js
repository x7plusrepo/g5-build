"use strict";(self.webpackChunkproject_g5=self.webpackChunkproject_g5||[]).push([[869],{869:function(e,n,t){t.r(n),t.d(n,{default:function(){return ye}});var r,a,o,c,i,u=t(4165),s=t(1413),l=t(5861),d=t(885),f=t(7313),h=t(3222),b=t(790),g=t(2668),p=t(4689),x=t(372),m=t(6173),_=t(6069),v=t(3454),S=t(7123),C=t(3163),E=t(2153),y=t(4695),Z=t(3070),k=t(168),T=t(3115),N=t(1237),j=T.ZP.div(r||(r=(0,k.Z)(["\n  width: 100%;\n  padding: 7px 0;\n  font-size: 12px;\n  justify-content: space-between;\n"]))),A=T.ZP.div(a||(a=(0,k.Z)(["\n  display: flex;\n  flex-wrap: wrap;\n"]))),w=T.ZP.div(o||(o=(0,k.Z)(["\n  height: 0.5px;\n  margin: 5px auto;\n  width: ","%;\n  background-color: ",";\n"])),2/3*100,N.Z.white),M=T.ZP.div(c||(c=(0,k.Z)(["\n  width: 50%;\n  cursor: pointer;\n  text-align: center;\n  color: ",";\n"])),N.Z.primary),O=T.ZP.div(i||(i=(0,k.Z)(["\n  padding: 4px;\n  display: flex;\n  margin: 4px 7px;\n  align-items: center;\n  border-radius: 20px;\n  justify-content: center;\n  background-color: ",";\n"])),N.Z.white),P=t(7119),I=t(6417),R=(0,f.lazy)((function(){return Promise.all([t.e(5627),t.e(7155),t.e(2372)]).then(t.bind(t,6066))})),z=(0,f.lazy)((function(){return Promise.all([t.e(5627),t.e(362)]).then(t.bind(t,487))})),D=(0,f.lazy)((function(){return Promise.all([t.e(5627),t.e(9053)]).then(t.bind(t,5236))})),W=(0,f.lazy)((function(){return Promise.all([t.e(5627),t.e(1879),t.e(2260),t.e(4014)]).then(t.bind(t,3788))})),F=(0,f.lazy)((function(){return Promise.all([t.e(5627),t.e(1879),t.e(8404),t.e(8111)]).then(t.bind(t,1625))})),L=(0,f.lazy)((function(){return Promise.all([t.e(5627),t.e(1879),t.e(3681),t.e(8404),t.e(5547)]).then(t.bind(t,5547))})),U=(0,f.lazy)((function(){return Promise.all([t.e(5627),t.e(7155),t.e(145)]).then(t.bind(t,9724))})),B=(0,f.lazy)((function(){return Promise.all([t.e(5627),t.e(3681),t.e(1020),t.e(3961)]).then(t.bind(t,653))})),V=(0,f.lazy)((function(){return Promise.all([t.e(5627),t.e(2655),t.e(2351)]).then(t.bind(t,2655))})),Q=(0,f.lazy)((function(){return Promise.all([t.e(5030),t.e(1963)]).then(t.bind(t,7495))})),Y=(0,f.lazy)((function(){return Promise.all([t.e(5627),t.e(1879),t.e(9757),t.e(4641)]).then(t.bind(t,9808))})),H=(0,f.lazy)((function(){return Promise.all([t.e(5627),t.e(6663)]).then(t.bind(t,8206))})),G=(0,f.lazy)((function(){return t.e(4816).then(t.bind(t,4816))})),J=(0,f.lazy)((function(){return t.e(9860).then(t.bind(t,9860))})),K=(0,f.lazy)((function(){return Promise.all([t.e(5627),t.e(2986)]).then(t.bind(t,2986))})),q=(0,f.lazy)((function(){return Promise.all([t.e(4660),t.e(2516)]).then(t.bind(t,8382))})),X=(0,f.lazy)((function(){return Promise.all([t.e(5627),t.e(6335),t.e(7396)]).then(t.bind(t,5903))})),$=(0,f.lazy)((function(){return Promise.all([t.e(5627),t.e(7452),t.e(7062)]).then(t.bind(t,7062))})),ee=(0,f.lazy)((function(){return Promise.all([t.e(5627),t.e(3222),t.e(1879),t.e(468),t.e(5632),t.e(684)]).then(t.bind(t,7715))})),ne=(0,f.lazy)((function(){return t.e(3938).then(t.bind(t,3938))})),te="create_notification",re="staff_list",ae="create_internal_staff",oe="create_customer",ce="create_purchase_order",ie="create_special_order",ue="return_products",se="import_product",le="destroy_damaged_product",de="create_product",fe="create_receipt",he="view_debt",be="create_discount_promotion",ge="change_password",pe="change_staff_work_area",xe="inventory_balance",me="customer_list",_e="leads_list",ve="create_new_lead",Se="create_conversation",Ce="logout",Ee=function(e){var n=e.itemIndex,t=e.toolItems,r=e.isCustomer,a=e.mainBottomTabs,o=e.setActiveMainBottomTab,c=e.setIsOpenedBottomMenu,i=(0,h.I0)(),g=(0,b.D)(v.Nv),p=(0,d.Z)(g,1)[0],x=(0,b.D)(v.eQ),_=(0,d.Z)(x,1)[0],S=function(e){var n=r?(0,I.jsx)(ne,{}):(0,I.jsx)(ee,{orderProducts:[]});switch(e){case te:return(0,I.jsx)(f.Suspense,{fallback:(0,I.jsx)(m.default,{}),children:(0,I.jsx)(R,{})});case re:return(0,I.jsx)(f.Suspense,{fallback:(0,I.jsx)(m.default,{}),children:(0,I.jsx)(K,{})});case ae:return(0,I.jsx)(f.Suspense,{fallback:(0,I.jsx)(m.default,{}),children:(0,I.jsx)(D,{})});case oe:return(0,I.jsx)(f.Suspense,{fallback:(0,I.jsx)(m.default,{}),children:(0,I.jsx)(z,{})});case ce:return(0,I.jsx)(f.Suspense,{fallback:(0,I.jsx)(m.default,{}),children:n});case ie:return(0,I.jsx)(f.Suspense,{fallback:(0,I.jsx)(m.default,{}),children:(0,I.jsx)(ee,{isSpecialOrder:!0,orderProducts:[]})});case ue:return(0,I.jsx)(f.Suspense,{fallback:(0,I.jsx)(m.default,{}),children:(0,I.jsx)(W,{})});case se:return(0,I.jsx)(f.Suspense,{fallback:(0,I.jsx)(m.default,{}),children:(0,I.jsx)(F,{})});case le:return(0,I.jsx)(f.Suspense,{fallback:(0,I.jsx)(m.default,{}),children:(0,I.jsx)(L,{})});case de:return(0,I.jsx)(f.Suspense,{fallback:(0,I.jsx)(m.default,{}),children:(0,I.jsx)(U,{})});case xe:return(0,I.jsx)(f.Suspense,{fallback:(0,I.jsx)(m.default,{}),children:(0,I.jsx)(B,{})});case fe:return(0,I.jsx)(f.Suspense,{fallback:(0,I.jsx)(m.default,{}),children:(0,I.jsx)(V,{})});case he:return(0,I.jsx)(f.Suspense,{fallback:(0,I.jsx)(m.default,{}),children:(0,I.jsx)(Q,{})});case be:return(0,I.jsx)(f.Suspense,{fallback:(0,I.jsx)(m.default,{}),children:(0,I.jsx)(Y,{})});case ge:return(0,I.jsx)(f.Suspense,{fallback:(0,I.jsx)(m.default,{}),children:(0,I.jsx)(H,{})});case pe:return(0,I.jsx)(f.Suspense,{fallback:(0,I.jsx)(m.default,{}),children:(0,I.jsx)(G,{})});case me:return(0,I.jsx)(f.Suspense,{fallback:(0,I.jsx)(m.default,{}),children:(0,I.jsx)(J,{})});case _e:return(0,I.jsx)(f.Suspense,{fallback:(0,I.jsx)(m.default,{}),children:(0,I.jsx)(q,{})});case ve:return(0,I.jsx)(f.Suspense,{children:(0,I.jsx)(X,{})});case Se:return(0,I.jsx)(f.Suspense,{children:(0,I.jsx)($,{})});default:return null}},C=function(){var e=(0,l.Z)((0,u.Z)().mark((function e(n){var t,r,l,d,h,b,g,x;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.label,r=n.code,c(!1),l=r===he,d=r===xe,!(r===Ce)){e.next=14;break}return e.next=8,p();case 8:localStorage.removeItem(Z.B),h={viewerQuery:{},isAuthenticated:!1},i((0,y.CD)(h)),window.location.reload(),e.next=25;break;case 14:if(!l){e.next=19;break}b=a.findIndex((function(e){return"debts"===e.code})),o(a[b]),e.next=25;break;case 19:if(!d){e.next=23;break}return g=function(){_({variables:{data:{isStockChecking:!1}}})},e.next=23,_({variables:{data:{isStartStockChecking:!0}}});case 23:x=(0,s.Z)((0,s.Z)({title:t},!!g&&{customCloseAction:g}),{},{children:(0,I.jsx)(f.Suspense,{fallback:(0,I.jsx)(m.default,{}),children:S(r)})}),i((0,E.dn)(x));case 25:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),k=function(e){return null!==e&&void 0!==e&&e.children?(0,I.jsx)(M,{children:null===e||void 0===e?void 0:e.children}):e?(0,I.jsx)(M,{onClick:function(){return C(e)},children:(0,I.jsx)(O,{children:e&&e.label})}):null};return(0,I.jsxs)(A,{children:[n>0&&(0,I.jsx)(w,{}),t.map((function(e,n){return(0,I.jsx)(f.Fragment,{children:k(e)},n)}))]})},ye=function(e){var n=e.mainBottomTabs,t=e.setActiveMainBottomTab,r=e.setIsOpenedBottomMenu,a=P.gz.CAN_CREATE_NORMAL_SPECIAL_ORDER_FOR_ANYONE,o=P.gz.CAN_CREATE_ORDER_FOR_OWN_CUSTOMERS,c=P.gz.CAN_CREATE_SPECIAL_ORDER_FOR_OWN_AREA,i=P.gz.CRUD_PRODUCT,m=P.gz.IMPORT_RETURN_PRODUCT,E=P.gz.CAN_EXCUTE_WAREHOUSE_BALANCE,y=P.gz.DESTROY_PRODUCT,k=P.gz.CREATE_NOTIFICATION,T=P.gz.CAN_CREATE_CUSTOMER,N=P.gz.CAN_CREATE_STAFF,A=P.gz.CAN_CHANGE_STAFF_WORK_AREA,w=P.gz.CAN_CREATE_DISCOUNT_PROMOTION,M=P.gz.CAN_VIEW_OWN_CUSTOMER_LIST,R=P.gz.CAN_VIEW_ALL_CUSTOMERS_LIST,z=P.gz.CAN_VIEW_ALL_STAFFS,D=P.gz.CAN_VIEW_OWN_STAFF_LIST,W=P.gz.CAN_VIEW_ALL_LEADS_LIST,F=P.gz.CAN_VIEW_OWN_LEADS_LIST,L=P.gz.CAN_CREATE_LEAD,U=P.gz.CAN_CREATE_CONVERSATION,B=P.gz.CAN_VIEW_OWN_DEBTS,V=P.gz.CAN_VIEW_ALL_DEBTS,Q=P.gz.CAN_CREATE_RECEIPT_FOR_ANY_CUSTOMER,Y=P.gz.CAN_CREATE_RECEIPT_FOR_OWN_CUSTOMER,H=((0,_.SB)(),(0,h.v9)((function(e){return e.authReducer})).viewerQuery||{}),G=H._id,J=H.roles,K=void 0===J?[]:J,q=H.permissions,X=void 0===q?[]:q,$=H.customerStaffPermissions,ee=void 0===$?[]:$,ne=H.subscribedNewsPush,ye=H.subscribedSystemPush,Ze=(0,g.a)(S.bV,{fetchPolicy:"cache-and-network"}),ke=Ze.data,Te=Ze.subscribeToMore,Ne=(ke&&ke.global||{}).isStockChecking,je=K.includes(Z.If.CUSTOMER)||K.includes(Z.If.STAFF_OF_CUSTOMER),Ae=K.includes(Z.If.SYSTEM),we=ee.length?ee.includes(P.Fl.CREATE_AND_MANAGE_ORDERS):X.some((function(e){return e===o||e===a})),Me=X.some((function(e){return e===a||e===c})),Oe=X.some((function(e){return e===Y||e===Q})),Pe=X.includes(m),Ie=X.includes(m),Re=X.includes(i),ze=X.includes(y),De=X.includes(E),We=X.includes(k),Fe=X.some((function(e){return e===M||e===R})),Le=X.includes(T),Ue=X.some((function(e){return e===D||e===z})),Be=X.includes(N),Ve=X.includes(A),Qe=X.some((function(e){return e===W||e===F})),Ye=(X.includes(L),X.includes(U),X.includes(w)),He=X.some((function(e){return e===B||e===V})),Ge=(0,f.useState)(!1),Je=(0,d.Z)(Ge,2),Ke=Je[0],qe=Je[1],Xe=(0,f.useState)(!1),$e=(0,d.Z)(Xe,2),en=$e[0],nn=$e[1],tn=(0,f.useState)(!0),rn=(0,d.Z)(tn,2),an=rn[0],on=rn[1],cn=(0,b.D)(v.$E),un=(0,d.Z)(cn,1)[0],sn=function(){var e=(0,l.Z)((0,u.Z)().mark((function e(){var n,t,r,a;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Notification.requestPermission();case 2:if("denied"!==(n=e.sent)){e.next=6;break}return console.error("The user explicitly denied the permission request."),e.abrupt("return");case 6:return"granted"===n&&console.info("The user accepted the permission request."),e.next=9,navigator.serviceWorker.getRegistration();case 9:return t=e.sent,e.next=12,t.pushManager.getSubscription();case 12:if(!(r=e.sent)||!Ke){e.next=16;break}return console.info("User is already subscribed."),e.abrupt("return");case 16:return e.next=18,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:(0,_.EJ)("BLw43wcbE_9PstDuQ2XoCKxLZuf4jO9QtV_UVrnMS2HV6XIgyPMU1hkkA86AF1NfEM6pEbIsUHaqGy1JXDeApV4")});case 18:return a=e.sent,e.next=21,un({variables:{data:(0,s.Z)({subscribedNewsPush:!0},!r&&{subscribeJson:JSON.stringify(a)}),where:{accountId:G}}});case 21:e.sent.data&&qe(!0);case 23:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ln=function(){var e=(0,l.Z)((0,u.Z)().mark((function e(){var n,t;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.serviceWorker.getRegistration();case 2:return n=e.sent,e.next=5,n.pushManager.getSubscription();case 5:return t=e.sent,e.next=8,un({variables:{data:(0,s.Z)({subscribedNewsPush:!1},!en&&{unsubscribeJson:JSON.stringify(t)}),where:{accountId:G}}});case 8:if(!e.sent.data){e.next=16;break}if(qe(!1),en){e.next=16;break}return e.next=14,t.unsubscribe();case 14:e.sent&&console.info("Successfully unsubscribed from push notifications.");case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),dn=Ke?(0,I.jsxs)(O,{onClick:ln,children:[(0,I.jsx)(p.Z,{fontSize:"small"}),"\u2002Hu\u1ef7 th\xf4ng b\xe1o tin t\u1ee9c"]}):(0,I.jsxs)(O,{onClick:sn,children:[(0,I.jsx)(x.Z,{fontSize:"small"}),"\u2002Th\xf4ng b\xe1o tin t\u1ee9c"]}),fn=function(){var e=(0,l.Z)((0,u.Z)().mark((function e(){var n,t,r,a;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Notification.requestPermission();case 2:if("denied"!==(n=e.sent)){e.next=6;break}return console.error("The user explicitly denied the permission request."),e.abrupt("return");case 6:return"granted"===n&&console.info("The user accepted the permission request."),e.next=9,navigator.serviceWorker.getRegistration();case 9:return t=e.sent,e.next=12,t.pushManager.getSubscription();case 12:if(!(r=e.sent)||!en){e.next=16;break}return console.info("User is already subscribed."),e.abrupt("return");case 16:return e.next=18,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:(0,_.EJ)("BLw43wcbE_9PstDuQ2XoCKxLZuf4jO9QtV_UVrnMS2HV6XIgyPMU1hkkA86AF1NfEM6pEbIsUHaqGy1JXDeApV4")});case 18:return a=e.sent,e.next=21,un({variables:{data:(0,s.Z)({subscribedSystemPush:!0},!r&&{subscribeJson:JSON.stringify(a)}),where:{accountId:G}}});case 21:e.sent.data&&nn(!0);case 23:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),hn=function(){var e=(0,l.Z)((0,u.Z)().mark((function e(){var n,t;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.serviceWorker.getRegistration();case 2:return n=e.sent,e.next=5,n.pushManager.getSubscription();case 5:return t=e.sent,e.next=8,un({variables:{data:(0,s.Z)({subscribedSystemPush:!1},!Ke&&{unsubscribeJson:JSON.stringify(t)}),where:{accountId:G}}});case 8:if(!e.sent.data){e.next=16;break}if(nn(!1),Ke){e.next=16;break}return e.next=14,t.unsubscribe();case 14:e.sent&&console.info("Successfully unsubscribed from push notifications.");case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),bn=en?(0,I.jsxs)(O,{onClick:hn,children:[(0,I.jsx)(p.Z,{fontSize:"small"}),"\u2002Hu\u1ef7 t.b\xe1o h\u1ec7 th\u1ed1ng"]}):(0,I.jsxs)(O,{onClick:fn,children:[(0,I.jsx)(x.Z,{fontSize:"small"}),"\u2002Th\xf4ng b\xe1o h\u1ec7 th\u1ed1ng"]}),gn=[[!Ae&&an?{children:dn}:void 0,!Ae&&an?{children:bn}:void 0,We?{code:te,label:"+ Th\xf4ng b\xe1o m\u1edbi"}:void 0],[we?{code:ce,label:"+ \u0110\u1eb7t h\xe0ng"}:void 0,Me?{code:ie,label:"+ \u0110\u01a1n \u0111\u1eb7c bi\u1ec7t"}:void 0,Ye?{code:be,label:"+ T\u1ea1o CKKM"}:void 0],[Pe?{code:se,label:"+ Nh\u1eadp h\xe0ng"}:void 0,Ie?{code:ue,label:"+ Nh\u1eadp l\u1ea1i h\xe0ng"}:void 0,Re?{code:de,label:"+ S\u1ea3n ph\u1ea9m m\u1edbi"}:void 0,ze?{code:le,label:"+ Hu\u1ef7 h\xe0ng h\u1ecfng"}:void 0,De&&!Ne?{code:xe,label:"+ Ki\u1ec3m kho"}:void 0],[Fe?{code:me,label:"Danh s\xe1ch kh\xe1ch h\xe0ng"}:void 0,Le?{code:oe,label:"+ Th\xeam Kh\xe1ch h\xe0ng"}:void 0,Ve?{code:pe,label:"Chuy\u1ec3n v\xf9ng"}:void 0],[Qe?{code:_e,label:"Danh s\xe1ch Leads"}:void 0,{code:ve,label:"+ Th\xeam Lead"},{code:Se,label:"+ Th\xeam cu\u1ed9c g\u1eb7p"}],[Ue?{code:re,label:"Danh s\xe1ch nh\xe2n vi\xean"}:void 0,Be?{code:ae,label:"+ Th\xeam Nh\xe2n vi\xean"}:void 0],[He?{code:he,label:"C\xf4ng n\u1ee3"}:void 0,Oe?{code:fe,label:"+ Thu ti\u1ec1n"}:void 0],[{code:ge,label:"\u0110\u1ed5i m\u1eadt kh\u1ea9u"},{code:Ce,label:"\u0110\u0103ng xu\u1ea5t"}]];return(0,f.useEffect)((function(){var e=function(){var e=(0,l.Z)((0,u.Z)().mark((function e(){var n,t,r;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=navigator.userAgent||window.opera,t=n.toLowerCase(),!/iPad|iPhone|iPod/.test(n)||window.MSStream){e.next=5;break}return on(!1),e.abrupt("return");case 5:if(-1===t.indexOf("safari")||-1!==t.indexOf("chrome")){e.next=8;break}return on(!1),e.abrupt("return");case 8:return e.next=10,navigator.serviceWorker.getRegistration();case 10:return r=e.sent,e.next=13,r.pushManager.getSubscription();case 13:e.sent&&(ne&&qe(!0),ye&&nn(!0));case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),(0,f.useEffect)((function(){var e=Te({document:C.Po,updateQuery:function(e,n){var t=n.subscriptionData;if(t)return{global:t.data.updatedGlobalData}}});return function(){return e()}}),[Te]),(0,I.jsx)(j,{children:gn.map((function(e,a){return(0,I.jsx)(Ee,{itemIndex:a,toolItems:e,isCustomer:je,mainBottomTabs:n,setActiveMainBottomTab:t,setIsOpenedBottomMenu:r},a)}))})}},6069:function(e,n,t){t.d(n,{Bu:function(){return b},EJ:function(){return p},Ok:function(){return x},RX:function(){return s},SB:function(){return m},Zu:function(){return _},_O:function(){return g},dh:function(){return i},hz:function(){return u},mr:function(){return f},tO:function(){return c},xE:function(){return d},zZ:function(){return l}});var r=t(2982),a=t(1237),o=t(3070),c=function(e,n){if(n){for(var t=(n=(n=n.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split("."),r=0,a=t.length;r<a;++r){var o=t[r];if(!(o in e))return;e=e[o]}return"stockQtyByShippedOutOrders"===n?e&&e.toLocaleString()+"(sp)":e}},i=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=new Date(e),r=t.getFullYear(),a=t.getMonth()+1,o=t.getDate(),c=t.getHours(),i=t.getMinutes();return o=o<10?"0"+o:o,a=a<10?"0"+a:a,c=c<10?"0"+c:c,i=i<10?"0"+i:i,n?"".concat(o,"/").concat(a,"/").concat(r," - ").concat(c,":").concat(i):"".concat(o,"/").concat(a,"/").concat(r)},u=function(e){var n=e.isoString,t=e.includeTime,r=new Date(n),a=r.getFullYear(),o=r.getMonth()+1,c=r.getDate(),i=r.getHours(),u=r.getMinutes();return c=c<10?"0"+c:c,o=o<10?"0"+o:o,i=i<10?"0"+i:i,u=u<10?"0"+u:u,t?"".concat(a,"-").concat(o,"-").concat(c,"T").concat(i,":").concat(u):"".concat(a,"-").concat(o,"-").concat(c)},s=function(e,n,t){switch(e){case o.rh.MONEY_ACHIEVE_TYPE:return{unit:"\u0111",type:"Ti\u1ec1n mua"};case o.rh.QUANTITY_ACHIEVE_TYPE:return{unit:"SP",type:"S\u1ed1 l\u01b0\u1ee3ng"};case o.rh.WEIGHT_ACHIEVE_TYPE:return{unit:t,type:"Kh\u1ed1i l\u01b0\u1ee3ng"}}},l=function(e,n){return isNaN(n)?e:"string"===typeof e?e.split(" ").slice(0,parseInt(n,10)).join(" "):e},d=function(e){var n=(e||{}).getTimeTogether,t=new Date,r=function(){var e=t.getHours();return e>9?e:"0".concat(e)}(),a=function(){var e=t.getMinutes();return e>9?e:"0".concat(e)}(),o=function(){var e=t.getDate();return e>9?e:"0".concat(e)}(),c=function(){var e=t.getMonth()+1;return e>9?e:"0".concat(e)}(),i=t.getFullYear(),u="".concat(i,"-").concat(c,"-").concat(o),s="".concat(i,"-").concat(c,"-").concat(o,"T").concat(r,":").concat(a);return n?s:u},f=function(){for(var e="#",n=0;n<6;n++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e},h=function(e){var n=1,t="";return e===o.mZ.G&&(n=.001,t="kg"),e===o.mZ.KG&&(n=.001,t="t\u1ea5n"),e===o.mZ.ML&&(n=.001,t="l\xedt"),e===o.mZ.MG&&(n=1e-6,t="kg"),{weightCoefficient:n,weightShowUnit:t}},b=function(e){for(var n=e.chartData,t=void 0===n?[]:n,o=e.startOfTimeRange,c=(t&&t[0]||{}).unitString,i=h(void 0===c?"":c),u=i.weightCoefficient,s=i.weightShowUnit,l=new Date(o),d=l.getFullYear(),f=l.getMonth(),b=[],g=[],p=[],x=[],m=function(e){var n=t[e],a=n._id,o=n.totalMoney,c=n.totalQuantity,i=n.totalWeight,u=a||{},s=u.orderYear,l=u.orderMonth,h=u.productCode,m=u.productCategories,_=u.customerInfo,v=u.staffInfo,S=u.managerInfo,C=(_||{}).fullName,E=(v||{}).fullName,y=(S||{}).fullName,Z=h||m||C||E||y||"";-1===b.findIndex((function(e){return e===Z}))&&(b=[].concat((0,r.Z)(b),[Z]));var k={totalMoney:o,totalQuantity:c,totalWeight:i,label:Z};s===d?l===f?g=[].concat((0,r.Z)(g),[k]):p=[].concat((0,r.Z)(p),[k]):0===f&&11===l?p=[].concat((0,r.Z)(p),[k]):x=[].concat((0,r.Z)(x),[k])},_=0;_<t.length;_++)m(_);for(var v=[],S=[],C=[],E=[],y=[],Z=[],k=[],T=[],N=[],j=function(e){var n=b[e],t=g.find((function(e){return e.label===n})),a=p.find((function(e){return e.label===n})),o=x.find((function(e){return e.label===n})),c=t||{},i=c.totalMoney,s=c.totalQuantity,l=c.totalWeight,d=a||{},f=d.totalMoney,h=d.totalQuantity,m=d.totalWeight,_=o||{},j=_.totalMoney,A=_.totalQuantity,w=_.totalWeight;v=[].concat((0,r.Z)(v),[i/1e6||0]),S=[].concat((0,r.Z)(S),[s||0]),C=[].concat((0,r.Z)(C),[l*u||0]),E=[].concat((0,r.Z)(E),[f/1e6||0]),y=[].concat((0,r.Z)(y),[h/1e6||0]),Z=[].concat((0,r.Z)(Z),[m*u||0]),k=[].concat((0,r.Z)(k),[j/1e6||0]),T=[].concat((0,r.Z)(T),[A||0]),N=[].concat((0,r.Z)(N),[w*u||0])},A=0;A<b.length;A++)j(A);var w=function(){var e=f+1;return e>9?e:"0".concat(e)}(),M=0===f?"Th\xe1ng 12 - N\u0103m "+(d-1):"Th\xe1ng "+(f>9?f:"0".concat(f))+" - N\u0103m "+d,O=function(){var e=0;return v.forEach((function(n){return e+=n})),e?Number(e).toFixed(3).replace(/\B(?=(\d{3})+(?!\d))/g," "):0}(),P=function(){var e=0;return C.forEach((function(n){return e+=n})),e?Number(e).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g," "):0}(),I=function(){var e=0;return S.forEach((function(n){return e+=n})),e?Number(e).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g," "):0}(),R=[{label:"Th\xe1ng "+w+" - N\u0103m "+d,data:v,backgroundColor:a.Z.rgbaPrimary},{label:M,data:E,backgroundColor:a.Z.chartGreen},{label:"Th\xe1ng "+w+" - N\u0103m "+(d-1),data:k,backgroundColor:a.Z.purple}],z=[{label:"Th\xe1ng "+w+" - N\u0103m "+d,data:S,backgroundColor:a.Z.rgbaPrimary},{label:M,data:y,backgroundColor:a.Z.chartGreen},{label:"Th\xe1ng "+w+" - N\u0103m "+(d-1),data:T,backgroundColor:a.Z.purple}],D=[{label:"Th\xe1ng "+w+" - N\u0103m "+d,data:C,backgroundColor:a.Z.rgbaPrimary},{label:M,data:Z,backgroundColor:a.Z.chartGreen},{label:"Th\xe1ng "+w+" - N\u0103m "+(d-1),data:N,backgroundColor:a.Z.purple}];return{monthWeightShowUnit:s,totalMonthMoney:O,totalMonthWeight:P,totalMonthQuantity:I,chartLabels:b,moneyDatasets:R,quantityDatasets:z,weightDatasets:D}},g=function(e){for(var n=e.chartData,t=e.startOfTimeRange,o=(n&&n[0]||{}).unitString,c=h(void 0===o?"":o),i=c.weightCoefficient,u=c.weightShowUnit,s=t?new Date(t).getFullYear():(new Date).getFullYear(),l=[],d=[],f=[],b=function(e){var t=n[e],a=t._id,o=t.totalMoney,c=t.totalQuantity,i=t.totalWeight,u=a||{},h=u.orderYear,b=u.productCode,g=u.customerInfo,p=u.staffInfo,x=u.managerInfo,m=(g||{}).fullName,_=(p||{}).fullName,v=(x||{}).fullName,S=b||m||_||v||"";-1===l.findIndex((function(e){return e===S}))&&(l=[].concat((0,r.Z)(l),[S]));var C={totalMoney:o,totalQuantity:c,totalWeight:i,label:S};h===s?d=[].concat((0,r.Z)(d),[C]):f=[].concat((0,r.Z)(f),[C])},g=0;g<n.length;g++)b(g);for(var p=[],x=[],m=[],_=[],v=[],S=[],C=function(e){var n=l[e],t=d.find((function(e){return e.label===n})),a=f.find((function(e){return e.label===n})),o=t||{},c=o.totalMoney,u=o.totalQuantity,s=o.totalWeight,h=a||{},b=h.totalMoney,g=h.totalQuantity,C=h.totalWeight;p=[].concat((0,r.Z)(p),[c/1e6||0]),x=[].concat((0,r.Z)(x),[u||0]),m=[].concat((0,r.Z)(m),[s*i||0]),_=[].concat((0,r.Z)(_),[b/1e6||0]),v=[].concat((0,r.Z)(v),[g||0]),S=[].concat((0,r.Z)(S),[C*i||0])},E=0;E<l.length;E++)C(E);var y=function(){var e=0;return p.forEach((function(n){return e+=n})),e?Number(e).toFixed(3).replace(/\B(?=(\d{3})+(?!\d))/g," "):0}(),Z=function(){var e=0;return m.forEach((function(n){return e+=n})),e?Number(e).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g," "):0}(),k=[{label:"N\u0103m "+s,data:p,backgroundColor:a.Z.rgbaPrimary},{label:"N\u0103m "+(s-1),data:_,backgroundColor:a.Z.chartGreen}],T=[{label:"N\u0103m "+s,data:x,backgroundColor:a.Z.rgbaPrimary},{label:"N\u0103m "+(s-1),data:v,backgroundColor:a.Z.chartGreen}],N=[{label:"N\u0103m "+s,data:m,backgroundColor:a.Z.rgbaPrimary},{label:"N\u0103m "+(s-1),data:S,backgroundColor:a.Z.chartGreen}];return{yearWeightShowUnit:u,totalYearMoney:y,totalYearWeight:Z,chartLabels:l,moneyDatasets:k,quantityDatasets:T,weightDatasets:N}},p=function(e){for(var n=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),t=window.atob(n),r=new Uint8Array(t.length),a=0;a<t.length;++a)r[a]=t.charCodeAt(a);return r},x=function(e){for(var n="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",r=t.length,a=0;a<e;)n+=t.charAt(Math.floor(Math.random()*r)),a+=1;return n},m=function(){var e=navigator.userAgent||window.opera;return!!/windows phone/i.test(e)||(!!/android/i.test(e)||!(!/iPad|iPhone|iPod/.test(e)||window.MSStream))},_=function(e){return e&&e.trim()?e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\u0111/g,"d").replace(/\u0110/g,"D").trim().replace(/ /g,"_").toLowerCase():""}}}]);