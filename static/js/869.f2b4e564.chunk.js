"use strict";(self.webpackChunkproject_g5=self.webpackChunkproject_g5||[]).push([[869],{869:function(e,n,t){t.r(n),t.d(n,{default:function(){return pe}});var r,a,o,c,i=t(4165),u=t(1413),s=t(5861),l=t(885),d=t(7313),f=t(3222),h=t(790),b=t(2668),g=t(4689),p=t(372),m=t(6173),x=t(6069),v=t(3454),_=t(7123),S=t(3163),y=t(2153),C=t(4695),E=t(3070),Z=t(168),k=t(3115),T=t(1237),j=k.ZP.div(r||(r=(0,Z.Z)(["\n  width: 100%;\n  font-size: 12px;\n  justify-content: space-between;\n"]))),w=k.ZP.div(a||(a=(0,Z.Z)(["\n  display: flex;\n  flex-wrap: wrap;\n  margin: "," 0;\n"])),(function(e){return e.marginTopBottom})),N=k.ZP.div(o||(o=(0,Z.Z)(["\n  width: 50%;\n  cursor: pointer;\n  text-align: center;\n  color: ",";\n"])),T.Z.primary),A=k.ZP.div(c||(c=(0,Z.Z)(["\n  padding: 4px;\n  display: flex;\n  margin: 5px 7px;\n  align-items: center;\n  border-radius: 20px;\n  justify-content: center;\n  background-color: ",";\n"])),T.Z.white),M=t(7119),O=t(6417),P=(0,d.lazy)((function(){return Promise.all([t.e(5627),t.e(7155),t.e(2372)]).then(t.bind(t,6066))})),R=(0,d.lazy)((function(){return Promise.all([t.e(5627),t.e(362)]).then(t.bind(t,487))})),I=(0,d.lazy)((function(){return Promise.all([t.e(5627),t.e(9053)]).then(t.bind(t,5236))})),z=(0,d.lazy)((function(){return Promise.all([t.e(5627),t.e(1879),t.e(2260),t.e(4014)]).then(t.bind(t,3788))})),D=(0,d.lazy)((function(){return Promise.all([t.e(5627),t.e(1879),t.e(8404),t.e(8111)]).then(t.bind(t,1625))})),W=(0,d.lazy)((function(){return Promise.all([t.e(5627),t.e(1879),t.e(3681),t.e(8404),t.e(5547)]).then(t.bind(t,5547))})),U=(0,d.lazy)((function(){return Promise.all([t.e(5627),t.e(7155),t.e(145)]).then(t.bind(t,9724))})),F=(0,d.lazy)((function(){return Promise.all([t.e(5627),t.e(3681),t.e(1020),t.e(3961)]).then(t.bind(t,653))})),B=(0,d.lazy)((function(){return Promise.all([t.e(5627),t.e(2655),t.e(2351)]).then(t.bind(t,2655))})),L=(0,d.lazy)((function(){return Promise.all([t.e(5030),t.e(9847)]).then(t.bind(t,5789))})),Q=(0,d.lazy)((function(){return Promise.all([t.e(5627),t.e(1879),t.e(9757),t.e(4641)]).then(t.bind(t,9808))})),V=(0,d.lazy)((function(){return Promise.all([t.e(5627),t.e(6663)]).then(t.bind(t,8206))})),Y=(0,d.lazy)((function(){return t.e(4816).then(t.bind(t,4816))})),H=(0,d.lazy)((function(){return t.e(9860).then(t.bind(t,9860))})),G=(0,d.lazy)((function(){return Promise.all([t.e(5627),t.e(2986)]).then(t.bind(t,2986))})),J=(0,d.lazy)((function(){return Promise.all([t.e(5627),t.e(3222),t.e(1879),t.e(468),t.e(5632),t.e(684)]).then(t.bind(t,7715))})),K=(0,d.lazy)((function(){return t.e(3938).then(t.bind(t,3938))})),q="create_notification",X="staff_list",$="create_internal_staff",ee="create_customer",ne="create_purchase_order",te="create_special_order",re="return_products",ae="import_product",oe="destroy_damaged_product",ce="create_product",ie="create_receipt",ue="view_debt",se="create_discount_promotion",le="change_password",de="change_staff_work_area",fe="inventory_balance",he="customer_list",be="logout",ge=function(e){var n=e.isCustomer,t=e.toolItems,r=e.mainBottomTabs,a=e.setActiveMainBottomTab,o=e.setIsOpenedBottomMenu,c=t.filter((function(e){return!!e})).length?"10px":0,b=(0,f.I0)(),g=(0,h.D)(v.Nv),p=(0,l.Z)(g,1)[0],x=(0,h.D)(v.eQ),_=(0,l.Z)(x,1)[0],S=function(e){var t=n?(0,O.jsx)(K,{}):(0,O.jsx)(J,{orderProducts:[]});switch(e){case q:return(0,O.jsx)(d.Suspense,{fallback:(0,O.jsx)(m.default,{}),children:(0,O.jsx)(P,{})});case X:return(0,O.jsx)(d.Suspense,{fallback:(0,O.jsx)(m.default,{}),children:(0,O.jsx)(G,{})});case $:return(0,O.jsx)(d.Suspense,{fallback:(0,O.jsx)(m.default,{}),children:(0,O.jsx)(I,{})});case ee:return(0,O.jsx)(d.Suspense,{fallback:(0,O.jsx)(m.default,{}),children:(0,O.jsx)(R,{})});case ne:return(0,O.jsx)(d.Suspense,{fallback:(0,O.jsx)(m.default,{}),children:t});case te:return(0,O.jsx)(d.Suspense,{fallback:(0,O.jsx)(m.default,{}),children:(0,O.jsx)(J,{isSpecialOrder:!0,orderProducts:[]})});case re:return(0,O.jsx)(d.Suspense,{fallback:(0,O.jsx)(m.default,{}),children:(0,O.jsx)(z,{})});case ae:return(0,O.jsx)(d.Suspense,{fallback:(0,O.jsx)(m.default,{}),children:(0,O.jsx)(D,{})});case oe:return(0,O.jsx)(d.Suspense,{fallback:(0,O.jsx)(m.default,{}),children:(0,O.jsx)(W,{})});case ce:return(0,O.jsx)(d.Suspense,{fallback:(0,O.jsx)(m.default,{}),children:(0,O.jsx)(U,{})});case fe:return(0,O.jsx)(d.Suspense,{fallback:(0,O.jsx)(m.default,{}),children:(0,O.jsx)(F,{})});case ie:return(0,O.jsx)(d.Suspense,{fallback:(0,O.jsx)(m.default,{}),children:(0,O.jsx)(B,{})});case ue:return(0,O.jsx)(d.Suspense,{fallback:(0,O.jsx)(m.default,{}),children:(0,O.jsx)(L,{})});case se:return(0,O.jsx)(d.Suspense,{fallback:(0,O.jsx)(m.default,{}),children:(0,O.jsx)(Q,{})});case le:return(0,O.jsx)(d.Suspense,{fallback:(0,O.jsx)(m.default,{}),children:(0,O.jsx)(V,{})});case de:return(0,O.jsx)(d.Suspense,{fallback:(0,O.jsx)(m.default,{}),children:(0,O.jsx)(Y,{})});case he:return(0,O.jsx)(d.Suspense,{fallback:(0,O.jsx)(m.default,{}),children:(0,O.jsx)(H,{})});default:return null}},Z=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(n){var t,c,s,l,f,h,g,x;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.label,c=n.code,o(!1),s=c===ue,l=c===fe,!(c===be)){e.next=14;break}return e.next=8,p();case 8:localStorage.removeItem(E.B),f={viewerQuery:{},isAuthenticated:!1},b((0,C.CD)(f)),window.location.reload(),e.next=25;break;case 14:if(!s){e.next=19;break}h=r.findIndex((function(e){return"debts"===e.code})),a(r[h]),e.next=25;break;case 19:if(!l){e.next=23;break}return g=function(){_({variables:{data:{isStockChecking:!1}}})},e.next=23,_({variables:{data:{isStartStockChecking:!0}}});case 23:x=(0,u.Z)((0,u.Z)({title:t},!!g&&{customCloseAction:g}),{},{children:(0,O.jsx)(d.Suspense,{fallback:(0,O.jsx)(m.default,{}),children:S(c)})}),b((0,y.dn)(x));case 25:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,O.jsx)(w,{marginTopBottom:c,children:t.map((function(e,n){return e?(0,O.jsx)(N,{onClick:function(){return Z(e)},children:(0,O.jsx)(A,{children:e&&e.label})},n):null}))})},pe=function(e){var n=e.mainBottomTabs,t=e.setActiveMainBottomTab,r=e.setIsOpenedBottomMenu,a=M.gz.CRUD_PRODUCT,o=M.gz.CAN_CREATE_NORMAL_SPECIAL_ORDER_FOR_ANYONE,c=M.gz.CAN_CREATE_ORDER_FOR_OWN_CUSTOMERS,m=M.gz.CAN_CREATE_SPECIAL_ORDER_FOR_OWN_AREA,y=M.gz.IMPORT_RETURN_PRODUCT,C=M.gz.CAN_EXCUTE_WAREHOUSE_BALANCE,Z=M.gz.DESTROY_PRODUCT,k=M.gz.CREATE_NOTIFICATION,T=M.gz.CAN_CREATE_CUSTOMER,P=M.gz.CAN_CREATE_STAFF,R=M.gz.CAN_CHANGE_STAFF_WORK_AREA,I=M.gz.CAN_CREATE_DISCOUNT_PROMOTION,z=M.gz.CAN_VIEW_OWN_CUSTOMER_LIST,D=M.gz.CAN_VIEW_ALL_CUSTOMERS_LIST,W=M.gz.CAN_VIEW_ALL_STAFFS,U=M.gz.CAN_VIEW_OWN_STAFF_LIST,F=M.gz.CAN_VIEW_OWN_DEBTS,B=M.gz.CAN_VIEW_ALL_DEBTS,L=M.gz.CAN_CREATE_RECEIPT_FOR_ANY_CUSTOMER,Q=M.gz.CAN_CREATE_RECEIPT_FOR_OWN_CUSTOMER,V=(0,f.v9)((function(e){return e.authReducer})).viewerQuery||{},Y=V._id,H=V.roles,G=void 0===H?[]:H,J=V.permissions,K=void 0===J?[]:J,pe=V.customerStaffPermissions,me=void 0===pe?[]:pe,xe=V.subscribedNewsPush,ve=V.subscribedSystemPush,_e=(0,b.a)(_.bV,{fetchPolicy:"cache-and-network"}),Se=_e.data,ye=_e.subscribeToMore,Ce=(Se&&Se.global||{}).isStockChecking,Ee=G.includes(E.If.CUSTOMER)||G.includes(E.If.STAFF_OF_CUSTOMER),Ze=G.includes(E.If.SYSTEM),ke=me.length?me.includes(M.Fl.CREATE_AND_MANAGE_ORDERS):K.some((function(e){return e===c||e===o})),Te=K.some((function(e){return e===o||e===m})),je=K.some((function(e){return e===Q||e===L})),we=K.includes(y),Ne=K.includes(y),Ae=K.includes(a),Me=K.includes(Z),Oe=K.includes(C),Pe=K.includes(k),Re=K.some((function(e){return e===z||e===D})),Ie=K.includes(T),ze=K.some((function(e){return e===U||e===W})),De=K.includes(P),We=K.includes(R),Ue=K.includes(I),Fe=K.some((function(e){return e===F||e===B})),Be=[[ke?{code:ne,label:"+ \u0110\u1eb7t h\xe0ng"}:void 0,Te?{code:te,label:"+ \u0110\u01a1n \u0111\u1eb7c bi\u1ec7t"}:void 0,je?{code:ie,label:"+ Thu ti\u1ec1n"}:void 0],[we?{code:ae,label:"+ Nh\u1eadp h\xe0ng"}:void 0,Ne?{code:re,label:"+ Nh\u1eadp l\u1ea1i h\xe0ng"}:void 0,Ae?{code:ce,label:"+ S\u1ea3n ph\u1ea9m m\u1edbi"}:void 0,Me?{code:oe,label:"+ Hu\u1ef7 h\xe0ng h\u1ecfng"}:void 0,Oe&&!Ce?{code:fe,label:"+ Ki\u1ec3m kho"}:void 0],[Pe?{code:q,label:"+ Th\xf4ng b\xe1o m\u1edbi"}:void 0],[Re?{code:he,label:"Danh s\xe1ch kh\xe1ch h\xe0ng"}:void 0,Ie?{code:ee,label:"+ Th\xeam Kh\xe1ch h\xe0ng"}:void 0,ze?{code:X,label:"Danh s\xe1ch nh\xe2n vi\xean"}:void 0,De?{code:$,label:"+ Th\xeam Nh\xe2n vi\xean"}:void 0,We?{code:de,label:"Chuy\u1ec3n v\xf9ng"}:void 0],[Ue?{code:se,label:"+ T\u1ea1o CKKM"}:void 0,Fe?{code:ue,label:"C\xf4ng n\u1ee3"}:void 0],[{code:le,label:"\u0110\u1ed5i m\u1eadt kh\u1ea9u"},{code:be,label:"\u0110\u0103ng xu\u1ea5t"}]],Le=(0,d.useState)(!1),Qe=(0,l.Z)(Le,2),Ve=Qe[0],Ye=Qe[1],He=(0,d.useState)(!1),Ge=(0,l.Z)(He,2),Je=Ge[0],Ke=Ge[1],qe=(0,d.useState)(!0),Xe=(0,l.Z)(qe,2),$e=Xe[0],en=Xe[1],nn=(0,h.D)(v.$E),tn=(0,l.Z)(nn,1)[0],rn=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(){var n,t,r,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Notification.requestPermission();case 2:if("denied"!==(n=e.sent)){e.next=6;break}return console.error("The user explicitly denied the permission request."),e.abrupt("return");case 6:return"granted"===n&&console.info("The user accepted the permission request."),e.next=9,navigator.serviceWorker.getRegistration();case 9:return t=e.sent,e.next=12,t.pushManager.getSubscription();case 12:if(!(r=e.sent)||!Ve){e.next=16;break}return console.info("User is already subscribed."),e.abrupt("return");case 16:return e.next=18,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:(0,x.EJ)("BLw43wcbE_9PstDuQ2XoCKxLZuf4jO9QtV_UVrnMS2HV6XIgyPMU1hkkA86AF1NfEM6pEbIsUHaqGy1JXDeApV4")});case 18:return a=e.sent,e.next=21,tn({variables:{data:(0,u.Z)({subscribedNewsPush:!0},!r&&{subscribeJson:JSON.stringify(a)}),where:{accountId:Y}}});case 21:e.sent.data&&Ye(!0);case 23:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),an=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(){var n,t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.serviceWorker.getRegistration();case 2:return n=e.sent,e.next=5,n.pushManager.getSubscription();case 5:return t=e.sent,e.next=8,tn({variables:{data:(0,u.Z)({subscribedNewsPush:!1},!Je&&{unsubscribeJson:JSON.stringify(t)}),where:{accountId:Y}}});case 8:if(!e.sent.data){e.next=16;break}if(Ye(!1),Je){e.next=16;break}return e.next=14,t.unsubscribe();case 14:e.sent&&console.info("Successfully unsubscribed from push notifications.");case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),on=Ve?(0,O.jsxs)(A,{onClick:an,children:[(0,O.jsx)(g.Z,{fontSize:"small"}),"\u2002Hu\u1ef7 th\xf4ng b\xe1o tin t\u1ee9c"]}):(0,O.jsxs)(A,{onClick:rn,children:[(0,O.jsx)(p.Z,{fontSize:"small"}),"\u2002Th\xf4ng b\xe1o tin t\u1ee9c"]}),cn=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(){var n,t,r,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Notification.requestPermission();case 2:if("denied"!==(n=e.sent)){e.next=6;break}return console.error("The user explicitly denied the permission request."),e.abrupt("return");case 6:return"granted"===n&&console.info("The user accepted the permission request."),e.next=9,navigator.serviceWorker.getRegistration();case 9:return t=e.sent,e.next=12,t.pushManager.getSubscription();case 12:if(!(r=e.sent)||!Je){e.next=16;break}return console.info("User is already subscribed."),e.abrupt("return");case 16:return e.next=18,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:(0,x.EJ)("BLw43wcbE_9PstDuQ2XoCKxLZuf4jO9QtV_UVrnMS2HV6XIgyPMU1hkkA86AF1NfEM6pEbIsUHaqGy1JXDeApV4")});case 18:return a=e.sent,e.next=21,tn({variables:{data:(0,u.Z)({subscribedSystemPush:!0},!r&&{subscribeJson:JSON.stringify(a)}),where:{accountId:Y}}});case 21:e.sent.data&&Ke(!0);case 23:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),un=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(){var n,t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.serviceWorker.getRegistration();case 2:return n=e.sent,e.next=5,n.pushManager.getSubscription();case 5:return t=e.sent,e.next=8,tn({variables:{data:(0,u.Z)({subscribedSystemPush:!1},!Ve&&{unsubscribeJson:JSON.stringify(t)}),where:{accountId:Y}}});case 8:if(!e.sent.data){e.next=16;break}if(Ke(!1),Ve){e.next=16;break}return e.next=14,t.unsubscribe();case 14:e.sent&&console.info("Successfully unsubscribed from push notifications.");case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),sn=Je?(0,O.jsxs)(A,{onClick:un,children:[(0,O.jsx)(g.Z,{fontSize:"small"}),"\u2002Hu\u1ef7 t.b\xe1o h\u1ec7 th\u1ed1ng"]}):(0,O.jsxs)(A,{onClick:cn,children:[(0,O.jsx)(p.Z,{fontSize:"small"}),"\u2002Th\xf4ng b\xe1o h\u1ec7 th\u1ed1ng"]});return(0,d.useEffect)((function(){var e=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(){var n,t,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=navigator.userAgent||window.opera,t=n.toLowerCase(),!/iPad|iPhone|iPod/.test(n)||window.MSStream){e.next=5;break}return en(!1),e.abrupt("return");case 5:if(-1===t.indexOf("safari")||-1!==t.indexOf("chrome")){e.next=8;break}return en(!1),e.abrupt("return");case 8:return e.next=10,navigator.serviceWorker.getRegistration();case 10:return r=e.sent,e.next=13,r.pushManager.getSubscription();case 13:e.sent&&(xe&&Ye(!0),ve&&Ke(!0));case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),(0,d.useEffect)((function(){var e=ye({document:S.Po,updateQuery:function(e,n){var t=n.subscriptionData;if(t)return{global:t.data.updatedGlobalData}}});return function(){return e()}}),[ye]),(0,O.jsxs)(j,{children:[$e&&(0,O.jsxs)(w,{marginTopBottom:"5px",children:[!Ze&&(0,O.jsx)(N,{children:on}),!Ze&&(0,O.jsx)(N,{children:sn})]}),Be.map((function(e,a){return(0,O.jsx)(ge,{itemIndex:a,toolItems:e,isCustomer:Ee,mainBottomTabs:n,setActiveMainBottomTab:t,setIsOpenedBottomMenu:r},a)}))]})}},6069:function(e,n,t){t.d(n,{Bu:function(){return b},EJ:function(){return p},Ok:function(){return m},RX:function(){return s},SB:function(){return x},_O:function(){return g},dh:function(){return i},hz:function(){return u},mr:function(){return f},tO:function(){return c},xE:function(){return d},zZ:function(){return l}});var r=t(2982),a=t(1237),o=t(3070),c=function(e,n){if(n){for(var t=(n=(n=n.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split("."),r=0,a=t.length;r<a;++r){var o=t[r];if(!(o in e))return;e=e[o]}return"stockQtyByShippedOutOrders"===n?e&&e.toLocaleString()+"(sp)":e}},i=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=new Date(e),r=t.getFullYear(),a=t.getMonth()+1,o=t.getDate(),c=t.getHours(),i=t.getMinutes();return o=o<10?"0"+o:o,a=a<10?"0"+a:a,c=c<10?"0"+c:c,i=i<10?"0"+i:i,n?"".concat(o,"/").concat(a,"/").concat(r," - ").concat(c,":").concat(i):"".concat(o,"/").concat(a,"/").concat(r)},u=function(e){var n=e.isoString,t=e.includeTime,r=new Date(n),a=r.getFullYear(),o=r.getMonth()+1,c=r.getDate(),i=r.getHours(),u=r.getMinutes();return c=c<10?"0"+c:c,o=o<10?"0"+o:o,i=i<10?"0"+i:i,u=u<10?"0"+u:u,t?"".concat(a,"-").concat(o,"-").concat(c,"T").concat(i,":").concat(u):"".concat(a,"-").concat(o,"-").concat(c)},s=function(e,n,t){switch(e){case o.rh.MONEY_ACHIEVE_TYPE:return{unit:"\u0111",type:"Ti\u1ec1n mua"};case o.rh.QUANTITY_ACHIEVE_TYPE:return{unit:"SP",type:"S\u1ed1 l\u01b0\u1ee3ng"};case o.rh.WEIGHT_ACHIEVE_TYPE:return{unit:t,type:"Kh\u1ed1i l\u01b0\u1ee3ng"}}},l=function(e,n){return isNaN(n)?e:"string"===typeof e?e.split(" ").slice(0,parseInt(n,10)).join(" "):e},d=function(e){var n=(e||{}).getTimeTogether,t=new Date,r=function(){var e=t.getHours();return e>9?e:"0".concat(e)}(),a=function(){var e=t.getMinutes();return e>9?e:"0".concat(e)}(),o=function(){var e=t.getDate();return e>9?e:"0".concat(e)}(),c=function(){var e=t.getMonth()+1;return e>9?e:"0".concat(e)}(),i=t.getFullYear(),u="".concat(i,"-").concat(c,"-").concat(o),s="".concat(i,"-").concat(c,"-").concat(o,"T").concat(r,":").concat(a);return n?s:u},f=function(){for(var e="#",n=0;n<6;n++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e},h=function(e){var n=1,t="";return e===o.mZ.G&&(n=.001,t="kg"),e===o.mZ.KG&&(n=.001,t="t\u1ea5n"),e===o.mZ.ML&&(n=.001,t="l\xedt"),e===o.mZ.MG&&(n=1e-6,t="kg"),{weightCoefficient:n,weightShowUnit:t}},b=function(e){for(var n=e.chartData,t=void 0===n?[]:n,o=e.startOfTimeRange,c=(t&&t[0]||{}).unitString,i=h(void 0===c?"":c),u=i.weightCoefficient,s=i.weightShowUnit,l=new Date(o),d=l.getFullYear(),f=l.getMonth(),b=[],g=[],p=[],m=[],x=function(e){var n=t[e],a=n._id,o=n.totalMoney,c=n.totalQuantity,i=n.totalWeight,u=a||{},s=u.orderYear,l=u.orderMonth,h=u.productCode,x=u.productCategories,v=u.customerInfo,_=u.staffInfo,S=u.managerInfo,y=(v||{}).fullName,C=(_||{}).fullName,E=(S||{}).fullName,Z=h||x||y||C||E||"";-1===b.findIndex((function(e){return e===Z}))&&(b=[].concat((0,r.Z)(b),[Z]));var k={totalMoney:o,totalQuantity:c,totalWeight:i,label:Z};s===d?l===f?g=[].concat((0,r.Z)(g),[k]):p=[].concat((0,r.Z)(p),[k]):0===f&&11===l?p=[].concat((0,r.Z)(p),[k]):m=[].concat((0,r.Z)(m),[k])},v=0;v<t.length;v++)x(v);for(var _=[],S=[],y=[],C=[],E=[],Z=[],k=[],T=[],j=[],w=function(e){var n=b[e],t=g.find((function(e){return e.label===n})),a=p.find((function(e){return e.label===n})),o=m.find((function(e){return e.label===n})),c=t||{},i=c.totalMoney,s=c.totalQuantity,l=c.totalWeight,d=a||{},f=d.totalMoney,h=d.totalQuantity,x=d.totalWeight,v=o||{},w=v.totalMoney,N=v.totalQuantity,A=v.totalWeight;_=[].concat((0,r.Z)(_),[i/1e6||0]),S=[].concat((0,r.Z)(S),[s||0]),y=[].concat((0,r.Z)(y),[l*u||0]),C=[].concat((0,r.Z)(C),[f/1e6||0]),E=[].concat((0,r.Z)(E),[h/1e6||0]),Z=[].concat((0,r.Z)(Z),[x*u||0]),k=[].concat((0,r.Z)(k),[w/1e6||0]),T=[].concat((0,r.Z)(T),[N||0]),j=[].concat((0,r.Z)(j),[A*u||0])},N=0;N<b.length;N++)w(N);var A=function(){var e=f+1;return e>9?e:"0".concat(e)}(),M=0===f?"Th\xe1ng 12 - N\u0103m "+(d-1):"Th\xe1ng "+(f>9?f:"0".concat(f))+" - N\u0103m "+d,O=function(){var e=0;return _.forEach((function(n){return e+=n})),e?Number(e).toFixed(3).replace(/\B(?=(\d{3})+(?!\d))/g," "):0}(),P=function(){var e=0;return y.forEach((function(n){return e+=n})),"".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g," ")}(),R=function(){var e=0;return S.forEach((function(n){return e+=n})),"".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g," ")}(),I=[{label:"Th\xe1ng "+A+" - N\u0103m "+d,data:_,backgroundColor:a.Z.rgbaPrimary},{label:M,data:C,backgroundColor:a.Z.chartGreen},{label:"Th\xe1ng "+A+" - N\u0103m "+(d-1),data:k,backgroundColor:a.Z.purple}],z=[{label:"Th\xe1ng "+A+" - N\u0103m "+d,data:S,backgroundColor:a.Z.rgbaPrimary},{label:M,data:E,backgroundColor:a.Z.chartGreen},{label:"Th\xe1ng "+A+" - N\u0103m "+(d-1),data:T,backgroundColor:a.Z.purple}],D=[{label:"Th\xe1ng "+A+" - N\u0103m "+d,data:y,backgroundColor:a.Z.rgbaPrimary},{label:M,data:Z,backgroundColor:a.Z.chartGreen},{label:"Th\xe1ng "+A+" - N\u0103m "+(d-1),data:j,backgroundColor:a.Z.purple}];return{monthWeightShowUnit:s,totalMonthMoney:O,totalMonthWeight:P,totalMonthQuantity:R,chartLabels:b,moneyDatasets:I,quantityDatasets:z,weightDatasets:D}},g=function(e){for(var n=e.chartData,t=e.startOfTimeRange,o=(n&&n[0]||{}).unitString,c=h(void 0===o?"":o),i=c.weightCoefficient,u=c.weightShowUnit,s=t?new Date(t).getFullYear():(new Date).getFullYear(),l=[],d=[],f=[],b=function(e){var t=n[e],a=t._id,o=t.totalMoney,c=t.totalQuantity,i=t.totalWeight,u=a||{},h=u.orderYear,b=u.productCode,g=u.customerInfo,p=u.staffInfo,m=u.managerInfo,x=(g||{}).fullName,v=(p||{}).fullName,_=(m||{}).fullName,S=b||x||v||_||"";-1===l.findIndex((function(e){return e===S}))&&(l=[].concat((0,r.Z)(l),[S]));var y={totalMoney:o,totalQuantity:c,totalWeight:i,label:S};h===s?d=[].concat((0,r.Z)(d),[y]):f=[].concat((0,r.Z)(f),[y])},g=0;g<n.length;g++)b(g);for(var p=[],m=[],x=[],v=[],_=[],S=[],y=function(e){var n=l[e],t=d.find((function(e){return e.label===n})),a=f.find((function(e){return e.label===n})),o=t||{},c=o.totalMoney,u=o.totalQuantity,s=o.totalWeight,h=a||{},b=h.totalMoney,g=h.totalQuantity,y=h.totalWeight;p=[].concat((0,r.Z)(p),[c/1e6||0]),m=[].concat((0,r.Z)(m),[u||0]),x=[].concat((0,r.Z)(x),[s*i||0]),v=[].concat((0,r.Z)(v),[b/1e6||0]),_=[].concat((0,r.Z)(_),[g||0]),S=[].concat((0,r.Z)(S),[y*i||0])},C=0;C<l.length;C++)y(C);var E=function(){var e=0;return p.forEach((function(n){return e+=n})),e.toLocaleString()}(),Z=function(){var e=0;return x.forEach((function(n){return e+=n})),e.toLocaleString()}(),k=[{label:"N\u0103m "+s,data:p,backgroundColor:a.Z.rgbaPrimary},{label:"N\u0103m "+(s-1),data:v,backgroundColor:a.Z.chartGreen}],T=[{label:"N\u0103m "+s,data:m,backgroundColor:a.Z.rgbaPrimary},{label:"N\u0103m "+(s-1),data:_,backgroundColor:a.Z.chartGreen}],j=[{label:"N\u0103m "+s,data:x,backgroundColor:a.Z.rgbaPrimary},{label:"N\u0103m "+(s-1),data:S,backgroundColor:a.Z.chartGreen}];return{yearWeightShowUnit:u,totalYearMoney:E,totalYearWeight:Z,chartLabels:l,moneyDatasets:k,quantityDatasets:T,weightDatasets:j}},p=function(e){for(var n=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),t=window.atob(n),r=new Uint8Array(t.length),a=0;a<t.length;++a)r[a]=t.charCodeAt(a);return r},m=function(e){for(var n="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",r=t.length,a=0;a<e;)n+=t.charAt(Math.floor(Math.random()*r)),a+=1;return n},x=function(){var e=navigator.userAgent||window.opera;return!!/windows phone/i.test(e)||(!!/android/i.test(e)||!(!/iPad|iPhone|iPod/.test(e)||window.MSStream))}}}]);