"use strict";(self.webpackChunkproject_g5=self.webpackChunkproject_g5||[]).push([[2447],{9146:function(n,e,t){t.d(e,{Z:function(){return l}});var r,i=t(1413),o=(t(7313),t(168)),c=t(3115),a=t(1237),s=c.ZP.button(r||(r=(0,o.Z)(["\n  left: 0;\n  bottom: 0;\n  z-index: 1;\n  width: 100%;\n  color: #fff;\n  border: none;\n  display: flex;\n  padding: 10px;\n  position: fixed;\n  cursor: pointer;\n  font-size: 13px;\n  font-weight: 600;\n  padding: 15px 20px;\n  align-items: center;\n  text-transform: uppercase;\n  justify-content: space-around;\n  background-color: ",";\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n"])),a.Z.rgbaBlack),d=t(6417),u=function(n){var e=n.label;return(0,d.jsx)(s,(0,i.Z)((0,i.Z)({},n),{},{children:e}))};u.defaultProps={label:"N\xfat b\u1ea5m"};var l=u},6524:function(n,e,t){t.r(e),t.d(e,{default:function(){return M}});var r,i,o,c,a,s,d,u=t(4165),l=t(5861),p=t(885),x=t(7313),f=t(5627),h=t(3222),g=t(790),Z=t(5222),m=t(9146),b=t(9673),v=t(1359),j=t(1677),E=t(168),P=t(3115),y=t(1237),w=P.ZP.div(r||(r=(0,E.Z)(["\n  font-size: 12px;\n  padding: 10px 10px 120px;\n"]))),I=P.ZP.p(i||(i=(0,E.Z)(["\n  font-weight: 700;\n"]))),T=P.ZP.div(o||(o=(0,E.Z)(["\n  display: flex;\n  align-items: center;\n  margin: 10px 0 15px;\n"]))),_=P.ZP.div(c||(c=(0,E.Z)(["\n  display: flex;\n  margin: 10px 0;\n  align-items: center;\n  justify-content: space-between;\n"]))),C=P.ZP.div(a||(a=(0,E.Z)(["\n  width: 100px;\n"]))),O=(P.ZP.input(s||(s=(0,E.Z)(["\n  width: 60%;\n"]))),P.ZP.div(d||(d=(0,E.Z)(["\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  display: flex;\n  position: fixed;\n  padding: 10px;\n  align-items: center;\n  justify-content: space-around;\n  background-color: ",";\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n"])),y.Z.rgbaBlack),t(3454)),k=t(2153),A=t(3070),S=t(6417),M=function(n){var e=n.discountPromotionId,t=(0,f.cI)({defaultValues:{}}),r=t.register,i=t.setValue,o=t.clearErrors,c=t.handleSubmit,a=t.formState.errors,s=(0,h.I0)(),d=(0,x.useState)(void 0),E=(0,p.Z)(d,2),P=E[0],y=E[1];r("customer",{required:!P});var M=(0,g.D)(O.Xu),N=(0,p.Z)(M,1)[0],R=(0,g.D)(O.JS),D=(0,p.Z)(R,1)[0],F=P?(0,S.jsxs)(_,{style:{width:"100%"},children:[(0,S.jsxs)(I,{children:[P.fullName," - ",P.phoneNumber]}),(0,S.jsx)(j.Z,{label:"\u0110\u1ed5i",onClick:function(){y(void 0),i("customer",void 0)}})]}):(0,S.jsx)(v.Z,{isSelectOne:!0,isError:!!a.customer,roles:[A.If.CUSTOMER],onClickSelectResultItem:function(n){o("customer"),y(n.node),i("customer",n.node)}}),V=function(){var n=(0,l.Z)((0,u.Z)().mark((function n(t){var r,i,o,c,a,d,l,p,x,f;return(0,u.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t.customer,i=t.paidAt,o=t.bePaidMoneyValue,c=r._id,a=r.staffAccountId,d=r.managerAccountId,l=r.directorAccountId,!e){n.next=11;break}return p={paidAt:new Date(i).toISOString(),customerAccountId:c,staffAccountId:a,managerAccountId:d,directorAccountId:l},x={discountPromotionId:e},n.next=7,D({variables:{data:p,where:x}});case 7:n.sent.data&&s((0,k.mm)()),n.next=16;break;case 11:return f={paidAt:new Date(i).toISOString(),bePaidMoneyValue:Number(o),customerAccountId:c,staffAccountId:a,managerAccountId:d,directorAccountId:l},n.next=14,N({variables:{data:f}});case 14:n.sent.data&&s((0,k.mm)());case 16:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return(0,S.jsxs)(w,{children:[(0,S.jsxs)(Z.Z,{children:[(0,S.jsxs)(T,{children:[(0,S.jsx)(C,{children:"Kh\xe1ch h\xe0ng:"}),F]}),(0,S.jsxs)(T,{children:[(0,S.jsx)(C,{children:"Ng\xe0y tr\u1ea3:"}),(0,S.jsx)(b.Z,{type:"datetime-local",name:"paidAt",register:r,validations:{required:!0},isError:!!a.paidAt})]}),!e&&(0,S.jsxs)(T,{children:[(0,S.jsx)(C,{children:"S\u1ed1 ti\u1ec1n:"}),(0,S.jsx)(b.Z,{type:"number",textAlign:"right",name:"bePaidMoneyValue",register:r,validations:{required:!0},isError:!!a.bePaidMoneyValue}),(0,S.jsx)("span",{style:{marginLeft:10},children:"\u0111"})]})]}),(0,S.jsx)(m.Z,{label:"X\xe1c nh\u1eadn",onClick:c(V)})]})}},2447:function(n,e,t){t.d(e,{Z:function(){return En}});var r,i,o,c,a,s,d,u,l,p,x,f,h,g,Z,m,b,v,j,E,P,y,w=t(885),I=t(4165),T=t(5861),_=t(7313),C=t(3222),O=t(790),k=t(3511),A=t(6618),S=t(6524),M=t(6173),N=t(4214),R=t(1677),D=t(2262),F=t(6881),V=t(6069),Y=t(168),K=t(3115),H=t(1237),U=(K.ZP.div(r||(r=(0,Y.Z)(["\n  padding: 0;\n  font-size: 12px;\n"]))),K.ZP.div(i||(i=(0,Y.Z)(["\n  margin: 20px 0;\n  background-color: #fff;\n  padding: 15px 10px 10px;\n  box-shadow: 0px 2px 1px -1px rgb(0 0 0 / 20%),\n    0px 1px 1px 0px rgb(0 0 0 / 14%), 0px 1px 3px 0px rgb(0 0 0 / 12%);\n"]))),K.ZP.div(o||(o=(0,Y.Z)([""]))),K.ZP.div(c||(c=(0,Y.Z)(["\n  display: flex;\n  margin: 15px auto;\n  width: fit-content;\n  justify-content: center;\n  border: solid 1px ",";\n"])),H.Z.primary),K.ZP.div(a||(a=(0,Y.Z)(["\n  padding: 5px 10px;\n  cursor: pointer;\n  text-align: center;\n  color: ",";\n  border-left: 1px solid ",";\n  background-color: ",";\n"])),(function(n){return n.activeColor.textColor}),(function(n){return n.borderLeftColor}),(function(n){return n.activeColor.backgroundColor})),K.ZP.div(s||(s=(0,Y.Z)(["\n  position: relative;\n  border-radius: 4px;\n  background-color: #fff;\n  padding: 15px 10px 10px;\n  margin: ",";\n  cursor: ",";\n  box-shadow: 0px 2px 1px -1px rgb(0 0 0 / 20%),\n    0px 1px 1px 0px rgb(0 0 0 / 14%), 0px 1px 3px 0px rgb(0 0 0 / 12%);\n"])),(function(n){return n.customerMargin}),(function(n){return n.canApproveDiscountPromotion?"pointer":"auto"}))),z=K.ZP.div(d||(d=(0,Y.Z)([""]))),L=(K.ZP.div(u||(u=(0,Y.Z)(["\n  display: flex;\n  margin: 10px 0 5px;\n  align-items: center;\n  justify-content: space-between;\n"]))),K.ZP.div(l||(l=(0,Y.Z)(["\n  margin: 5px 0 15px;\n"])))),q=K.ZP.div(p||(p=(0,Y.Z)(["\n  margin: 0 0 15px;\n"]))),G=K.ZP.p(x||(x=(0,Y.Z)(["\n  font-weight: 700;\n  color: ",";\n"])),H.Z.primary),X=K.ZP.p(f||(f=(0,Y.Z)(["\n  font-weight: 700;\n"]))),B=K.ZP.span(h||(h=(0,Y.Z)(["\n  font-weight: 500;\n"]))),Q=K.ZP.span(g||(g=(0,Y.Z)(["\n  font-weight: 700;\n"]))),W=K.ZP.span(Z||(Z=(0,Y.Z)(["\n  font-weight: 500;\n  font-style: italic;\n  color: ",";\n"])),H.Z.black),J=K.ZP.span(m||(m=(0,Y.Z)(["\n  font-size: 12px;\n  font-style: italic;\n  color: ",";\n"])),H.Z.secondary),$=K.ZP.p(b||(b=(0,Y.Z)(["\n  margin: 5px 0 0;\n  font-size: 12px;\n  width: fit-content;\n  font-style: italic;\n  color: ",";\n"])),H.Z.primary),nn=K.ZP.div(v||(v=(0,Y.Z)(["\n  display: flex;\n  algin-items: center;\n  justify-content: space-between;\n"]))),en=K.ZP.div(j||(j=(0,Y.Z)(["\n  bottom: 5px;\n  position: absolute;\n  right: ",";\n"])),(function(n){return n.right})),tn=K.ZP.div(E||(E=(0,Y.Z)(["\n  top: 0;\n  right: 10px;\n  color: #777;\n  font-size: 20px;\n  cursor: pointer;\n  width: fit-content;\n  position: absolute;\n"]))),rn=K.ZP.div(P||(P=(0,Y.Z)(["\n  top: 20px;\n  right: 10px;\n  padding: 5px 10px;\n  position: absolute;\n  border-radius: 5px;\n  background-color: #fff;\n  display: ",";\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n"])),(function(n){return n.display})),on=K.ZP.div(y||(y=(0,Y.Z)(["\n  padding: 3px 5px;\n  font-size: 12px;\n  &:hover {\n    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n  }\n"]))),cn=t(2153),an=t(7123),sn=t(3454),dn=t(3070),un=t(7119),ln=t(6417),pn=dn.fH.MONEY_FIXED_VALUE,xn=dn.fH.MONEY_PERCENT_OF_ORDER_VALUE,fn=dn.fH.MONEY_PERCENT_OF_DIFFERENCE_ORDER_VALUE,hn=dn.fH.MONEY_ORDER_QUANTITY,gn=dn.fH.MONEY_DIFFERENCE_ORDER_QUANTITY,Zn=dn.fH.MONEY_ORDER_WEIGHT,mn=dn.fH.MONEY_DIFFERENCE_ORDER_WEIGHT,bn=(0,_.lazy)((function(){return t.e(7471).then(t.bind(t,7471))})),vn=function(n){var e=n.message,t=n.updateFunction,r=(0,C.I0)(),i=function(){var n=(0,T.Z)((0,I.Z)().mark((function n(){return(0,I.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t();case 2:n.sent.data&&r((0,cn._w)());case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,ln.jsxs)(ln.Fragment,{children:[(0,ln.jsx)("p",{style:{margin:10},children:e}),(0,ln.jsxs)("div",{style:{display:"flex",width:"100%",justifyContent:"center"},children:[(0,ln.jsx)(D.Z,{label:"\u0110\xf3ng l\u1ea1i",onClick:function(){return r((0,cn._w)())}}),(0,ln.jsx)(N.Z,{label:"X\xe1c nh\u1eadn",onClick:i})]})]})},jn=function(n){var e,t=n.customerMargin,r=n.discountPromotionItem,i=(0,C.I0)(),o=(0,C.v9)((function(n){return n.authReducer})).viewerQuery,c=(0,C.v9)((function(n){return n.firstSubModalReducer})).visible,a=(o||{}).permissions,s=a.includes(un.gz.CAN_APPROVE_DISCOUNT_PROMOTION),d=a.includes(un.gz.CAN_DELETE_DISCOUNT_PROMOTION),u=(0,_.useRef)(null),l=(0,_.useState)(!1),p=(0,w.Z)(l,2),x=p[0],f=p[1],h=x?"block":"none",g=r||{},Z=g._id,m=(g.code,g.typeCode),b=g.startTime,v=g.endTime,j=g.title,E=g.conditions,P=g.detail,y=g.isApproved,D=g.payWhenCreateOrder,Y=g.isBuyAnyProductOfConditions,K=g.createdAt,H=P.moneyMethodCode,jn=P.products,En=P.value,Pn=P.giftDescription,yn=P.paymentTypeCode,wn=(0,k.Z)(new Date,new Date(K))<=1,In=d&&wn,Tn=(0,O.D)(sn.GG,{refetchQueries:[{query:an.Kr},"GET_DISCOUNT_PROMOTIONS",{query:an.hM},"GET_DISCOUNT_PROMOTION_DIARIES"]}),_n=(0,w.Z)(Tn,1)[0],Cn=(0,O.D)(sn.dF,{refetchQueries:[{query:an.Kr},"GET_DISCOUNT_PROMOTIONS",{query:an.hM},"GET_DISCOUNT_PROMOTION_DIARIES"]}),On=(0,w.Z)(Cn,1)[0],kn=m===dn.t_.OTHER,An=Y?"Khi mua B\u1ea5t k\u1ef3 S\u1ea3n ph\u1ea9m":"Khi mua \u0110\u1ed3ng th\u1eddi S\u1ea3n ph\u1ea9m",Sn=(0,V.dh)(b),Mn=(0,V.dh)(v),Nn=j&&(null===(e=j[0])||void 0===e?void 0:e.showText),Rn=D?"Tr\u1ea3 ngay khi \u0111\u1eb7t h\xe0ng":"Tr\u1ea3 sau",Dn=function(n,e){var t=1===n.length,r=(function(){switch(e){case dn.rh.MONEY_ACHIEVE_TYPE:return"\u0111";case dn.rh.QUANTITY_ACHIEVE_TYPE:return"sp";case dn.rh.WEIGHT_ACHIEVE_TYPE:"".concat(n[0].netUnitValue).concat(n[0].unitString)}}(),function(n,e){var r=n.code,i=(n.minRequireValue,(n.productInfo||{}).name);t||"".concat(e+1,". ");return(0,ln.jsxs)("p",{children:["- ",r," - ",(0,F.Z)(i)]})});return(0,ln.jsx)(ln.Fragment,{children:n.map((function(n,e){return(0,ln.jsx)(_.Fragment,{children:r(n,e)},e)}))})},Fn=(0,ln.jsxs)(ln.Fragment,{children:[(0,ln.jsx)(L,{children:(0,ln.jsxs)(X,{children:["\u0110i\u1ec1u ki\u1ec7n:"," ",E&&!!E.length&&(0,ln.jsx)(B,{children:An})]})}),E&&E.map((function(n,e){var t=n.products,r=n.productConditionType,i=n.minTotalRequireValue,o=(0,V.RX)(r,t[0].netUnitValue,t[0].unitString);return(0,ln.jsxs)(q,{children:[Dn(t,r),(0,ln.jsxs)("p",{children:["T\u1ed5ng ",o.type," c\u1ea7n \u0111\u1ea1t: ",i," ",o.unit]})]},e)}))]}),Vn=(0,ln.jsxs)(ln.Fragment,{children:[(0,ln.jsx)("hr",{})," ",function(){var n=[pn,xn,fn,hn,gn,Zn,mn];switch(yn){case dn.ad.MONEY_TYPE:var e=n.find((function(n){return n.value===H}));return(0,ln.jsxs)(ln.Fragment,{children:[(0,ln.jsx)(Q,{children:"T\u1eb7ng/CKKM:"}),(0,ln.jsx)("p",{children:function(n){if(n.value===pn.value)return"Ti\u1ec1n m\u1eb7t ".concat(En.toLocaleString()," \u0111");var e=n.value.includes("percent_of")?"%":"\u0111";return"Ti\u1ec1n = ".concat(En.toLocaleString()).concat(e)+n.label.slice(12)}(e)})]});case dn.ad.GIFT_TYPE:return(0,ln.jsxs)(ln.Fragment,{children:[(0,ln.jsx)(Q,{children:"T\u1eb7ng/CKKM:"}),(0,ln.jsxs)("p",{children:[Pn," tr\u1ecb gi\xe1 ",En.toLocaleString()," \u0111"]})]});case dn.ad.TAX_OFFSET:return"C\u1ea5n tr\u1eeb: ".concat(Pn," ").concat(En.toLocaleString()," \u0111");case dn.ad.PRODUCT_TYPE:return function(n){var e=function(n,e){var t=n.code,r=n.quantity,i=(n.productInfo||{}).name;return(0,ln.jsxs)("p",{children:[(0,ln.jsx)(J,{children:"- T\u1eb7ng"})," ",r," sp: ",t," - ",(0,F.Z)(i)]})};return(0,ln.jsxs)(ln.Fragment,{children:[(0,ln.jsx)(Q,{children:"T\u1eb7ng/CKKM:"}),n.map((function(n,t){return(0,ln.jsx)(_.Fragment,{children:e(n)},t)}))]})}(jn);default:return null}}()]}),Yn=(0,ln.jsx)(rn,{display:h,ref:u,children:(0,ln.jsx)(on,{onClick:function(){var n={title:"Tr\u1ea3 CK/KM cho ch\u01b0\u01a1ng tr\xecnh d\u1ea1ng kh\xe1c",children:(0,ln.jsx)(_.Suspense,{fallback:(0,ln.jsx)(M.default,{}),children:(0,ln.jsx)(S.default,{discountPromotionId:Z})})};i((0,cn.dn)(n))},children:"Tr\u1ea3 CK/KM"})}),Kn=(0,ln.jsxs)(ln.Fragment,{children:[(0,ln.jsx)(tn,{onClick:function(){return f(!x)},children:(0,ln.jsx)(A.Z,{})}),Yn]});return(0,_.useEffect)((function(){var n=function(n){u.current&&!u.current.contains(n.target)&&f(!1)};return document.addEventListener("mousedown",n),function(){document.removeEventListener("mousedown",n)}}),[u]),(0,ln.jsxs)(U,{customerMargin:t,canApproveDiscountPromotion:s,children:[kn&&Kn,(0,ln.jsxs)(z,{onClick:function(){if(s){var n={title:"Chi ti\u1ebft chi\u1ebft kh\u1ea5u/khuy\u1ebfn m\u1ea1i",children:(0,ln.jsx)(_.Suspense,{fallback:(0,ln.jsx)(M.default,{}),children:(0,ln.jsx)(bn,{discountPromotionItem:r})})};i((0,cn.FV)(n))}},children:[(0,ln.jsxs)(nn,{children:[(0,ln.jsxs)(G,{children:[Sn," - ",Mn,":"," ",(0,ln.jsx)(W,{children:Nn})]}),!y&&(0,ln.jsx)(J,{children:"Ch\u1edd duy\u1ec7t"})]}),Fn,Vn,(0,ln.jsx)(nn,{children:(0,ln.jsx)($,{children:Rn})})]}),!y&&!c&&(0,ln.jsx)(en,{right:In?"50px":"5px",children:(0,ln.jsx)(R.Z,{label:"Duy\u1ec7t",onClick:function(){_n({variables:{data:{isApproved:!0},where:{discountPromotionId:Z}}})}})}),In&&(0,ln.jsx)(en,{right:"5px",children:(0,ln.jsx)(N.Z,{label:"Xo\xe1",onClick:function(){var n={discountPromotionId:Z},e={title:"X\xe1c nh\u1eadn xo\xe1",children:(0,ln.jsx)(vn,{message:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn duy\u1ec7t xo\xe1 CKKM n\xe0y?",updateFunction:(0,T.Z)((0,I.Z)().mark((function e(){var t;return(0,I.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,On({variables:{where:n}});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))})};i((0,cn.om)(e))}})})]})};jn.defaultProps={customerMargin:"15px 5px"};var En=jn},5222:function(n,e,t){t.d(e,{Z:function(){return f}});var r,i,o,c=t(1413),a=(t(7313),t(168)),s=t(3115),d=t(1237),u=s.ZP.div(r||(r=(0,a.Z)(["\n  position: relative;\n  margin: 0 0 20px;\n"]))),l=s.ZP.div(i||(i=(0,a.Z)(["\n  font-weight: 600;\n  margin: 0 0 10px;\n  text-transform: uppercase;\n  color: ",";\n"])),d.Z.lightBlack),p=s.ZP.div(o||(o=(0,a.Z)(["\n  padding: 10px;\n  margin: 0 0 20px;\n  border-radius: 4px;\n  background-color: #fff;\n  box-shadow: 0px 2px 1px -1px rgb(0 0 0 / 20%),\n    0px 1px 1px 0px rgb(0 0 0 / 14%), 0px 1px 3px 0px rgb(0 0 0 / 12%);\n"]))),x=t(6417),f=function(n){var e=n.title,t=n.children;return(0,x.jsxs)(u,(0,c.Z)((0,c.Z)({},n),{},{children:[(0,x.jsx)(l,{children:e}),(0,x.jsx)(p,{children:t})]}))}},9673:function(n,e,t){t.d(e,{Z:function(){return h}});var r,i,o=t(1413),c=(t(7313),t(2180)),a=t(6947),s=t(168),d=t(3115),u=t(1237),l=d.ZP.div(r||(r=(0,s.Z)(["\n  height: 26px;\n  display: inline-block;\n  width: ",";\n  margin: ",";\n"])),(function(n){return n.width?n.width:"100%"}),(function(n){return n.margin?n.margin:"0 0 0 5px"})),p=d.ZP.input(i||(i=(0,s.Z)(["\n  width: 100%;\n  border: none;\n  font-size: 12px;\n  font-weight: 300;\n  padding: ",";\n  line-height: ",";\n  background-color: ",";\n  border-bottom: 1px solid ",";\n  font-style: ",";\n  text-align: ",";\n  &:hover {\n    box-shadow: none;\n  }\n  &:focus {\n    box-shadow: none;\n  }\n  &:focus-visible {\n    outline: none;\n    box-shadow: none;\n  }\n"])),(function(n){return n.padding}),(function(n){return n.lineHeight}),u.Z.lightWhite,u.Z.secondary,(function(n){return n.fontStyle?n.fontStyle:""}),(function(n){return n.textAlign?n.textAlign:"left"})),x=t(6417),f=function(n){var e=n.label,t=n.name,r=n.isError,i=n.errorMessage,s=n.register,d=n.validations,u=n.isInline,f=n.width,h=n.margin,g=u?"auto":f;return(0,x.jsxs)(l,{width:g,margin:h,children:[e&&(0,x.jsx)(c.Z,{label:e}),(0,x.jsx)(p,(0,o.Z)((0,o.Z)({},s(t,d)),n)),(0,x.jsx)(a.Z,{isError:r,errorMessage:i})]})};f.defaultProps={type:"text",validations:{},padding:"2px 5px",register:function(){},lineHeight:"20px"};var h=f}}]);