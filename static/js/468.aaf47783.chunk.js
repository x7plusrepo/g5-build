"use strict";(self.webpackChunkproject_g5=self.webpackChunkproject_g5||[]).push([[468],{9146:function(n,e,t){t.d(e,{Z:function(){return l}});var r,i=t(1413),o=(t(7313),t(168)),a=t(3115),c=t(1237),s=a.ZP.button(r||(r=(0,o.Z)(["\n  left: 0;\n  bottom: 0;\n  z-index: 1;\n  width: 100%;\n  color: #fff;\n  border: none;\n  display: flex;\n  padding: 10px;\n  position: fixed;\n  cursor: pointer;\n  font-size: 13px;\n  font-weight: 600;\n  padding: 15px 20px;\n  align-items: center;\n  text-transform: uppercase;\n  justify-content: space-around;\n  background-color: ",";\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n"])),c.Z.rgbaBlack),d=t(6417),u=function(n){var e=n.label;return(0,d.jsx)(s,(0,i.Z)((0,i.Z)({},n),{},{children:e}))};u.defaultProps={label:"N\xfat b\u1ea5m"};var l=u},6524:function(n,e,t){t.r(e),t.d(e,{default:function(){return N}});var r,i,o,a,c,s,d,u=t(4165),l=t(5861),p=t(885),x=t(7313),h=t(5627),f=t(3222),g=t(790),m=t(5222),Z=t(9146),v=t(9673),b=t(1359),j=t(1677),y=t(168),T=t(3115),C=t(1237),E=T.ZP.div(r||(r=(0,y.Z)(["\n  font-size: 12px;\n  padding: 10px 10px 120px;\n"]))),P=T.ZP.p(i||(i=(0,y.Z)(["\n  font-weight: 700;\n"]))),w=T.ZP.div(o||(o=(0,y.Z)(["\n  display: flex;\n  align-items: center;\n  margin: 10px 0 15px;\n"]))),I=T.ZP.div(a||(a=(0,y.Z)(["\n  display: flex;\n  margin: 10px 0;\n  align-items: center;\n  justify-content: space-between;\n"]))),S=T.ZP.div(c||(c=(0,y.Z)(["\n  width: 100px;\n"]))),_=(T.ZP.input(s||(s=(0,y.Z)(["\n  width: 60%;\n"]))),T.ZP.div(d||(d=(0,y.Z)(["\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  display: flex;\n  position: fixed;\n  padding: 10px;\n  align-items: center;\n  justify-content: space-around;\n  background-color: ",";\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n"])),C.Z.rgbaBlack),t(3454)),O=t(2153),A=t(3070),k=t(6417),N=function(n){var e=n.discountPromotionId,t=(0,h.cI)({defaultValues:{}}),r=t.register,i=t.setValue,o=t.clearErrors,a=t.handleSubmit,c=t.formState.errors,s=(0,f.I0)(),d=(0,x.useState)(void 0),y=(0,p.Z)(d,2),T=y[0],C=y[1];r("customer",{required:!T});var N=(0,g.D)(_.Xu),D=(0,p.Z)(N,1)[0],M=(0,g.D)(_.JS),R=(0,p.Z)(M,1)[0],V=T?(0,k.jsxs)(I,{style:{width:"100%"},children:[(0,k.jsxs)(P,{children:[T.fullName," - ",T.phoneNumber]}),(0,k.jsx)(j.Z,{label:"\u0110\u1ed5i",onClick:function(){C(void 0),i("customer",void 0)}})]}):(0,k.jsx)(b.Z,{isSelectOne:!0,isError:!!c.customer,roles:[A.If.CUSTOMER],onClickSelectResultItem:function(n){o("customer"),C(n.node),i("customer",n.node)}}),F=function(){var n=(0,l.Z)((0,u.Z)().mark((function n(t){var r,i,o,a,c,d,l,p,x,h;return(0,u.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t.customer,i=t.paidAt,o=t.bePaidMoneyValue,a=r._id,c=r.staffAccountId,d=r.managerAccountId,l=r.directorAccountId,!e){n.next=11;break}return p={paidAt:new Date(i).toISOString(),customerAccountId:a,staffAccountId:c,managerAccountId:d,directorAccountId:l},x={discountPromotionId:e},n.next=7,R({variables:{data:p,where:x}});case 7:n.sent.data&&s((0,O.mm)()),n.next=16;break;case 11:return h={paidAt:new Date(i).toISOString(),bePaidMoneyValue:Number(o),customerAccountId:a,staffAccountId:c,managerAccountId:d,directorAccountId:l},n.next=14,D({variables:{data:h}});case 14:n.sent.data&&s((0,O.mm)());case 16:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return(0,k.jsxs)(E,{children:[(0,k.jsxs)(m.Z,{children:[(0,k.jsxs)(w,{children:[(0,k.jsx)(S,{children:"Kh\xe1ch h\xe0ng:"}),V]}),(0,k.jsxs)(w,{children:[(0,k.jsx)(S,{children:"Ng\xe0y tr\u1ea3:"}),(0,k.jsx)(v.Z,{type:"datetime-local",name:"paidAt",register:r,validations:{required:!0},isError:!!c.paidAt})]}),!e&&(0,k.jsxs)(w,{children:[(0,k.jsx)(S,{children:"S\u1ed1 ti\u1ec1n:"}),(0,k.jsx)(v.Z,{type:"number",textAlign:"right",name:"bePaidMoneyValue",register:r,validations:{required:!0},isError:!!c.bePaidMoneyValue}),(0,k.jsx)("span",{style:{marginLeft:10},children:"\u0111"})]})]}),(0,k.jsx)(Z.Z,{label:"X\xe1c nh\u1eadn",onClick:a(F)})]})}},468:function(n,e,t){t.d(e,{Z:function(){return Ge}});var r,i,o,a,c,s,d,u,l,p,x,h,f,g,m,Z,v,b,j,y,T,C,E,P,w,I,S,_,O,A,k,N,D,M,R,V,F,q,U,K,H,Y=t(885),G=t(4165),z=t(5861),L=t(7313),B=t(790),X=t(3222),W=t(514),Q=t(3532),J=t(3511),$=t(5954),nn=t(6618),en=t(7522),tn=t(1997),rn=t(750),on=t(6524),an=t(6173),cn=t(4214),sn=t(1677),dn=t(2262),un=t(2982),ln=t(1413),pn=t(5627),xn=t(4641),hn=t(9673),fn=t(3182),gn=t(5222),mn=(t(2399),t(1300)),Zn=t(2397),vn=t(6879),bn=t(1359),jn=t(6881),yn=t(6069),Tn=t(6947),Cn=t(168),En=t(3115),Pn=t(1237),wn=En.ZP.div(r||(r=(0,Cn.Z)(["\n  font-size: 12px;\n  padding: 10px 5px 120px;\n"]))),In=En.ZP.div(i||(i=(0,Cn.Z)(["\n  width: 100%;\n  display: flex;\n  margin: 5px 0 10px;\n  align-items: center;\n"]))),Sn=En.ZP.div(o||(o=(0,Cn.Z)(["\n  margin: 20px 0 0;\n"]))),_n=En.ZP.span(a||(a=(0,Cn.Z)(["\n  font-weight: 700;\n"]))),On=En.ZP.div(c||(c=(0,Cn.Z)(["\n  left: 0;\n  top: -30px;\n  width: 100%;\n  display: flex;\n  position: absolute;\n  align-items: center;\n"]))),An=En.ZP.p(s||(s=(0,Cn.Z)(["\n  font-weight: 600;\n  text-transform: uppercase;\n  color: ",";\n"])),Pn.Z.lightBlack),kn=En.ZP.select(d||(d=(0,Cn.Z)(["\n  border: none;\n  padding: 0 5px;\n  margin: 0 0 0 10px;\n  text-align: center;\n  background-color: transparent;\n  color: ",";\n  border-bottom: 1px solid ",";\n  &:focus {\n    outline: none;\n  }\n"])),Pn.Z.luckyGrey,Pn.Z.luckyGrey),Nn=En.ZP.select(u||(u=(0,Cn.Z)(["\n  top: -2px;\n  left: 90px;\n  border: none;\n  text-align: center;\n  position: absolute;\n  padding: 0 3px 0 0;\n  margin: 2px 5px 0 0;\n  background-color: transparent;\n  color: ",";\n  border-bottom: 1px solid ",";\n  &:focus {\n    outline: none;\n  }\n"])),Pn.Z.luckyGrey,Pn.Z.secondary),Dn=En.ZP.select(l||(l=(0,Cn.Z)(["\n  width: 100%;\n  border: none;\n  margin: 10px 0 0;\n  background-color: transparent;\n  color: ",";\n  border-bottom: 1px solid ",";\n  &:focus {\n    outline: none;\n  }\n"])),Pn.Z.luckyGrey,Pn.Z.secondary),Mn=En.ZP.div(p||(p=(0,Cn.Z)(["\n  display: flex;\n  margin: 10px 0;\n  justify-content: space-between;\n"]))),Rn=En.ZP.div(x||(x=(0,Cn.Z)(["\n  display: flex;\n  margin: 10px 0;\n  align-items: center;\n  justify-content: space-between;\n"]))),Vn=En.ZP.div(h||(h=(0,Cn.Z)(["\n  width: 70px;\n"]))),Fn=(En.ZP.input(f||(f=(0,Cn.Z)(["\n  width: 60%;\n"]))),En.ZP.input(g||(g=(0,Cn.Z)(["\n  width: 30px;\n  border: none;\n  margin: 0 5px;\n  text-align: right;\n  padding: 0 0 0 5px;\n  border-bottom: 1px solid ",";\n  &:focus-visible {\n    outline: none;\n  }\n"])),Pn.Z.secondary)),qn=En.ZP.div(m||(m=(0,Cn.Z)(["\n  position: relative;\n"]))),Un=En.ZP.div(Z||(Z=(0,Cn.Z)(["\n  right: -5px;\n  bottom: 0px;\n  position: absolute;\n"]))),Kn=En.ZP.input(v||(v=(0,Cn.Z)(["\n  width: 50px;\n  border: none;\n  text-align: right;\n  padding: 0 0 0 5px;\n  border-bottom: 1px solid ",";\n  &:focus-visible {\n    outline: none;\n  }\n"])),Pn.Z.secondary),Hn=En.ZP.div(b||(b=(0,Cn.Z)(["\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  display: flex;\n  position: fixed;\n  padding: 10px;\n  align-items: center;\n  justify-content: space-around;\n  background-color: ",";\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n"])),Pn.Z.rgbaBlack),Yn=En.ZP.textarea(j||(j=(0,Cn.Z)(["\n  border: none;\n  width: 100%;\n  height: 25px;\n  font-style: italic;\n  &:focus {\n    outline: none;\n  }\n"]))),Gn=t(2153),zn=t(7123),Ln=t(3454),Bn=t(3070),Xn=t(6417),Wn=Bn.rh.QUANTITY_ACHIEVE_TYPE,Qn=Bn.rh.WEIGHT_ACHIEVE_TYPE,Jn=Bn.rh.MONEY_ACHIEVE_TYPE,$n=Bn.ad.GIFT_TYPE,ne=Bn.ad.MONEY_TYPE,ee=Bn.ad.PRODUCT_TYPE,te=Bn.fH.MONEY_FIXED_VALUE,re=Bn.fH.MONEY_PERCENT_OF_ORDER_VALUE,ie=Bn.fH.MONEY_PERCENT_OF_DIFFERENCE_ORDER_VALUE,oe=Bn.fH.MONEY_ORDER_QUANTITY,ae=Bn.fH.MONEY_DIFFERENCE_ORDER_QUANTITY,ce=Bn.fH.MONEY_ORDER_WEIGHT,se=Bn.fH.MONEY_DIFFERENCE_ORDER_WEIGHT,de="buy_products",ue="other",le="buy_any_product",pe="buy_simultaneously_products",xe=[{value:Wn,label:"T\u1ed5ng s\u1ed1 l\u01b0\u1ee3ng t\u1ed1i thi\u1ec3u \u0111\u1ea1t"},{value:Qn,label:"T\u1ed5ng kh\u1ed1i l\u01b0\u1ee3ng t\u1ed1i thi\u1ec3u \u0111\u1ea1t"},{value:Jn,label:"T\u1ed5ng ti\u1ec1n t\u1ed1i thi\u1ec3u \u0111\u1ea1t"}],he=function(n){var e=n.buyProductConditions,t=n.confirmAddNewCondition,r=n.isSelectedBuyAnyProduct,i=n.setIsAddingProductCondition,o=(0,pn.cI)({defaultValues:{}}),a=o.register,c=o.setValue,s=(o.clearErrors,o.handleSubmit),d=o.formState.errors,u=(0,L.useState)([]),l=(0,Y.Z)(u,2),p=l[0],x=l[1],h=function(n){var e=n&&n.node||{},t=e.code,r=e.name,i=e.netUnitValue,o=e.unitString;return"".concat(t," - ").concat((0,jn.Z)(r)," (").concat(i).concat(o,")")};return(0,L.useEffect)((function(){x([])}),[r]),(0,Xn.jsxs)(Xn.Fragment,{children:[p.map((function(n,e){return(0,Xn.jsxs)(Mn,{children:[(0,Xn.jsx)(In,{children:(0,Xn.jsxs)("p",{children:[e+1,". ",h(n)]})}),(0,Xn.jsx)(dn.Z,{label:"Xo\xe1",margin:"0 0 0 10px",onClick:function(){return function(n){var e=p.filter((function(e){return e.node.code!==n.node.code}));x(e)}(n)}})]},e)})),(0,Xn.jsx)(In,{children:(0,Xn.jsx)(vn.Z,{isSelectOne:!0,selectedList:p,onClickSelectResultItem:function(n){if(-1===p.findIndex((function(e){return e.node.code===n.node.code}))){var e=r?0:1,t={node:(0,ln.Z)((0,ln.Z)({},n.node),{},{minRequireValue:e})};x([].concat((0,un.Z)(p),[t]))}},searchPlaceholder:"B\u1ea5m ch\u1ecdn s\u1ea3n ph\u1ea9m"})}),(0,Xn.jsxs)(In,{style:{alignItems:"flex-end"},children:[(0,Xn.jsx)(fn.Z,{register:a,setFieldValue:c,name:"productConditionType",options:xe,isError:!!d.productConditionType,validations:{required:!0}}),(0,Xn.jsx)(hn.Z,{type:"number",width:"120px",textAlign:"right",lineHeight:"19px",register:a,name:"minTotalRequireValue",validations:{required:!0,min:1},isError:!!d.minTotalRequireValue,errorMessage:"*B\u1eaft bu\u1ed9c \u2265 1"})]}),(0,Xn.jsxs)(In,{children:[(0,Xn.jsx)(sn.Z,{label:"X\xe1c nh\u1eadn",onClick:s((function(n){if(p.length){var e=(new Date).toISOString(),r=n.productConditionType,i=n.minTotalRequireValue;t({products:p,productConditionType:r,minTotalRequireValue:i,code:e})}}))}),!!e.length&&(0,Xn.jsx)(dn.Z,{label:"Hu\u1ef7",onClick:function(){return i(!1)}})]})]})},fe=function(n){var e=n.condition,t=n.removeCondition,r=e.code,i=e.products,o=e.productConditionType,a=e.minTotalRequireValue,c=function(){var n=i[0].node.unitString;switch(o){case Jn:return{unitString:"\u0111",label:"ti\u1ec1n mua"};case Wn:return{unitString:"s\u1ea3n ph\u1ea9m",label:"s\u1ed1 l\u01b0\u1ee3ng"};case Qn:return{unitString:n,label:"kh\u1ed1i l\u01b0\u1ee3ng"};default:return""}}(),s=i.every((function(n){return 0===n.node.minRequireValue})),d=function(n,e){var t=n.node,r=t.minRequireValue,i=t.code,o=t.name,a=t.netUnitValue,c=t.unitString,s=(t.productInfo||{}).name;return r?(0,Xn.jsxs)("p",{children:[e+1,". ",i," - ",(0,jn.Z)(o||s)," (",a,c,")"]}):null},u=function(n,e){var t=n.node,r=t.code,i=t.name,o=t.netUnitValue,a=t.unitString;return(0,Xn.jsxs)(In,{children:[e+1,". ",r," - ",(0,jn.Z)(i)," (",o,a,")"]})},l=s?(0,Xn.jsx)(Sn,{children:i.map((function(n,e){return(0,Xn.jsx)(L.Fragment,{children:u(n,e)},e)}))}):(0,Xn.jsx)(Sn,{children:i.map((function(n,e){return(0,Xn.jsx)(Rn,{children:d(n,e)},e)}))});return(0,Xn.jsxs)(qn,{children:[l,(0,Xn.jsxs)("p",{children:["T\u1ed5ng ",c.label," \u0111\u1ea1t t\u1ed1i thi\u1ec3u:"," ",(0,Xn.jsx)(_n,{children:Number(a).toLocaleString()})," ",c.unitString]}),(0,Xn.jsx)("hr",{}),(0,Xn.jsx)(Un,{children:(0,Xn.jsx)(dn.Z,{label:"Xo\xe1",onClick:function(){return t(r)}})})]})},ge=function(n){var e=n.promotionProducts,t=n.confirmAddPromotionProduct,r=n.setIsAddingPromotionProduct,i=(0,pn.cI)({defaultValues:{}}),o=(i.register,i.setValue,i.clearErrors,i.handleSubmit),a=(i.formState.errors,(0,L.useState)([])),c=(0,Y.Z)(a,2),s=c[0],d=c[1],u=function(n){var e=n&&n.node||{},t=e.code,r=e.name,i=e.netUnitValue,o=e.unitString;return"".concat(t," - ").concat(r[0].showText," (").concat(i).concat(o,")")};return(0,Xn.jsxs)(Xn.Fragment,{children:[s.map((function(n,e){var t;return(0,Xn.jsxs)(Mn,{children:[(0,Xn.jsx)(In,{children:(0,Xn.jsxs)("p",{children:[e+1,". T\u1eb7ng",(0,Xn.jsx)(Fn,{min:0,type:"number",name:n&&(null===(t=n.node)||void 0===t?void 0:t.code),value:s[e].node.quantity,onChange:function(n){return function(n,e){var t=Number(n.target.value);t>=1?(s[e].node.quantity=t,d((0,un.Z)(s))):(s[e].node.quantity=1,d((0,un.Z)(s)))}(n,e)}}),u(n)]})}),(0,Xn.jsx)(dn.Z,{label:"Xo\xe1",margin:"0 0 0 10px",onClick:function(){return function(n){var e=s.filter((function(e){return e.node.code!==n.node.code}));d(e)}(n)}})]},e)})),(0,Xn.jsx)(In,{children:(0,Xn.jsx)(vn.Z,{isSelectOne:!0,selectedList:[].concat((0,un.Z)(e),(0,un.Z)(s)),onClickSelectResultItem:function(n){if(-1===s.findIndex((function(e){return e.node.code===n.node.code}))){var e={node:(0,ln.Z)((0,ln.Z)({},n.node),{},{quantity:1})};d([].concat((0,un.Z)(s),[e]))}},searchPlaceholder:"B\u1ea5m ch\u1ecdn s\u1ea3n ph\u1ea9m"})}),(0,Xn.jsxs)(In,{children:[(0,Xn.jsx)(sn.Z,{label:"X\xe1c nh\u1eadn",onClick:o((function(n){if(s.length){var e=s.filter((function(n){return n.node.quantity>0}));t(e)}}))}),!!e.length&&(0,Xn.jsx)(dn.Z,{label:"Hu\u1ef7",onClick:function(){return r(!1)}})]})]})},me=function(n){var e,t,r,i=n.register,o=n.errors,a=n.setValue,c=n.initDetail,s=n.clearErrors,d=n.conditionType,u=n.minAchieveTypes,l=n.setIsNewPromotionProducts,p=c||{},x=p.value,h=p.giftDescription,f=p.moneyMethodCode,g=p.paymentTypeCode,m=p.products,Z=function(){switch(d){case ue:return[{value:ne,label:"Ti\u1ec1n"},{value:$n,label:"Hi\u1ec7n v\u1eadt"}];case de:return[{value:ne,label:"Ti\u1ec1n"},{value:ee,label:"S\u1ea3n ph\u1ea9m"}];default:return[{value:ne,label:"Ti\u1ec1n"},{value:$n,label:"Hi\u1ec7n v\u1eadt"},{value:ee,label:"S\u1ea3n ph\u1ea9m"}]}}(),v=function(){var n=[te];return u.includes(Wn)&&(n=[].concat((0,un.Z)(n),[oe,ae])),u.includes(Qn)&&(n=[].concat((0,un.Z)(n),[ce,se])),u.includes(Jn)&&(n=[].concat((0,un.Z)(n),[re,ie])),n}(),b=m.map((function(n){return{node:n}})),j=(0,L.useRef)(null),y=(0,L.useState)([]),T=(0,Y.Z)(y,2),C=T[0],E=T[1],P=(0,L.useState)(!1),w=(0,Y.Z)(P,2),I=w[0],S=w[1],_=(0,L.useState)(g||Z[0].value),O=(0,Y.Z)(_,2),A=O[0],k=O[1],N=C.length>0,D=I||!N,M=v.find((function(n){return n.value===f}))||{value:"",label:""},R=(0,L.useState)(M),V=(0,Y.Z)(R,2),F=V[0],q=V[1],U=(0,L.useState)(x||0),K=(0,Y.Z)(U,2),H=K[0],G=K[1],z=v.length>1,B=A===ne,X=F&&F.label.slice(10),W=(0,Xn.jsxs)(Xn.Fragment,{children:[(0,Xn.jsxs)(In,{children:[(0,Xn.jsx)(Vn,{children:"M\xf4 t\u1ea3"}),":",(0,Xn.jsx)(hn.Z,{placeholder:"T\xean hi\u1ec7n v\u1eadt",name:"detail.giftDescription",register:i,isError:!(null===(e=o.detail)||void 0===e||!e.giftDescription),validations:{required:!0}})]}),(0,Xn.jsxs)(In,{children:[(0,Xn.jsx)(Vn,{children:"Tr\u1ecb gi\xe1 (\u0111)"}),":",(0,Xn.jsx)(hn.Z,{type:"number",placeholder:"Tr\u1ecb gi\xe1",name:"detail.giftValue",register:i,isError:!(null===(t=o.detail)||void 0===t||!t.giftValue),validations:{required:!0}})]})]}),Q=(0,Xn.jsx)(Xn.Fragment,{children:z&&(0,Xn.jsxs)(Xn.Fragment,{children:[(0,Xn.jsxs)(Dn,{value:F.value,onChange:function(n){var e=n.target.value,t=v.find((function(n){return n.value===e}));q(t),a("detail.moneyMethodCode",e),s("detail.moneyMethodCode"),j.current.focus()},children:[(0,Xn.jsx)("option",{value:"",disabled:!0,children:"Ch\u1ecdn ph\u01b0\u01a1ng th\u1ee9c t\xednh"}),v.map((function(n,e){return(0,Xn.jsx)("option",{value:n.value,children:n.label},e)}))]}),(0,Xn.jsx)(Tn.Z,{isError:!(null===(r=o.detail)||void 0===r||!r.moneyMethodCode)})]})}),J=function(n,e){var t=n.node||{},r=t.code,i=t.name,o=t.netUnitValue,a=t.unitString,c=t.quantity;return(0,Xn.jsxs)("p",{children:[e+1,". T\u1eb7ng ",c," SP ",r," - ",(0,jn.Z)(i)," (",o,a,")"]})},$=(0,Xn.jsxs)(Xn.Fragment,{children:[N&&(0,Xn.jsxs)(Xn.Fragment,{children:[(0,Xn.jsx)(Rn,{children:(0,Xn.jsx)("p",{children:"Danh s\xe1ch s\u1ea3n ph\u1ea9m \u0111\u01b0\u1ee3c t\u1eb7ng:"})}),C.map((function(n,e){return(0,Xn.jsxs)(Rn,{children:[J(n,e),(0,Xn.jsx)(dn.Z,{label:"Xo\xe1",onClick:function(){return function(n){var e=C.filter((function(e){return e.node.code!==n.node.code}));l(!0),E(e)}(n)}})]},e)})),!I&&(0,Xn.jsx)(xn.Z,{label:"+ Th\xeam s\u1ea3n ph\u1ea9m",onClick:function(){return S(!0)}})]}),D&&(0,Xn.jsx)(Xn.Fragment,{children:(0,Xn.jsx)(ge,{promotionProducts:C,setPromotionProducts:E,confirmAddPromotionProduct:function(n){var e=(0,un.Z)(C);n.forEach((function(n){var t=n.node,r=t.code,i=t.quantity,o=e.findIndex((function(n){return n.node.code===r}));-1===o?e=[].concat((0,un.Z)(e),[n]):o>=0&&(e=e.map((function(n,e){if(e===o){var t=n.node.quantity;return n.node.quantity=t+i,n}return n})))})),l(!0),S(!1),E(e),a("detail.products",e)},setIsAddingPromotionProduct:S})})]}),nn=function(){switch(A){case $n:return W;case ne:return Q;case ee:return $;default:return null}}();return(0,L.useEffect)((function(){E(b||[]),a("detail.products",b||[]),a("detail.giftValue",h&&x||void 0),a("detail.giftDescription",h||void 0),a("detail.moneyMethodValue",x||0),k(g||Z[0].value),a("detail.paymentTypeCode",g||Z[0].value)}),[d]),(0,Xn.jsxs)(Xn.Fragment,{children:[(0,Xn.jsx)(Nn,{value:A,onChange:function(n){var e=n.target.value;k(e),G(0),E([]),a("detail.paymentTypeCode",e),a("detail.products",[]),a("detail.moneyMethodValue",0),a("detail.giftValue",void 0),a("detail.giftDescription",void 0),e===ne?(q({value:"",label:""}),a("detail.moneyMethodCode",void 0)):a("detail.moneyMethodCode",void 0)},children:Z.map((function(n,e){return(0,Xn.jsx)("option",{value:n.value,children:n.label},e)}))}),nn,(0,Xn.jsx)(In,{style:{display:"flex-end"},children:B&&(0,Xn.jsxs)("p",{children:["Ti\u1ec1n ="," ",(0,Xn.jsx)(Kn,{min:0,type:"number",value:H,ref:j,onChange:function(n){var e=n.target.value;Number(e)>=0&&(G(Number(e)),a("detail.moneyMethodValue",Number(e)))}})," ",X]})})]})},Ze=function(n){var e=n.discountPromotionItem,t=e._id,r=e.typeCode,i=e.title,o=e.payWhenCreateOrder,a=e.isApplyForAll,c=e.startTime,s=e.endTime,d=e.conditions,u=e.isBuyAnyProductOfConditions,l=e.detail,p=e.beAppliedAccountIds,x=e.beAppliedCustomers,h=e.note,f=e.otherConditionDescription,g=(0,yn.hz)({isoString:c}),m=(0,yn.hz)({isoString:s}),Z=d.map((function(n){var e=n.products.map((function(n){return{node:n}}));return(0,ln.Z)((0,ln.Z)({},n),{},{products:e})})),v=x&&x.map((function(n){return{node:n}})),b=l.giftDescription,j=l.moneyMethodCode,y=l.paymentTypeCode,T=(l.products,l.value),C=(0,pn.cI)({defaultValues:{title:(0,jn.Z)(i),startTime:g,endTime:m,detail:{giftDescription:b,moneyMethodCode:j,giftValue:T},note:(0,jn.Z)(h),beAppliedAccounts:p,otherConditionDescription:f}}),E=C.watch,P=C.register,w=C.setValue,I=C.clearErrors,S=C.handleSubmit,_=C.formState.errors,O=(0,X.I0)(),A=window.innerWidth<=768?"\u0110I\u1ec0U KI\u1ec6N:":"\u0110I\u1ec0U KI\u1ec6N C\u1ea6N \u0110\u1ea0T:",k=(0,B.D)(Ln.GG,{refetchQueries:[{query:zn.Kr},"GET_DISCOUNT_PROMOTIONS"]}),N=(0,Y.Z)(k,1)[0],D=(0,B.D)(Ln.CS),M=(0,Y.Z)(D,1)[0],R=(0,B.D)(Ln.sY,{refetchQueries:[{query:zn.Kr},"GET_DISCOUNT_PROMOTIONS"]}),V=(0,Y.Z)(R,1)[0],F=(0,B.D)(Ln.Am,{refetchQueries:[{query:zn.Kr},"GET_DISCOUNT_PROMOTIONS"]}),q=(0,Y.Z)(F,1)[0],U=(0,B.D)(Ln.BQ,{refetchQueries:[{query:zn.Kr},"GET_DISCOUNT_PROMOTIONS"]}),K=(0,Y.Z)(U,1)[0],H=(0,L.useState)(a),W=(0,Y.Z)(H,2),Q=W[0],J=W[1],$=(0,L.useState)(v||[]),nn=(0,Y.Z)($,2),en=nn[0],tn=nn[1],rn=(0,L.useState)(o),on=(0,Y.Z)(rn,2),an=on[0],cn=on[1],sn=(0,L.useState)(Z),fn=(0,Y.Z)(sn,2),vn=fn[0],Tn=fn[1],Cn=(0,L.useState)(!1),En=(0,Y.Z)(Cn,2),Pn=En[0],Sn=En[1],_n=(0,L.useState)(!1),Nn=(0,Y.Z)(_n,2),Dn=Nn[0],Mn=Nn[1],Fn=r===ue?ue:u?le:pe,qn=(0,L.useState)(Fn),Un=(0,Y.Z)(qn,2),Kn=Un[0],Wn=Un[1],Qn=(0,L.useState)(r),Jn=(0,Y.Z)(Qn,2),$n=Jn[0],ee=Jn[1],re=(0,L.useState)(!1),ie=(0,Y.Z)(re,2),oe=ie[0],ae=ie[1];P("beAppliedAccounts",{required:!Q});var ce=vn.map((function(n){return n.productConditionType})),se=Kn===le,xe=vn.length>0,ge=$n===de;P("detail.moneyMethodCode",{required:E("detail.paymentTypeCode")===ne});var Ze=(oe||!xe)&&ge,ve=function(n){Sn(!0);var e=vn.filter((function(e){return e.code!==n}));Tn(e)},be=function(){var n=(0,z.Z)((0,G.Z)().mark((function n(e){var o,d,u,l,x,g,m,Z,v,C,E,P,w,I,S,_,A,k,D,R,F,U,H,Y,z,L,B,X,W,J,$,nn,tn;return(0,G.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=e.title,d=e.note,u=e.detail,l=e.endTime,x=e.startTime,g=e.otherConditionDescription,m=u.giftDescription,Z=u.giftValue,v=u.moneyMethodCode,C=u.moneyMethodValue,E=u.paymentTypeCode,P=u.products,w=void 0===P?[]:P,I=Kn===le,S=Number(Z)||Number(C)||0,_=vn.map((function(n){var e=n.products,t=n.minTotalRequireValue;return{productConditionType:n.productConditionType,products:e.map((function(n){var e=n.node;return{code:e.code,netUnitValue:e.netUnitValue,unitString:e.unitString,minRequireValue:e.minRequireValue}})),minTotalRequireValue:Number(t)}})),A=en.map((function(n){return n.node._id})),k=w.map((function(n){var e=n.node;return{code:e.code,price:e.price,netUnitValue:e.netUnitValue,unitString:e.unitString,quantity:e.quantity}})),D=v||($n===ue?E===ne?te.value:v:void 0),R={discountPromotionId:t},F=m&&m!==b,U=S!==T,H=(0,ln.Z)((0,ln.Z)((0,ln.Z)({},o!==(0,jn.Z)(i)&&{title:[{showText:o,locale:"vi"}]}),d!==(0,jn.Z)(h)&&{note:[{showText:d,locale:"vi"}]}),!ge&&(0,ln.Z)((0,ln.Z)({},g!==f&&{otherConditionDescription:g}),(F||U)&&{detail:(0,ln.Z)((0,ln.Z)({},F&&{giftDescription:m}),U&&{value:S})})),!!!Object.keys(H).length){n.next=19;break}return n.next=16,N({variables:{data:H,where:R}});case 16:if(n.sent.data){n.next=19;break}return n.abrupt("return",alert("Update title wrong!"));case 19:if(Y=function(){var n=[];return p.forEach((function(e){A.includes(e)||(n=[].concat((0,un.Z)(n),[e]))})),n}(),z=function(){var n=[];return A.forEach((function(e){p.includes(e)||(n=[].concat((0,un.Z)(n),[e]))})),n}(),a||!Y.length&&!z.length){n.next=28;break}return L=(0,ln.Z)((0,ln.Z)({},!!Y.length&&{beRemovedAccountIds:Y}),!!z.length&&{beAddedAccountIds:z}),n.next=25,M({variables:{data:L,where:R}});case 25:if(n.sent.data){n.next=28;break}return n.abrupt("return",alert("Update be applied accounts wrong!"));case 28:if(!(Q!==a)){n.next=38;break}return B={},a&&!Q&&(B={isApplyForAll:Q,beAppliedAccountIds:A}),!a&&Q&&(B={isApplyForAll:Q}),n.next=35,M({variables:{data:B,where:R}});case 35:if(n.sent.data){n.next=38;break}return n.abrupt("return",alert("Update be applied accounts wrong!"));case 38:if(!(new Date(x).toISOString()!==new Date(c).toISOString())){n.next=46;break}return X={newStartTime:new Date(x).toISOString()},n.next=43,V({variables:{data:X,where:R}});case 43:if(n.sent.data){n.next=46;break}return n.abrupt("return",alert("Update startTime wrong!"));case 46:if(!(new Date(l).toISOString()!==new Date(s).toISOString())){n.next=54;break}return W={newEndTime:new Date(l).toISOString()},n.next=51,q({variables:{data:W,where:R}});case 51:if(n.sent.data){n.next=54;break}return n.abrupt("return",alert("Update endTime wrong!"));case 54:if(J=E!==y,$=D!==j,nn=ge&&S!==T,!($n!==r||Pn||J||Dn||$||nn)){n.next=66;break}return tn={reCalculateData:{typeCode:$n,conditions:_,detail:{moneyMethodCode:D,products:k,value:S,giftDescription:m,paymentTypeCode:E},isBuyAnyProductOfConditions:I}},n.next=63,K({variables:{data:tn,where:R}});case 63:if(n.sent.data){n.next=66;break}return n.abrupt("return",alert("Update wrong!"));case 66:O((0,Gn.Ay)());case 67:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),je=(0,Xn.jsxs)(Xn.Fragment,{children:[!!en.length&&en.map((function(n,e){return(0,Xn.jsxs)(Rn,{children:[(0,Xn.jsxs)("p",{children:[e+1,". ",n.node.fullName]}),(0,Xn.jsx)(dn.Z,{label:"Xo\xe1",onClick:function(){return function(n){var e=en.filter((function(e){return e.node._id!==n.node._id}));tn(e),w("beAppliedAccounts",e)}(n)}})]},e)})),(0,Xn.jsx)(bn.Z,{selectedList:en,roles:[Bn.If.CUSTOMER],isError:!!_.beAppliedAccounts,onClickSelectResultItem:function(n){if(-1===en.findIndex((function(e){return e.node._id===n.node._id}))){var e=[].concat((0,un.Z)(en),[n]);tn(e),w("beAppliedAccounts",e),I("beAppliedAccounts")}},searchPlaceholder:"T\xecm ki\u1ebfm kh\xe1ch h\xe0ng"})]}),ye=xe?(0,Xn.jsxs)(Xn.Fragment,{children:[vn.map((function(n,e){return(0,Xn.jsx)(fe,{condition:n,removeCondition:ve},e)})),!oe&&(0,Xn.jsx)(xn.Z,{label:"+ Th\xeam \u0111i\u1ec1u ki\u1ec7n",onClick:function(){return ae(!0)}})]}):null,Te=(0,Xn.jsxs)(In,{children:[(0,Xn.jsx)(Vn,{children:"N\u1ed9i dung"}),":",(0,Xn.jsx)(hn.Z,{name:"otherConditionDescription",register:P,isError:!!_.otherConditionDescription,validations:{required:!0}})]}),Ce=ge?ye:Te;return(0,Xn.jsxs)(wn,{children:[(0,Xn.jsxs)(gn.Z,{children:[(0,Xn.jsxs)(In,{children:[(0,Xn.jsx)(Vn,{style:{width:80},children:"T\xean CKKM:"}),(0,Xn.jsx)(hn.Z,{name:"title",register:P,isError:!!_.title,validations:{required:!0}})]}),(0,Xn.jsxs)(In,{children:[(0,Xn.jsx)("input",{disabled:!0,type:"checkbox",checked:an,onChange:function(){return cn(!an)}}),(0,Xn.jsx)("span",{children:"\u2002Tr\u1ea3 CKKM ngay khi \u0111\u1eb7t h\xe0ng"})]}),(0,Xn.jsxs)(Rn,{children:[(0,Xn.jsx)(Vn,{children:"Kh\xe1ch h\xe0ng:"}),(0,Xn.jsxs)(In,{style:{width:"fit-content"},children:[(0,Xn.jsx)("input",{type:"checkbox",checked:Q,onChange:function(n){return function(n){var e=n.target.checked;J(e),e&&tn([])}(n)}}),(0,Xn.jsx)("span",{children:"\u2002\xc1p d\u1ee5ng cho t\u1ea5t c\u1ea3 KH"})]})]}),!Q&&je,(0,Xn.jsxs)(In,{children:[(0,Xn.jsx)("p",{children:"Th\u1eddi gian:"}),(0,Xn.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,Xn.jsx)(hn.Z,{type:"date",name:"startTime",register:P,isError:!!_.startTime,validations:{required:!0}}),(0,Xn.jsx)("p",{children:"\u2002- "}),(0,Xn.jsx)(hn.Z,{type:"date",name:"endTime",register:P,isError:!!_.endTime,validations:{required:!0}})]})]})]}),(0,Xn.jsxs)(gn.Z,{style:{marginTop:60},children:[(0,Xn.jsxs)(On,{children:[(0,Xn.jsx)(An,{children:A}),(0,Xn.jsxs)(kn,{value:Kn,onChange:function(n){var e=n.target.value,t=e===pe||e===le?de:e;Tn([]),Wn(e),ee(t),ae(!1),w("otherConditionDescription",void 0)},children:[(0,Xn.jsx)("option",{value:pe,children:"- Khi mua \u0110\u1ed3ng th\u1eddi S\u1ea3n ph\u1ea9m"}),(0,Xn.jsx)("option",{value:le,children:"- Khi mua B\u1ea5t k\u1ef3 S\u1ea3n ph\u1ea9m"}),(0,Xn.jsx)("option",{value:ue,children:"- Kh\xe1c"})]})]}),Ce,Ze&&(0,Xn.jsx)(he,{buyProductConditions:vn,confirmAddNewCondition:function(n){Sn(!0);var e=[].concat((0,un.Z)(vn),[n]);ae(!1),Tn(e)},isSelectedBuyAnyProduct:se,setBuyProductConditions:Tn,setIsAddingProductCondition:ae})]}),(0,Xn.jsx)(gn.Z,{title:"T\u1eb6NG/CKKM:",children:(0,Xn.jsx)(me,{errors:_,register:P,setValue:w,initDetail:l,clearErrors:I,conditionType:$n,minAchieveTypes:ce,setIsNewPromotionProducts:Mn})}),(0,Xn.jsx)(gn.Z,{title:"GHI CH\xda",style:{padding:0},children:(0,Xn.jsx)(Yn,(0,ln.Z)((0,ln.Z)({},P("note")),{},{placeholder:"N\u1ed9i dung ghi ch\xfa (n\u1ebfu c\xf3)..."}))}),(0,Xn.jsxs)(Hn,{children:[(0,Xn.jsx)(Zn.Z,{label:"HU\u1ef6",onClick:function(){return O((0,Gn.Ay)())}}),(0,Xn.jsx)(mn.Z,{label:"X\xc1C NH\u1eacN",onClick:S(be)})]})]})},ve=(En.ZP.div(y||(y=(0,Cn.Z)(["\n  padding: 0;\n  font-size: 12px;\n"]))),En.ZP.div(T||(T=(0,Cn.Z)(["\n  margin: 20px 0;\n  background-color: #fff;\n  padding: 15px 10px 10px;\n  box-shadow: 0px 2px 1px -1px rgb(0 0 0 / 20%),\n    0px 1px 1px 0px rgb(0 0 0 / 14%), 0px 1px 3px 0px rgb(0 0 0 / 12%);\n"]))),En.ZP.div(C||(C=(0,Cn.Z)([""]))),En.ZP.div(E||(E=(0,Cn.Z)(["\n  display: flex;\n  margin: 15px auto;\n  width: fit-content;\n  justify-content: center;\n  border: solid 1px ",";\n"])),Pn.Z.primary),En.ZP.div(P||(P=(0,Cn.Z)(["\n  padding: 5px 10px;\n  cursor: pointer;\n  text-align: center;\n  color: ",";\n  border-left: 1px solid ",";\n  background-color: ",";\n"])),(function(n){return n.activeColor.textColor}),(function(n){return n.borderLeftColor}),(function(n){return n.activeColor.backgroundColor})),En.ZP.div(w||(w=(0,Cn.Z)(["\n  position: relative;\n  border-radius: 4px;\n  background-color: #fff;\n  padding: 15px 10px 10px;\n  margin: ",";\n  cursor: ",";\n  box-shadow: 0px 2px 1px -1px rgb(0 0 0 / 20%),\n    0px 1px 1px 0px rgb(0 0 0 / 14%), 0px 1px 3px 0px rgb(0 0 0 / 12%);\n"])),(function(n){return n.customerMargin}),(function(n){return n.canApproveDiscountPromotion?"pointer":"auto"}))),be=En.ZP.div(I||(I=(0,Cn.Z)([""]))),je=(En.ZP.div(S||(S=(0,Cn.Z)(["\n  display: flex;\n  margin: 10px 0 5px;\n  align-items: center;\n  justify-content: space-between;\n"]))),En.ZP.div(_||(_=(0,Cn.Z)(["\n  margin: 5px 0 15px;\n"])))),ye=En.ZP.div(O||(O=(0,Cn.Z)(["\n  margin: 0 0 15px;\n"]))),Te=En.ZP.p(A||(A=(0,Cn.Z)(["\n  font-weight: 700;\n  color: ",";\n"])),Pn.Z.primary),Ce=En.ZP.p(k||(k=(0,Cn.Z)(["\n  font-weight: 700;\n"]))),Ee=En.ZP.span(N||(N=(0,Cn.Z)(["\n  font-weight: 500;\n"]))),Pe=En.ZP.span(D||(D=(0,Cn.Z)(["\n  font-weight: 700;\n"]))),we=En.ZP.span(M||(M=(0,Cn.Z)(["\n  font-weight: 500;\n  font-style: italic;\n  color: ",";\n"])),Pn.Z.black),Ie=En.ZP.span(R||(R=(0,Cn.Z)(["\n  font-size: 12px;\n  font-style: italic;\n  color: ",";\n"])),Pn.Z.secondary),Se=En.ZP.p(V||(V=(0,Cn.Z)(["\n  margin: 5px 0 0;\n  font-size: 12px;\n  width: fit-content;\n  font-style: italic;\n  color: ",";\n"])),Pn.Z.primary),_e=En.ZP.div(F||(F=(0,Cn.Z)(["\n  display: flex;\n  algin-items: center;\n  justify-content: space-between;\n"]))),Oe=(En.ZP.div(q||(q=(0,Cn.Z)(["\n  bottom: 5px;\n  position: absolute;\n  right: ",";\n"])),(function(n){return n.right})),En.ZP.div(U||(U=(0,Cn.Z)(["\n  top: 0;\n  right: 10px;\n  color: #777;\n  font-size: 20px;\n  cursor: pointer;\n  width: fit-content;\n  position: absolute;\n"])))),Ae=En.ZP.div(K||(K=(0,Cn.Z)(["\n  top: 20px;\n  right: 10px;\n  padding: 5px 10px 0;\n  position: absolute;\n  border-radius: 5px;\n  background-color: #fff;\n  display: ",";\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n"])),(function(n){return n.display})),ke=En.ZP.div(H||(H=(0,Cn.Z)(["\n  display: flex;\n  padding: 3px 7px;\n  margin: 10px 0 15px;\n  color: ",";\n  margin: ",";\n  & p {\n    margin: 0 5px;\n  }\n  &:hover {\n    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n  }\n"])),(function(n){return n.color}),(function(n){return n.margin})),Ne=t(7119),De=Bn.fH.MONEY_FIXED_VALUE,Me=Bn.fH.MONEY_PERCENT_OF_ORDER_VALUE,Re=Bn.fH.MONEY_PERCENT_OF_DIFFERENCE_ORDER_VALUE,Ve=Bn.fH.MONEY_ORDER_QUANTITY,Fe=Bn.fH.MONEY_DIFFERENCE_ORDER_QUANTITY,qe=Bn.fH.MONEY_ORDER_WEIGHT,Ue=Bn.fH.MONEY_DIFFERENCE_ORDER_WEIGHT,Ke=(0,L.lazy)((function(){return t.e(7471).then(t.bind(t,7471))})),He=function(n){var e=n.message,t=n.updateFunction,r=(0,X.I0)(),i=function(){var n=(0,z.Z)((0,G.Z)().mark((function n(){return(0,G.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t();case 2:n.sent.data&&r((0,Gn._w)());case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,Xn.jsxs)(Xn.Fragment,{children:[(0,Xn.jsx)("p",{style:{margin:10},children:e}),(0,Xn.jsxs)("div",{style:{display:"flex",width:"100%",justifyContent:"center"},children:[(0,Xn.jsx)(dn.Z,{label:"\u0110\xf3ng l\u1ea1i",onClick:function(){return r((0,Gn._w)())}}),(0,Xn.jsx)(cn.Z,{label:"X\xe1c nh\u1eadn",onClick:i})]})]})},Ye=function(n){var e,t=n.customerMargin,r=n.discountPromotionItem,i=(0,X.I0)(),o=(0,X.v9)((function(n){return n.authReducer})).viewerQuery,a=((0,X.v9)((function(n){return n.firstSubModalReducer})).visible,(o||{}).permissions),c=a.includes(Ne.gz.CAN_APPROVE_DISCOUNT_PROMOTION),s=a.includes(Ne.gz.CAN_DELETE_DISCOUNT_PROMOTION),d=(0,L.useRef)(null),u=(0,L.useState)(!1),l=(0,Y.Z)(u,2),p=l[0],x=l[1],h=p?"block":"none",f=r||{},g=f._id,m=(f.code,f.typeCode),Z=f.startTime,v=f.endTime,b=f.title,j=f.conditions,y=f.detail,T=f.isApproved,C=f.payWhenCreateOrder,E=f.isBuyAnyProductOfConditions,P=f.otherConditionDescription,w=f.createdAt,I=y.moneyMethodCode,S=y.products,_=y.value,O=y.giftDescription,A=y.paymentTypeCode,k=(0,W.Z)(v),N=(0,Q.Z)(k,new Date),D=(0,J.Z)(new Date,new Date(w))<=1,M=s&&D,R=(0,B.D)(Ln.GG,{refetchQueries:[{query:zn.Kr},"GET_DISCOUNT_PROMOTIONS",{query:zn.hM},"GET_DISCOUNT_PROMOTION_DIARIES"]}),V=(0,Y.Z)(R,1)[0],F=(0,B.D)(Ln.dF,{refetchQueries:[{query:zn.Kr},"GET_DISCOUNT_PROMOTIONS",{query:zn.hM},"GET_DISCOUNT_PROMOTION_DIARIES"]}),q=(0,Y.Z)(F,1)[0],U=m===Bn.t_.OTHER,K=E?"Khi mua B\u1ea5t k\u1ef3 S\u1ea3n ph\u1ea9m":"Khi mua \u0110\u1ed3ng th\u1eddi S\u1ea3n ph\u1ea9m",H=(0,yn.dh)(Z),cn=(0,yn.dh)(v),sn=b&&(null===(e=b[0])||void 0===e?void 0:e.showText),dn=C?"Tr\u1ea3 ngay khi \u0111\u1eb7t h\xe0ng":"Tr\u1ea3 sau",un=function(n,e){var t=1===n.length,r=(function(){switch(e){case Bn.rh.MONEY_ACHIEVE_TYPE:return"\u0111";case Bn.rh.QUANTITY_ACHIEVE_TYPE:return"sp";case Bn.rh.WEIGHT_ACHIEVE_TYPE:"".concat(n[0].netUnitValue).concat(n[0].unitString)}}(),function(n,e){var r=n.code,i=(n.minRequireValue,(n.productInfo||{}).name);t||"".concat(e+1,". ");return(0,Xn.jsxs)("p",{children:["- ",r," - ",(0,jn.Z)(i)]})});return(0,Xn.jsx)(Xn.Fragment,{children:n.map((function(n,e){return(0,Xn.jsx)(L.Fragment,{children:r(n,e)},e)}))})},ln=(0,Xn.jsxs)(Xn.Fragment,{children:[(0,Xn.jsxs)(je,{children:[(0,Xn.jsxs)(Ce,{children:["\u0110i\u1ec1u ki\u1ec7n:"," ",j&&!!j.length&&(0,Xn.jsx)(Ee,{children:K})]}),U&&P]}),j&&j.map((function(n,e){var t=n.products,r=n.productConditionType,i=n.minTotalRequireValue,o=(0,yn.RX)(r,t[0].netUnitValue,t[0].unitString);return(0,Xn.jsxs)(ye,{children:[un(t,r),(0,Xn.jsxs)("p",{children:["T\u1ed5ng ",o.type," c\u1ea7n \u0111\u1ea1t: ",i," ",o.unit]})]},e)}))]}),pn=(0,Xn.jsxs)(Xn.Fragment,{children:[(0,Xn.jsx)("hr",{})," ",function(){var n=[De,Me,Re,Ve,Fe,qe,Ue];switch(A){case Bn.ad.MONEY_TYPE:var e=n.find((function(n){return n.value===I}));return(0,Xn.jsxs)(Xn.Fragment,{children:[(0,Xn.jsx)(Pe,{children:"T\u1eb7ng/CKKM:"}),(0,Xn.jsx)("p",{children:function(n){if(n.value===De.value)return"Ti\u1ec1n m\u1eb7t ".concat(_.toLocaleString()," \u0111");var e=n.value.includes("percent_of")?"%":"\u0111";return"Ti\u1ec1n = ".concat(_.toLocaleString()).concat(e)+n.label.slice(12)}(e)})]});case Bn.ad.GIFT_TYPE:return(0,Xn.jsxs)(Xn.Fragment,{children:[(0,Xn.jsx)(Pe,{children:"T\u1eb7ng/CKKM:"}),(0,Xn.jsxs)("p",{children:[O," tr\u1ecb gi\xe1 ",_.toLocaleString()," \u0111"]})]});case Bn.ad.TAX_OFFSET:return"C\u1ea5n tr\u1eeb: ".concat(O," ").concat(_.toLocaleString()," \u0111");case Bn.ad.PRODUCT_TYPE:return function(n){var e=function(n,e){var t=n.code,r=n.quantity,i=(n.productInfo||{}).name;return(0,Xn.jsxs)("p",{children:[(0,Xn.jsx)(Ie,{children:"- T\u1eb7ng"})," ",r," sp: ",t," - ",(0,jn.Z)(i)]})};return(0,Xn.jsxs)(Xn.Fragment,{children:[(0,Xn.jsx)(Pe,{children:"T\u1eb7ng/CKKM:"}),n.map((function(n,t){return(0,Xn.jsx)(L.Fragment,{children:e(n)},t)}))]})}(S);default:return null}}()]}),xn=c&&!N,hn=!T&&c,fn=U&&N,gn=xn||hn||fn||M,mn=(0,Xn.jsxs)(Ae,{display:h,ref:d,children:[hn&&(0,Xn.jsxs)(ke,{onClick:function(){V({variables:{data:{isApproved:!0},where:{discountPromotionId:g}}})},children:[(0,Xn.jsx)(rn.Z,{fontSize:"small"}),(0,Xn.jsx)("p",{children:"Duy\u1ec7t CK/KM"})]}),xn&&(0,Xn.jsxs)(ke,{color:Pn.Z.orange,onClick:function(){var n={title:"S\u1eeda CKKM",children:(0,Xn.jsx)(Ze,{discountPromotionItem:r})};i((0,Gn.FV)(n))},children:[(0,Xn.jsx)($.Z,{fontSize:"small"}),(0,Xn.jsx)("p",{children:"S\u1eeda CK/KM"})]}),fn&&(0,Xn.jsxs)(ke,{color:Pn.Z.green,onClick:function(){var n={title:"Tr\u1ea3 CK/KM cho ch\u01b0\u01a1ng tr\xecnh d\u1ea1ng kh\xe1c",children:(0,Xn.jsx)(L.Suspense,{fallback:(0,Xn.jsx)(an.default,{}),children:(0,Xn.jsx)(on.default,{discountPromotionId:g})})};i((0,Gn.dn)(n))},children:[(0,Xn.jsx)(en.Z,{fontSize:"small"}),(0,Xn.jsx)("p",{children:"Tr\u1ea3 CK/KM"})]}),M&&(0,Xn.jsxs)(ke,{color:Pn.Z.lightRed,onClick:function(){var n={discountPromotionId:g},e={title:"X\xe1c nh\u1eadn xo\xe1",children:(0,Xn.jsx)(He,{message:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn duy\u1ec7t xo\xe1 CKKM n\xe0y?",updateFunction:(0,z.Z)((0,G.Z)().mark((function e(){var t;return(0,G.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q({variables:{where:n}});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))})};i((0,Gn.om)(e))},children:[(0,Xn.jsx)(tn.Z,{fontSize:"small"}),(0,Xn.jsx)("p",{children:"Xo\xe1 CK/KM"})]})]}),Zn=(0,Xn.jsxs)(Xn.Fragment,{children:[(0,Xn.jsx)(Oe,{onClick:function(){return x(!p)},children:(0,Xn.jsx)(nn.Z,{})}),mn]});return(0,L.useEffect)((function(){var n=function(n){d.current&&!d.current.contains(n.target)&&x(!1)};return document.addEventListener("mousedown",n),function(){document.removeEventListener("mousedown",n)}}),[d]),(0,Xn.jsxs)(ve,{customerMargin:t,canApproveDiscountPromotion:c,children:[gn&&Zn,(0,Xn.jsxs)(be,{onClick:function(){if(c){var n={title:"Chi ti\u1ebft chi\u1ebft kh\u1ea5u/khuy\u1ebfn m\u1ea1i",children:(0,Xn.jsx)(L.Suspense,{fallback:(0,Xn.jsx)(an.default,{}),children:(0,Xn.jsx)(Ke,{discountPromotionItem:r})})};i((0,Gn.FV)(n))}},children:[(0,Xn.jsxs)(_e,{children:[(0,Xn.jsxs)(Te,{children:[H," - ",cn,":"," ",(0,Xn.jsx)(we,{children:sn})]}),!T&&(0,Xn.jsx)(Ie,{children:"Ch\u1edd duy\u1ec7t"})]}),ln,pn,(0,Xn.jsx)(_e,{children:(0,Xn.jsx)(Se,{children:dn})})]})]})};Ye.defaultProps={customerMargin:"15px 5px"};var Ge=Ye},3182:function(n,e,t){t.d(e,{Z:function(){return f}});var r,i,o=t(1413),a=(t(7313),t(2180)),c=t(6947),s=t(168),d=t(3115),u=t(1237),l=d.ZP.div(r||(r=(0,s.Z)(["\n  height: 30px;\n  margin: 0 10px 0 5px;\n  width: ",";\n"])),(function(n){return n.customerWidth})),p=d.ZP.select(i||(i=(0,s.Z)(["\n  width: 100%;\n  border: none;\n  font-size: 12px;\n  font-weight: 300;\n  padding: 4px 0 0;\n  height: ",";\n  border-bottom: 1px solid ",";\n  &:hover {\n    box-shadow: none;\n  }\n  &:focus {\n    outline: none;\n    box-shadow: none;\n  }\n"])),(function(n){return n.height}),u.Z.secondary),x=t(6417),h=function(n){var e=n.label,t=n.options,r=n.name,i=n.placeholder,s=n.validations,d=n.register,u=n.isDisabled,h=n.isError,f=n.onChange,g=n.errorMessage,m=n.setFieldValue,Z=n.dependencyFieldName,v=n.customerWidth;return(0,x.jsxs)(l,{customerWidth:v,children:[e&&(0,x.jsx)(a.Z,{label:e}),(0,x.jsxs)(p,(0,o.Z)((0,o.Z)((0,o.Z)({},n),{},{disabled:u,onChange:function(n){f&&f(n),m&&(m(r,n.target.value),m(Z,void 0))}},d(r,s)),{},{children:[(0,x.jsx)("option",{value:"",disabled:!0,children:i}),t.map((function(n,e){return(0,x.jsx)("option",{value:n.value,children:n.label},e)}))]})),(0,x.jsx)(c.Z,{isError:h,errorMessage:g})]})};h.defaultProps={label:"",options:[],height:"27px",isDisabled:!1,name:"selectName",validations:{},customerWidth:"100%",register:function(){},setFieldValue:function(n){},dependencyFieldName:"",placeholder:"-- Vui l\xf2ng ch\u1ecdn --"};var f=h},9673:function(n,e,t){t.d(e,{Z:function(){return f}});var r,i,o=t(1413),a=(t(7313),t(2180)),c=t(6947),s=t(168),d=t(3115),u=t(1237),l=d.ZP.div(r||(r=(0,s.Z)(["\n  height: 26px;\n  display: inline-block;\n  width: ",";\n  margin: ",";\n"])),(function(n){return n.width?n.width:"100%"}),(function(n){return n.margin?n.margin:"0 0 0 5px"})),p=d.ZP.input(i||(i=(0,s.Z)(["\n  width: 100%;\n  border: none;\n  font-size: 12px;\n  font-weight: 300;\n  padding: ",";\n  line-height: ",";\n  background-color: ",";\n  border-bottom: 1px solid ",";\n  font-style: ",";\n  text-align: ",";\n  &:hover {\n    box-shadow: none;\n  }\n  &:focus {\n    box-shadow: none;\n  }\n  &:focus-visible {\n    outline: none;\n    box-shadow: none;\n  }\n"])),(function(n){return n.padding}),(function(n){return n.lineHeight}),u.Z.lightWhite,u.Z.secondary,(function(n){return n.fontStyle?n.fontStyle:""}),(function(n){return n.textAlign?n.textAlign:"left"})),x=t(6417),h=function(n){var e=n.label,t=n.name,r=n.isError,i=n.errorMessage,s=n.register,d=n.validations,u=n.isInline,h=n.width,f=n.margin,g=u?"auto":h;return(0,x.jsxs)(l,{width:g,margin:f,children:[e&&(0,x.jsx)(a.Z,{label:e}),(0,x.jsx)(p,(0,o.Z)((0,o.Z)({},s(t,d)),n)),(0,x.jsx)(c.Z,{isError:r,errorMessage:i})]})};h.defaultProps={type:"text",validations:{},padding:"2px 5px",register:function(){},lineHeight:"20px"};var f=h},2399:function(n,e,t){t.d(e,{Z:function(){return f}});var r,i,o=t(1413),a=(t(7313),t(2180)),c=t(6947),s=t(168),d=t(3115),u=t(1237),l=d.ZP.div(r||(r=(0,s.Z)(["\n  width: 100%;\n  margin: 5px 0 0 0;\n"]))),p=d.ZP.textarea(i||(i=(0,s.Z)(["\n  width: 100%;\n  border: none;\n  padding: 5px;\n  font-size: 12px;\n  font-weight: 300;\n  background-color: ",";\n  border-bottom: 1px solid ",";\n  font-style: ",";\n  text-align: ",";\n  &:hover {\n    box-shadow: none;\n  }\n  &:focus {\n    box-shadow: none;\n  }\n  &:focus-visible {\n    outline: none;\n    box-shadow: none;\n  }\n"])),u.Z.lightWhite,u.Z.secondary,(function(n){return n.fontStyle?n.fontStyle:""}),(function(n){return n.textAlign?n.textAlign:"left"})),x=t(6417),h=function(n){var e=n.label,t=n.name,r=n.isError,i=n.errorMessage,s=n.register,d=n.validations;return(0,x.jsxs)(l,{children:[e&&(0,x.jsx)(a.Z,{label:e}),(0,x.jsx)(p,(0,o.Z)((0,o.Z)({},s(t,d)),n)),(0,x.jsx)(c.Z,{isError:r,errorMessage:i})]})};h.defaultProps={type:"text",validations:{},register:function(){}};var f=h}}]);